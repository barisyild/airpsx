var zg=Object.defineProperty;var Bg=(i,t,n)=>t in i?zg(i,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[t]=n;var Ce=(i,t,n)=>Bg(i,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();var Cs,Ue,Th,Ai,Wu,Lh,Qa,Nh,yl,el,tl,Mh,ys={},Dh=[],Ug=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,$o=Array.isArray;function Gn(i,t){for(var n in t)i[n]=t[n];return i}function bl(i){i&&i.parentNode&&i.parentNode.removeChild(i)}function Zn(i,t,n){var s,o,u,f={};for(u in t)u=="key"?s=t[u]:u=="ref"?o=t[u]:f[u]=t[u];if(arguments.length>2&&(f.children=arguments.length>3?Cs.call(arguments,2):n),typeof i=="function"&&i.defaultProps!=null)for(u in i.defaultProps)f[u]===void 0&&(f[u]=i.defaultProps[u]);return fs(i,f,s,o,null)}function fs(i,t,n,s,o){var u={type:i,props:t,key:n,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:o??++Th,__i:-1,__u:0};return o==null&&Ue.vnode!=null&&Ue.vnode(u),u}function $g(){return{current:null}}function Pt(i){return i.children}function En(i,t){this.props=i,this.context=t}function hr(i,t){if(t==null)return i.__?hr(i.__,i.__i+1):null;for(var n;t<i.__k.length;t++)if((n=i.__k[t])!=null&&n.__e!=null)return n.__e;return typeof i.type=="function"?hr(i):null}function Ph(i){var t,n;if((i=i.__)!=null&&i.__c!=null){for(i.__e=i.__c.base=null,t=0;t<i.__k.length;t++)if((n=i.__k[t])!=null&&n.__e!=null){i.__e=i.__c.base=n.__e;break}return Ph(i)}}function nl(i){(!i.__d&&(i.__d=!0)&&Ai.push(i)&&!Io.__r++||Wu!==Ue.debounceRendering)&&((Wu=Ue.debounceRendering)||Lh)(Io)}function Io(){var i,t,n,s,o,u,f,h;for(Ai.sort(Qa);i=Ai.shift();)i.__d&&(t=Ai.length,s=void 0,u=(o=(n=i).__v).__e,f=[],h=[],n.__P&&((s=Gn({},o)).__v=o.__v+1,Ue.vnode&&Ue.vnode(s),xl(n.__P,s,o,n.__n,n.__P.namespaceURI,32&o.__u?[u]:null,f,u??hr(o),!!(32&o.__u),h),s.__v=o.__v,s.__.__k[s.__i]=s,Ih(f,s,h),s.__e!=u&&Ph(s)),Ai.length>t&&Ai.sort(Qa));Io.__r=0}function Oh(i,t,n,s,o,u,f,h,p,g,b){var _,T,L,D,O,N,E=s&&s.__k||Dh,I=t.length;for(p=jg(n,t,E,p,I),_=0;_<I;_++)(L=n.__k[_])!=null&&(T=L.__i===-1?ys:E[L.__i]||ys,L.__i=_,N=xl(i,L,T,o,u,f,h,p,g,b),D=L.__e,L.ref&&T.ref!=L.ref&&(T.ref&&_l(T.ref,null,L),b.push(L.ref,L.__c||D,L)),O==null&&D!=null&&(O=D),4&L.__u||T.__k===L.__k?p=Ah(L,p,i):typeof L.type=="function"&&N!==void 0?p=N:D&&(p=D.nextSibling),L.__u&=-7);return n.__e=O,p}function jg(i,t,n,s,o){var u,f,h,p,g,b=n.length,_=b,T=0;for(i.__k=new Array(o),u=0;u<o;u++)(f=t[u])!=null&&typeof f!="boolean"&&typeof f!="function"?(p=u+T,(f=i.__k[u]=typeof f=="string"||typeof f=="number"||typeof f=="bigint"||f.constructor==String?fs(null,f,null,null,null):$o(f)?fs(Pt,{children:f},null,null,null):f.constructor===void 0&&f.__b>0?fs(f.type,f.props,f.key,f.ref?f.ref:null,f.__v):f).__=i,f.__b=i.__b+1,h=null,(g=f.__i=Vg(f,n,p,_))!==-1&&(_--,(h=n[g])&&(h.__u|=2)),h==null||h.__v===null?(g==-1&&T--,typeof f.type!="function"&&(f.__u|=4)):g!=p&&(g==p-1?T--:g==p+1?T++:(g>p?T--:T++,f.__u|=4))):i.__k[u]=null;if(_)for(u=0;u<b;u++)(h=n[u])!=null&&!(2&h.__u)&&(h.__e==s&&(s=hr(h)),Eh(h,h));return s}function Ah(i,t,n){var s,o;if(typeof i.type=="function"){for(s=i.__k,o=0;s&&o<s.length;o++)s[o]&&(s[o].__=i,t=Ah(s[o],t,n));return t}i.__e!=t&&(t&&i.type&&!n.contains(t)&&(t=hr(i)),n.insertBefore(i.__e,t||null),t=i.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function Yn(i,t){return t=t||[],i==null||typeof i=="boolean"||($o(i)?i.some(function(n){Yn(n,t)}):t.push(i)),t}function Vg(i,t,n,s){var o,u,f=i.key,h=i.type,p=t[n];if(p===null||p&&f==p.key&&h===p.type&&!(2&p.__u))return n;if(s>(p!=null&&!(2&p.__u)?1:0))for(o=n-1,u=n+1;o>=0||u<t.length;){if(o>=0){if((p=t[o])&&!(2&p.__u)&&f==p.key&&h===p.type)return o;o--}if(u<t.length){if((p=t[u])&&!(2&p.__u)&&f==p.key&&h===p.type)return u;u++}}return-1}function zu(i,t,n){t[0]=="-"?i.setProperty(t,n??""):i[t]=n==null?"":typeof n!="number"||Ug.test(t)?n:n+"px"}function uo(i,t,n,s,o){var u;e:if(t=="style")if(typeof n=="string")i.style.cssText=n;else{if(typeof s=="string"&&(i.style.cssText=s=""),s)for(t in s)n&&t in n||zu(i.style,t,"");if(n)for(t in n)s&&n[t]===s[t]||zu(i.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")u=t!=(t=t.replace(Nh,"$1")),t=t.toLowerCase()in i||t=="onFocusOut"||t=="onFocusIn"?t.toLowerCase().slice(2):t.slice(2),i.l||(i.l={}),i.l[t+u]=n,n?s?n.u=s.u:(n.u=yl,i.addEventListener(t,u?tl:el,u)):i.removeEventListener(t,u?tl:el,u);else{if(o=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in i)try{i[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?i.removeAttribute(t):i.setAttribute(t,t=="popover"&&n==1?"":n))}}function Bu(i){return function(t){if(this.l){var n=this.l[t.type+i];if(t.t==null)t.t=yl++;else if(t.t<n.u)return;return n(Ue.event?Ue.event(t):t)}}}function xl(i,t,n,s,o,u,f,h,p,g){var b,_,T,L,D,O,N,E,I,j,K,X,V,G,ee,de,he,se=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(p=!!(32&n.__u),u=[h=t.__e=n.__e]),(b=Ue.__b)&&b(t);e:if(typeof se=="function")try{if(E=t.props,I="prototype"in se&&se.prototype.render,j=(b=se.contextType)&&s[b.__c],K=b?j?j.props.value:b.__:s,n.__c?N=(_=t.__c=n.__c).__=_.__E:(I?t.__c=_=new se(E,K):(t.__c=_=new En(E,K),_.constructor=se,_.render=Xg),j&&j.sub(_),_.props=E,_.state||(_.state={}),_.context=K,_.__n=s,T=_.__d=!0,_.__h=[],_._sb=[]),I&&_.__s==null&&(_.__s=_.state),I&&se.getDerivedStateFromProps!=null&&(_.__s==_.state&&(_.__s=Gn({},_.__s)),Gn(_.__s,se.getDerivedStateFromProps(E,_.__s))),L=_.props,D=_.state,_.__v=t,T)I&&se.getDerivedStateFromProps==null&&_.componentWillMount!=null&&_.componentWillMount(),I&&_.componentDidMount!=null&&_.__h.push(_.componentDidMount);else{if(I&&se.getDerivedStateFromProps==null&&E!==L&&_.componentWillReceiveProps!=null&&_.componentWillReceiveProps(E,K),!_.__e&&(_.shouldComponentUpdate!=null&&_.shouldComponentUpdate(E,_.__s,K)===!1||t.__v==n.__v)){for(t.__v!=n.__v&&(_.props=E,_.state=_.__s,_.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(le){le&&(le.__=t)}),X=0;X<_._sb.length;X++)_.__h.push(_._sb[X]);_._sb=[],_.__h.length&&f.push(_);break e}_.componentWillUpdate!=null&&_.componentWillUpdate(E,_.__s,K),I&&_.componentDidUpdate!=null&&_.__h.push(function(){_.componentDidUpdate(L,D,O)})}if(_.context=K,_.props=E,_.__P=i,_.__e=!1,V=Ue.__r,G=0,I){for(_.state=_.__s,_.__d=!1,V&&V(t),b=_.render(_.props,_.state,_.context),ee=0;ee<_._sb.length;ee++)_.__h.push(_._sb[ee]);_._sb=[]}else do _.__d=!1,V&&V(t),b=_.render(_.props,_.state,_.context),_.state=_.__s;while(_.__d&&++G<25);_.state=_.__s,_.getChildContext!=null&&(s=Gn(Gn({},s),_.getChildContext())),I&&!T&&_.getSnapshotBeforeUpdate!=null&&(O=_.getSnapshotBeforeUpdate(L,D)),h=Oh(i,$o(de=b!=null&&b.type===Pt&&b.key==null?b.props.children:b)?de:[de],t,n,s,o,u,f,h,p,g),_.base=t.__e,t.__u&=-161,_.__h.length&&f.push(_),N&&(_.__E=_.__=null)}catch(le){if(t.__v=null,p||u!=null)if(le.then){for(t.__u|=p?160:128;h&&h.nodeType==8&&h.nextSibling;)h=h.nextSibling;u[u.indexOf(h)]=null,t.__e=h}else for(he=u.length;he--;)bl(u[he]);else t.__e=n.__e,t.__k=n.__k;Ue.__e(le,t,n)}else u==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):h=t.__e=Kg(n.__e,t,n,s,o,u,f,p,g);return(b=Ue.diffed)&&b(t),128&t.__u?void 0:h}function Ih(i,t,n){for(var s=0;s<n.length;s++)_l(n[s],n[++s],n[++s]);Ue.__c&&Ue.__c(t,i),i.some(function(o){try{i=o.__h,o.__h=[],i.some(function(u){u.call(o)})}catch(u){Ue.__e(u,o.__v)}})}function Kg(i,t,n,s,o,u,f,h,p){var g,b,_,T,L,D,O,N=n.props,E=t.props,I=t.type;if(I=="svg"?o="http://www.w3.org/2000/svg":I=="math"?o="http://www.w3.org/1998/Math/MathML":o||(o="http://www.w3.org/1999/xhtml"),u!=null){for(g=0;g<u.length;g++)if((L=u[g])&&"setAttribute"in L==!!I&&(I?L.localName==I:L.nodeType==3)){i=L,u[g]=null;break}}if(i==null){if(I==null)return document.createTextNode(E);i=document.createElementNS(o,I,E.is&&E),h&&(Ue.__m&&Ue.__m(t,u),h=!1),u=null}if(I===null)N===E||h&&i.data===E||(i.data=E);else{if(u=u&&Cs.call(i.childNodes),N=n.props||ys,!h&&u!=null)for(N={},g=0;g<i.attributes.length;g++)N[(L=i.attributes[g]).name]=L.value;for(g in N)if(L=N[g],g!="children"){if(g=="dangerouslySetInnerHTML")_=L;else if(!(g in E)){if(g=="value"&&"defaultValue"in E||g=="checked"&&"defaultChecked"in E)continue;uo(i,g,null,L,o)}}for(g in E)L=E[g],g=="children"?T=L:g=="dangerouslySetInnerHTML"?b=L:g=="value"?D=L:g=="checked"?O=L:h&&typeof L!="function"||N[g]===L||uo(i,g,L,N[g],o);if(b)h||_&&(b.__html===_.__html||b.__html===i.innerHTML)||(i.innerHTML=b.__html),t.__k=[];else if(_&&(i.innerHTML=""),Oh(i,$o(T)?T:[T],t,n,s,I=="foreignObject"?"http://www.w3.org/1999/xhtml":o,u,f,u?u[0]:n.__k&&hr(n,0),h,p),u!=null)for(g=u.length;g--;)bl(u[g]);h||(g="value",I=="progress"&&D==null?i.removeAttribute("value"):D!==void 0&&(D!==i[g]||I=="progress"&&!D||I=="option"&&D!==N[g])&&uo(i,g,D,N[g],o),g="checked",O!==void 0&&O!==i[g]&&uo(i,g,O,N[g],o))}return i}function _l(i,t,n){try{if(typeof i=="function"){var s=typeof i.__u=="function";s&&i.__u(),s&&t==null||(i.__u=i(t))}else i.current=t}catch(o){Ue.__e(o,n)}}function Eh(i,t,n){var s,o;if(Ue.unmount&&Ue.unmount(i),(s=i.ref)&&(s.current&&s.current!==i.__e||_l(s,null,t)),(s=i.__c)!=null){if(s.componentWillUnmount)try{s.componentWillUnmount()}catch(u){Ue.__e(u,t)}s.base=s.__P=null}if(s=i.__k)for(o=0;o<s.length;o++)s[o]&&Eh(s[o],t,n||typeof i.type!="function");n||bl(i.__e),i.__c=i.__=i.__e=void 0}function Xg(i,t,n){return this.constructor(i,n)}function Fi(i,t,n){var s,o,u,f;t==document&&(t=document.documentElement),Ue.__&&Ue.__(i,t),o=(s=typeof n=="function")?null:n&&n.__k||t.__k,u=[],f=[],xl(t,i=(!s&&n||t).__k=Zn(Pt,null,[i]),o||ys,ys,t.namespaceURI,!s&&n?[n]:o?null:t.firstChild?Cs.call(t.childNodes):null,u,!s&&n?n:o?o.__e:t.firstChild,s,f),Ih(u,i,f)}function Rh(i,t){Fi(i,t,Rh)}function qg(i,t,n){var s,o,u,f,h=Gn({},i.props);for(u in i.type&&i.type.defaultProps&&(f=i.type.defaultProps),t)u=="key"?s=t[u]:u=="ref"?o=t[u]:h[u]=t[u]===void 0&&f!==void 0?f[u]:t[u];return arguments.length>2&&(h.children=arguments.length>3?Cs.call(arguments,2):n),fs(i.type,h,s||i.key,o||i.ref,null)}function Gg(i,t){var n={__c:t="__cC"+Mh++,__:i,Consumer:function(s,o){return s.children(o)},Provider:function(s){var o,u;return this.getChildContext||(o=new Set,(u={})[t]=this,this.getChildContext=function(){return u},this.componentWillUnmount=function(){o=null},this.shouldComponentUpdate=function(f){this.props.value!==f.value&&o.forEach(function(h){h.__e=!0,nl(h)})},this.sub=function(f){o.add(f);var h=f.componentWillUnmount;f.componentWillUnmount=function(){o&&o.delete(f),h&&h.call(f)}}),s.children}};return n.Provider.__=n.Consumer.contextType=n}Cs=Dh.slice,Ue={__e:function(i,t,n,s){for(var o,u,f;t=t.__;)if((o=t.__c)&&!o.__)try{if((u=o.constructor)&&u.getDerivedStateFromError!=null&&(o.setState(u.getDerivedStateFromError(i)),f=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(i,s||{}),f=o.__d),f)return o.__E=o}catch(h){i=h}throw i}},Th=0,En.prototype.setState=function(i,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Gn({},this.state),typeof i=="function"&&(i=i(Gn({},n),this.props)),i&&Gn(n,i),i!=null&&this.__v&&(t&&this._sb.push(t),nl(this))},En.prototype.forceUpdate=function(i){this.__v&&(this.__e=!0,i&&this.__h.push(i),nl(this))},En.prototype.render=Pt,Ai=[],Lh=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Qa=function(i,t){return i.__v.__b-t.__v.__b},Io.__r=0,Nh=/(PointerCapture)$|Capture$/i,yl=0,el=Bu(!1),tl=Bu(!0),Mh=0;var Yg=0;function y(i,t,n,s,o,u){t||(t={});var f,h,p=t;if("ref"in p)for(h in p={},t)h=="ref"?f=t[h]:p[h]=t[h];var g={type:i,props:p,key:n,ref:f,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Yg,__i:-1,__u:0,__source:o,__self:u};if(typeof i=="function"&&(f=i.defaultProps))for(h in f)p[h]===void 0&&(p[h]=f[h]);return Ue.vnode&&Ue.vnode(g),g}var pi,ut,Ua,Uu,dr=0,Fh=[],pt=Ue,$u=pt.__b,ju=pt.__r,Vu=pt.diffed,Ku=pt.__c,Xu=pt.unmount,qu=pt.__;function vr(i,t){pt.__h&&pt.__h(ut,i,dr||t),dr=0;var n=ut.__H||(ut.__H={__:[],__h:[]});return i>=n.__.length&&n.__.push({}),n.__[i]}function oe(i){return dr=1,wl($h,i)}function wl(i,t,n){var s=vr(pi++,2);if(s.t=i,!s.__c&&(s.__=[n?n(t):$h(void 0,t),function(h){var p=s.__N?s.__N[0]:s.__[0],g=s.t(p,h);p!==g&&(s.__N=[g,s.__[1]],s.__c.setState({}))}],s.__c=ut,!ut.u)){var o=function(h,p,g){if(!s.__c.__H)return!0;var b=s.__c.__H.__.filter(function(T){return!!T.__c});if(b.every(function(T){return!T.__N}))return!u||u.call(this,h,p,g);var _=s.__c.props!==h;return b.forEach(function(T){if(T.__N){var L=T.__[0];T.__=T.__N,T.__N=void 0,L!==T.__[0]&&(_=!0)}}),u&&u.call(this,h,p,g)||_};ut.u=!0;var u=ut.shouldComponentUpdate,f=ut.componentWillUpdate;ut.componentWillUpdate=function(h,p,g){if(this.__e){var b=u;u=void 0,o(h,p,g),u=b}f&&f.call(this,h,p,g)},ut.shouldComponentUpdate=o}return s.__N||s.__}function je(i,t){var n=vr(pi++,3);!pt.__s&&kl(n.__H,t)&&(n.__=i,n.i=t,ut.__H.__h.push(n))}function Ts(i,t){var n=vr(pi++,4);!pt.__s&&kl(n.__H,t)&&(n.__=i,n.i=t,ut.__h.push(n))}function gt(i){return dr=5,jo(function(){return{current:i}},[])}function Hh(i,t,n){dr=6,Ts(function(){return typeof i=="function"?(i(t()),function(){return i(null)}):i?(i.current=t(),function(){return i.current=null}):void 0},n==null?n:n.concat(i))}function jo(i,t){var n=vr(pi++,7);return kl(n.__H,t)&&(n.__=i(),n.__H=t,n.__h=i),n.__}function Wh(i,t){return dr=8,jo(function(){return i},t)}function zh(i){var t=ut.context[i.__c],n=vr(pi++,9);return n.c=i,t?(n.__==null&&(n.__=!0,t.sub(ut)),t.props.value):i.__}function Bh(i,t){pt.useDebugValue&&pt.useDebugValue(t?t(i):i)}function Uh(){var i=vr(pi++,11);if(!i.__){for(var t=ut.__v;t!==null&&!t.__m&&t.__!==null;)t=t.__;var n=t.__m||(t.__m=[0,0]);i.__="P"+n[0]+"-"+n[1]++}return i.__}function Zg(){for(var i;i=Fh.shift();)if(i.__P&&i.__H)try{i.__H.__h.forEach(To),i.__H.__h.forEach(il),i.__H.__h=[]}catch(t){i.__H.__h=[],pt.__e(t,i.__v)}}pt.__b=function(i){ut=null,$u&&$u(i)},pt.__=function(i,t){i&&t.__k&&t.__k.__m&&(i.__m=t.__k.__m),qu&&qu(i,t)},pt.__r=function(i){ju&&ju(i),pi=0;var t=(ut=i.__c).__H;t&&(Ua===ut?(t.__h=[],ut.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.i=n.__N=void 0})):(t.__h.forEach(To),t.__h.forEach(il),t.__h=[],pi=0)),Ua=ut},pt.diffed=function(i){Vu&&Vu(i);var t=i.__c;t&&t.__H&&(t.__H.__h.length&&(Fh.push(t)!==1&&Uu===pt.requestAnimationFrame||((Uu=pt.requestAnimationFrame)||Jg)(Zg)),t.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.i=void 0})),Ua=ut=null},pt.__c=function(i,t){t.some(function(n){try{n.__h.forEach(To),n.__h=n.__h.filter(function(s){return!s.__||il(s)})}catch(s){t.some(function(o){o.__h&&(o.__h=[])}),t=[],pt.__e(s,n.__v)}}),Ku&&Ku(i,t)},pt.unmount=function(i){Xu&&Xu(i);var t,n=i.__c;n&&n.__H&&(n.__H.__.forEach(function(s){try{To(s)}catch(o){t=o}}),n.__H=void 0,t&&pt.__e(t,n.__v))};var Gu=typeof requestAnimationFrame=="function";function Jg(i){var t,n=function(){clearTimeout(s),Gu&&cancelAnimationFrame(t),setTimeout(i)},s=setTimeout(n,100);Gu&&(t=requestAnimationFrame(n))}function To(i){var t=ut,n=i.__c;typeof n=="function"&&(i.__c=void 0,n()),ut=t}function il(i){var t=ut;i.__c=i.__(),ut=t}function kl(i,t){return!i||i.length!==t.length||t.some(function(n,s){return n!==i[s]})}function $h(i,t){return typeof t=="function"?t(i):t}const Qg="/assets/elf-icon-CuriXRkE.svg",em={getFileIcon:(i,t)=>{if(i==="folder")return"ðŸ“";switch(t.split(".").pop().toLowerCase()){case"pdf":return"ðŸ“•";case"doc":case"docx":return"ðŸ“˜";case"txt":return"ðŸ“„";case"xls":case"xlsx":return"ðŸ“Š";case"ppt":case"pptx":return"ðŸ“‘";case"jpg":case"jpeg":case"png":case"gif":case"bmp":return"ðŸ–¼ï¸";case"flac":case"mp3":case"wav":case"ogg":return"ðŸŽµ";case"mp4":case"avi":case"mkv":return"ðŸŽ¬";case"zip":case"rar":case"7z":return"ðŸ“¦";case"pkg":return"ðŸº";case"js":case"jsx":case"ts":case"tsx":return"âš¡";case"html":return"ðŸŒ";case"css":return"ðŸŽ¨";case"json":return"ðŸ“‹";case"bin":case"elf":case"self":case"sprx":case"prx":return y("img",{src:Qg,alt:"ELF",style:{width:"48px",height:"48px"}});default:return"ðŸ“„"}}},tm=({window:i,children:t,isActive:n,isDarkMode:s,onClose:o,onFocus:u,onDragStart:f,onMinimize:h})=>{const[p,g]=oe(!1),[b,_]=oe(!1),[T,L]=oe({x:0,y:0}),[D,O]=oe({x:0,y:0,width:0,height:0}),[N,E]=oe(!1),I=gt(null),j=gt({x:0,y:0});je(()=>{E("ontouchstart"in i||navigator.maxTouchPoints>0)},[]);const K=he=>{if(he.target.closest(".window-header")&&!he.target.closest(".window-controls")){const se=he.touches[0];j.current={x:se.clientX,y:se.clientY},g(!0),f();const le=I.current.getBoundingClientRect();L({x:se.clientX-le.left,y:se.clientY-le.top})}},X=he=>{if(p){const se=he.touches[0],le=I.current.getBoundingClientRect(),R=document.querySelector(".desktop-content").getBoundingClientRect();let F=se.clientX-T.x,S=se.clientY-T.y;I.current.style.left=`${F}px`,I.current.style.top=`${S}px`,de(le,R)}},V=()=>{g(!1),_(!1)},G=he=>{if(he.target.closest(".window-header")&&!he.target.closest(".window-controls")){g(!0),f();const se=I.current.getBoundingClientRect();L({x:he.clientX-se.left,y:he.clientY-se.top})}},ee=he=>{he.stopPropagation(),_(!0);const se=I.current.getBoundingClientRect();O({x:he.clientX,y:he.clientY,width:se.width,height:se.height})},de=(he,se)=>{let le=parseInt(I.current.style.left),R=parseInt(I.current.style.top),F=he.width,S=he.height;F>se.width&&(F=se.width,I.current.style.width=`${F}px`),S>se.height&&(S=se.height,I.current.style.height=`${S}px`),le=Math.max(0,Math.min(le,se.width-F)),R=Math.max(0,Math.min(R,se.height-S)),I.current.style.left=`${le}px`,I.current.style.top=`${R}px`};return je(()=>{const he=le=>{const R=I.current.getBoundingClientRect(),F=document.querySelector(".desktop-content").getBoundingClientRect();if(p){let S=le.clientX-T.x,me=le.clientY-T.y;I.current.style.left=`${S}px`,I.current.style.top=`${me}px`,de(R,F)}else if(b){let S=D.width+(le.clientX-D.x),me=D.height+(le.clientY-D.y);S=Math.max(200,Math.min(S,F.width)),me=Math.max(150,Math.min(me,F.height)),I.current.style.width=`${S}px`,I.current.style.height=`${me}px`,de(R,F)}},se=()=>{g(!1),_(!1)};return(p||b)&&(document.addEventListener("mousemove",he),document.addEventListener("mouseup",se)),()=>{document.removeEventListener("mousemove",he),document.removeEventListener("mouseup",se)}},[p,b,T,D]),je(()=>{const he=new ResizeObserver(()=>{var F,S;const le=(F=I.current)==null?void 0:F.getBoundingClientRect(),R=(S=document.querySelector(".desktop-content"))==null?void 0:S.getBoundingClientRect();le&&R&&de(le,R)}),se=document.querySelector(".desktop-content");return se&&he.observe(se),()=>{he.disconnect()}},[]),y("div",{ref:I,"data-window-id":i.id,className:`window ${n?"active":""} ${s?"dark":""} 
 ${b?"resizing":""} ${N?"touch-device":""} ${i.app==="PlayStation"?"console":""}`,style:{left:i.position.x,top:i.position.y,width:i.size.width,height:i.size.height,display:i.minimized?"none":"flex"},onMouseDown:u,onTouchStart:K,onTouchMove:X,onTouchEnd:V,children:[y("div",{className:"window-header",onMouseDown:G,children:[y("div",{className:"window-title",children:[y("span",{className:"window-icon icon",children:i.icon}),y("span",{className:"window-title-text",children:i.title})]}),y("div",{className:"window-controls",children:N?y(Pt,{children:[y("button",{className:"window-minimize touch",onClick:h,children:"âˆ’"}),y("button",{className:"window-close touch",onClick:o,children:"Ã—"})]}):y(Pt,{children:[y("button",{className:"window-minimize",onClick:h,children:"âˆ’"}),y("button",{className:"window-close",onClick:o,children:"Ã—"})]})})]}),y("div",{className:"window-content",children:t}),!N&&y("div",{className:"window-resize",onMouseDown:ee})]})},nm=({windows:i,activeWindow:t,isDarkMode:n,onWindowClick:s,onThemeToggle:o})=>y("div",{className:`taskbar ${n?"dark":""}`,children:[" ",y("div",{className:"taskbar-windows",children:[" ",i.map(u=>y("button",{className:`taskbar-window-button ${t===u.id?"active":""}`,onClick:()=>s(u.id,t===u.id),children:[" ",y("span",{className:"taskbar-window-icon icon",children:u.icon})," ",y("span",{className:"taskbar-window-title",children:u.title})," "]},u.id))," "]})," ",y("button",{className:"taskbar-theme-toggle icon",onClick:o,children:[" ",n?"â˜€ï¸":"ðŸŒ™"," "]})," "]}),Yu="/".endsWith("/")?"/".slice(0,-1):"/";class xt{static reset(){this.activeXHRs.forEach(t=>{try{t.abort()}catch(n){console.error("Error aborting XHR:",n)}}),this.queue=new Set,this.sessionKey=null,this.file=null,this.id=0,this.isRunning=!1,this.onProgressCallback=null,this.totalChunks=0,this.uploadedChunks=0,this.onCompleteCallback=null,this.onErrorCallback=null,this.uploadedBytes=0,this.totalBytes=0,this.chunkProgress={},this.pendingChunks=new Map,this.emptyRetryCount=0,this.errorRetryCount=0,this.activeXHRs=[]}static updateProgress(){if(this.onProgressCallback&&this.totalBytes>0){let t=0;for(const s in this.chunkProgress)t+=this.chunkProgress[s].uploaded;const n=t/this.totalBytes*100;this.onProgressCallback(n);for(const s in this.chunkProgress){const o=this.chunkProgress[s];o.uploaded===o.total&&!this.queue.has(s)&&delete this.chunkProgress[s]}}}static async startQueue(t,n,s,o,u){this.file=t,this.sessionKey=n,this.onProgressCallback=s,this.onCompleteCallback=o,this.onErrorCallback=u,this.isRunning=!0,this.totalBytes=t.size,this.uploadedBytes=0,this.getPackageList()}static async getPackageList(){if(this.isRunning){if(this.sessionKey===null){setTimeout(()=>{this.getPackageList()},100);return}try{const t=await fetch(`${Yu}/api/package/upload/list?sessionKey=${this.sessionKey}&id=${this.id++}`,{method:"POST"});if(!t.ok)throw new Error(`List API returned ${t.status}: ${t.statusText}`);const n=await t.json();this.errorRetryCount=0;let s=0;n.chunks&&n.chunks.length>0&&n.chunks.forEach(f=>{this.queue.has(f.key)||this.pendingChunks.has(f.key)||s++});let o=0;for(const f in this.chunkProgress)o+=this.chunkProgress[f].uploaded;const u=this.totalBytes>0?o/this.totalBytes*100:0;if(s===0&&this.queue.size>0){if(u>=99.9){console.log("[PackageQueue] Progress 100%, no new chunks - PKG installation completed successfully!"),this.isRunning=!1,this.onCompleteCallback&&this.onCompleteCallback(n),this.reset();return}if(this.emptyRetryCount++,console.log(`[PackageQueue] No new chunks (empty or duplicate). Progress: ${u.toFixed(1)}%, Retry: ${this.emptyRetryCount}/${this.maxEmptyRetries}`),this.emptyRetryCount>=this.maxEmptyRetries){console.error("[PackageQueue] PKG installation failed - No new chunks received after 3 retries"),this.isRunning=!1,this.onErrorCallback&&this.onErrorCallback(new Error("PKG installation failed - No new chunks received")),this.reset();return}this.isRunning&&setTimeout(()=>{this.getPackageList()},1e3);return}if(this.queue.size===0&&s===0&&this.pendingChunks.size===0){console.log("[PackageQueue] PKG installation completed successfully!"),this.isRunning=!1,this.onCompleteCallback&&this.onCompleteCallback(n),this.reset();return}s>0&&(console.log(`[PackageQueue] ${s} new chunks received`),this.emptyRetryCount=0),await this.manageChunks(this.file,n.sessionKey,n.chunks),this.isRunning&&this.getPackageList()}catch(t){if(this.errorRetryCount++,console.error(`Package list error (${this.errorRetryCount}/${this.maxErrorRetries}):`,t.message),this.errorRetryCount>=this.maxErrorRetries){console.error("[PackageQueue] PKG installation failed - List API failed after 3 retries"),this.isRunning=!1,this.onErrorCallback&&this.onErrorCallback(new Error("PKG installation failed - List API error")),this.reset();return}this.isRunning&&setTimeout(()=>{this.getPackageList()},1e3)}}}static async uploadChunk(t,n,s){return new Promise((o,u)=>{const f=new XMLHttpRequest,h=new FormData,p=s.end-s.start+1;this.activeXHRs.push(f),this.chunkProgress[s.key]={total:p,uploaded:0},h.append("file",new Blob([t.slice(s.start,s.end+1)],{type:t.type})),f.open("POST",`${Yu}/api/package/upload?sessionKey=${n}&chunkKey=${s.key}`,!0),f.setRequestHeader("Expect","100-continue"),f.upload.onprogress=g=>{g.lengthComputable&&(this.chunkProgress[s.key].uploaded=g.loaded,this.updateProgress())},f.onload=()=>{const g=this.activeXHRs.indexOf(f);if(g>-1&&this.activeXHRs.splice(g,1),f.status>=200&&f.status<300){this.uploadedChunks++,this.chunkProgress[s.key].uploaded=p,this.updateProgress();try{const b=JSON.parse(f.responseText);b.chunks&&Array.isArray(b.chunks)&&b.chunks.length>0&&(console.log(`[UploadChunk] ${s.key} completed, ${b.chunks.length} chunks in response`),b.chunks.forEach(_=>{this.queue.has(_.key)||this.pendingChunks.set(_.key,_)}),console.log(`[UploadChunk] Total pending chunks: ${this.pendingChunks.size}`)),o(b)}catch(b){console.error("[UploadChunk] Response parse error:",b),o({})}}else delete this.chunkProgress[s.key],u(new Error("Network response was not ok"))},f.onerror=()=>{const g=this.activeXHRs.indexOf(f);g>-1&&this.activeXHRs.splice(g,1),delete this.chunkProgress[s.key],u(new Error("Network error"))},f.onabort=()=>{const g=this.activeXHRs.indexOf(f);g>-1&&this.activeXHRs.splice(g,1),delete this.chunkProgress[s.key],u(new Error("Upload cancelled"))},f.send(h)})}static async manageChunks(t,n,s){if(!s||s.length===0)return;this.totalChunks===0&&s.length>0&&(this.totalChunks=s.length);const o=[];for(let u=0;u<s.length;u++){let f=s[u];this.queue.has(f.key)||(this.queue.add(f.key),o.push(this.uploadChunk(t,n,f).catch(h=>{console.error(`Chunk ${f.key} upload error:`,h),this.queue.delete(f.key),delete this.chunkProgress[f.key]})))}if(o.length>0&&console.log(`[PackageQueue] Uploading ${o.length} chunks...`),await Promise.all(o),o.length>0&&console.log(`[PackageQueue] ${o.length} chunks upload completed`),this.pendingChunks.size>0)if(this.pendingChunks.size>=2){console.log(`[PackageQueue] ${this.pendingChunks.size} pending chunks available, uploading them first`);const u=Array.from(this.pendingChunks.values());this.pendingChunks.clear(),await this.manageChunks(t,n,u)}else console.log(`[PackageQueue] ${this.pendingChunks.size} pending chunk, list will be called`),this.pendingChunks.clear()}static stopQueue(){this.isRunning=!1,this.reset()}}Ce(xt,"queue",new Set),Ce(xt,"sessionKey",null),Ce(xt,"file",null),Ce(xt,"id",0),Ce(xt,"isRunning",!1),Ce(xt,"onProgressCallback",null),Ce(xt,"totalChunks",0),Ce(xt,"uploadedChunks",0),Ce(xt,"onCompleteCallback",null),Ce(xt,"onErrorCallback",null),Ce(xt,"uploadedBytes",0),Ce(xt,"totalBytes",0),Ce(xt,"chunkProgress",{}),Ce(xt,"pendingChunks",new Map),Ce(xt,"emptyRetryCount",0),Ce(xt,"errorRetryCount",0),Ce(xt,"maxEmptyRetries",3),Ce(xt,"maxErrorRetries",3),Ce(xt,"activeXHRs",[]);const it="/".endsWith("/")?"/".slice(0,-1):"/";class Ne{static async fetch(t){try{const n=await fetch(`${it}${t}`);if(!n.ok)throw new Error("Network response was not ok");return await n.json()}catch(n){throw console.error("API Error:",n),n}}static async getSystemInfo(){return this.fetch("/api/system/info")}static async getStorageInfo(){return this.fetch("/api/storage/info")}static async getProcessList(){return this.fetch("/api/process/list")}static async executeScript(t,n="rulescript"){try{const s=await fetch(`${it}/api/script/execute`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({script:t,type:n})});if(!s.ok)throw new Error("Network response was not ok");return await s.json()}catch(s){throw console.error("Script execution error:",s),s}}static async executeScriptStream(t,n,s="rulescript"){try{const u=(await fetch(`${it}/api/script/execute`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({script:t,type:s})})).body.getReader();for(;;){const{done:f,value:h}=await u.read();if(f)break;const p=new TextDecoder().decode(h);n(p)}}catch(o){throw o}}static formatBytes(t){if(t===0)return"0 B";const n=1024,s=["B","KB","MB","GB","TB"],o=Math.floor(Math.log(t)/Math.log(n));return`${(t/Math.pow(n,o)).toFixed(1)} ${s[o]}`}static getTitleImageUrl(t){return`${it}/api/title/image/${t}`}static async getSystemStatus(){return this.fetch("/api/system/status")}static async getSystemStats(){return this.fetch("/api/system/stats")}static async getAppList(){return this.fetch("/api/app/list")}static async runApp(t){try{return await(await fetch(`${it}/api/app/run/${t}`)).json()}catch(n){throw console.error("App run error:",n),n}}static async getProfileList(){return this.fetch("/api/profile/list")}static getProfileImageUrl(t){return`${it}/api/profile/image/${t}`}static async downloadBackup(t=null){const n=t?`${it}/api/save/backup/${t}`:`${it}/api/save/backup`;window.location.href=n}static async getTaskList(){return this.fetch("/api/task/list")}static async getTaskDetail(t){try{const n=await fetch(`${it}/api/task/detail`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t})});if(!n.ok)throw new Error("Network response was not ok");return await n.json()}catch(n){throw console.error("Task detail error:",n),n}}static async updateTask(t,n){try{const o=await(await fetch(`${it}/api/task/update`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t,...n})})).json();if(o.error)throw new Error(o.error);return{id:t,...n}}catch(s){throw console.error("Task update error:",s),s}}static async createTask(t,n="rulescript"){try{const s=await fetch(`${it}/api/task/create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t,type:n})});if(!s.ok)throw new Error("Network response was not ok");return await s.json()}catch(s){throw console.error("Task create error:",s),s}}static async deleteTask(t){try{const n=await fetch(`${it}/api/task/delete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t})});if(!n.ok)throw new Error("Network response was not ok");return await n.json()}catch(n){throw console.error("Task delete error:",n),n}}static async streamTaskLog(t,n){try{const o=(await fetch(`${it}/api/task/log`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t})})).body.getReader();for(;;){const{done:u,value:f}=await o.read();if(u)break;const h=new TextDecoder().decode(f);n(h)}}catch(s){throw console.error("Task log stream error:",s),s}}static async getTaskStatus(){try{const t=await fetch(`${it}/api/task/status`);if(!t.ok)throw new Error("Network response was not ok");return await t.json()}catch(t){throw console.error("Task status error:",t),t}}static async listFiles(t){try{const n=await fetch(`${it}/api/fs/list`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:t})});if(!n.ok)throw new Error("Network response was not ok");return(await n.json()).map(o=>({id:`${o.name}-${o.mtime}`,name:o.name,type:o.isDirectory?"folder":"file",size:o.size,mtime:o.mtime,permission:o.mode.toString(8),isDirectory:o.isDirectory}))}catch(n){throw console.error("Failed to list files:",n),n}}static async downloadFiles(t){try{const n=btoa(t.join(",")),s=`${it}/api/fs/download/${n}`;window.open(s,"_blank")}catch(n){throw console.error("Download error:",n),n}}static async renameFile(t,n){try{const s=await fetch(`${it}/api/fs/rename`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:t,name:n})});if(!s.ok)throw new Error("Network response was not ok");return await s.json()}catch(s){throw console.error("Rename error:",s),s}}static async uploadFile(t,n,s){return new Promise((o,u)=>{const f=new XMLHttpRequest,h=new FormData;h.append("file",n),f.open("POST",`${it}/api/fs/upload/${t}`,!0),f.upload.onprogress=p=>{if(p.lengthComputable&&s){const g=p.loaded/p.total*100;s(g)}},f.onload=()=>{f.status>=200&&f.status<300?o(JSON.parse(f.responseText)):u(new Error("Network response was not ok"))},f.onerror=()=>u(new Error("Network error")),f.send(h)})}static async executePayload(t){try{const n=await fetch(`${it}/api/fs/payload`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:t})});if(!n.ok)throw new Error("Network response was not ok");return await n.json()}catch(n){throw console.error("Execute payload error:",n),n}}static stopPkgUpload(){xt.stopQueue()}static async uploadPkg(t,n,s){return new Promise((o,u)=>{if(t.size<65536){u(new Error("The file is not big enough."));return}const h=t.slice(0,65536),p=new FileReader;p.onload=async g=>{const b=g.target.result;if(!(b instanceof ArrayBuffer)){u(new Error("Read file error."));return}const _=new DataView(b),T=_.getUint32(0,!1);if(T===2135312712)Number(_.getBigInt64(88,!0));else if(T!==2135117396){u(new Error("Invalid PKG file."));return}try{const L=new XMLHttpRequest,D=new FormData;L.open("POST",`${it}/api/package/upload/init?size=${t.size}`,!0),L.onload=()=>{if(L.status>=200&&L.status<300){const O=JSON.parse(L.responseText);xt.startQueue(t,O.sessionKey,n,N=>{s&&s(N),o(N)},N=>{u(N)})}else u(new Error("Network response was not ok"))},L.onerror=()=>u(new Error("Network error")),L.send(D)}catch(L){u(L)}},p.onerror=()=>u(new Error("File read error")),p.readAsArrayBuffer(h)})}static async installPackageFromUrl(t){try{const n=await fetch(`${it}/api/package/install`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:t})});if(!n.ok){const s=await n.json();throw new Error(s.error||"Network response was not ok")}return await n.json()}catch(n){throw console.error("Package install error:",n),n}}static async getMediaList(){try{const t=await fetch(`${it}/api/media/list`);if(!t.ok)throw new Error("Network response was not ok");return await t.json()}catch(t){throw console.error("Media list error:",t),t}}static getMediaUrl(t){const n=encodeURIComponent(t);return`${it}/api/media/${n}`}static getMediaThumbnailUrl(t){const n=encodeURIComponent(t);return`${it}/api/media/thumbnails/${n}`}static isVideo(t){return t.toLowerCase().endsWith(".mp4")||t.toLowerCase().endsWith(".webm")||t.toLowerCase().endsWith(".mov")}static getStreamUrl(t){return`${it}/api/fs/stream/${t}`}static async getRemoteScripts(){return this.fetch("/api/script/remote/list")}static async searchRemoteScripts(t){return this.fetch(`/api/script/remote/list?search=${encodeURIComponent(t)}`)}static getScriptImageUrl(t){return`${it}/api/script/remote/image/${t}`}static async executeRemoteScript(t){try{const n=await fetch(`${it}/api/script/remote/execute`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:t})});if(!n.ok)throw new Error("Network response was not ok");return await n.json()}catch(n){throw console.error("Remote script execution error:",n),n}}static async executeRemoteScriptStream(t,n){try{const s=await fetch(`${it}/api/script/remote/execute`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:t})});if(!s.ok)throw new Error(`Server returned ${s.status}: ${s.statusText}`);const o=s.body.getReader(),u=new TextDecoder;for(;;){const{done:f,value:h}=await o.read();if(f)break;const p=u.decode(h);n(p)}}catch(s){throw console.error("Remote script execution error:",s),s}}static async sendHeartbeat(){try{await fetch(`${it}/api/script/remote/heartbeat`,{method:"POST",headers:{"Content-Type":"application/json"}})}catch(t){throw console.error("Heartbeat error:",t),t}}}const im=({isDarkMode:i})=>{const[t,n]=oe(null),[s,o]=oe(null),[u,f]=oe(!0),[h,p]=oe(new Set),[g,b]=oe(0);je(()=>{const O=setInterval(()=>{b(N=>N+1)},1e3);return()=>clearInterval(O)},[]);const _=async()=>{try{const O=await Ne.getSystemStatus(),N=new Set;t&&(Math.abs(O.cpu.frequency-t.cpu.frequency)>5e7&&N.add("frequency"),Math.abs(O.cpu.temperature-t.cpu.temperature)>.5&&N.add("temperature"),Math.abs(O.cpu.socSensorTemperature-t.cpu.socSensorTemperature)>.5&&N.add("socTemp")),p(N),n(O),o(null),setTimeout(()=>p(new Set),1e3)}catch(O){console.error("System info alÄ±namadÄ±:",O),o("Failed to load system information")}finally{f(!1)}};je(()=>{_();const O=setInterval(_,5e3);return()=>clearInterval(O)},[]);const T=O=>{if(!O)return"--:--:--";const E=Math.floor(Date.now()/1e3)-O,I=Math.floor(E/3600),j=Math.floor(E%3600/60),K=E%60,X=V=>String(V).padStart(2,"0");return`${X(I)}:${X(j)}:${X(K)}`},L=O=>{switch(O){case 0:return"6CPU";case 1:return"7CPU (LOW)";case 5:return"7CPU (NORMAL)";default:return"Unknown"}},D=(O,N)=>{let E="info-value";return h.has(O)&&(E+=" updated"),O.includes("temperature")&&N>45&&(E+=" warning"),E};return!t||s?y("div",{className:`system-info ${i?"dark":""}`,children:[y("div",{className:"system-info-header",children:"System Information"}),y("div",{className:"system-info-error",children:[y("div",{className:"error-icon",children:"âš ï¸"}),y("div",{className:"error-message",children:s||"Waiting for data..."}),y("div",{className:"error-detail",children:"Unable to retrieve system information. Please check your connection."})]})]}):y("div",{className:`system-info ${i?"dark":""}`,children:[y("div",{className:"system-info-header",children:"System Status"}),y("div",{className:"system-info-content",children:[t.app&&t.app.titleID&&y("div",{className:"info-section",children:[y("div",{className:"section-title",children:"Running App"}),y("div",{className:"game-info",children:[y("div",{className:"game-image",children:y("img",{src:Ne.getTitleImageUrl(t.app.titleID),alt:t.app.titleName||t.app.titleID,onError:O=>O.target.style.display="none"})}),y("div",{className:"game-details",children:[y("div",{className:"info-group",children:[y("div",{className:"info-label",children:"Title"}),y("div",{className:"info-value",children:t.app.titleName||t.app.titleID})]}),y("div",{className:"info-group",children:[y("div",{className:"info-label",children:"Process"}),y("div",{className:"info-value",children:[t.app.comm," (",t.app.pid,")"]})]}),y("div",{className:"info-group",children:[y("div",{className:"info-label",children:"Uptime"}),y("div",{className:"info-value uptime",children:T(t.app.start)})]})]})]})]}),y("div",{className:"info-section",children:[y("div",{className:"section-title",children:"System Status"}),y("div",{className:"info-group",children:[y("div",{className:"info-label",children:"Mode"}),y("div",{className:"info-value",children:L(t.cpu.mode)})]}),y("div",{className:"info-group",children:[y("div",{className:"info-label",children:"Frequency"}),y("div",{className:D("frequency",t.cpu.frequency),children:[(t.cpu.frequency/1e6).toFixed(0)," MHz"]})]}),y("div",{className:"info-group",children:[y("div",{className:"info-label",children:"CPU Temp"}),y("div",{className:D("temperature",t.cpu.temperature),children:[t.cpu.temperature.toFixed(1),"Â°C"]})]}),y("div",{className:"info-group",children:[y("div",{className:"info-label",children:"SoC Temp"}),y("div",{className:D("socTemp",t.cpu.socSensorTemperature),children:[t.cpu.socSensorTemperature.toFixed(1),"Â°C"]})]})]})]})]})};let cr=null;const jh=({isDarkMode:i,showPanel:t,onClose:n})=>{const[s,o]=oe(null),[u,f]=oe(null),[h,p]=oe(!0),g=gt(null),b=async()=>{if(cr){o(cr),p(!1);return}try{const T=await Ne.getSystemInfo();cr=T,o(T),f(null),clearTimeout(g.current)}catch(T){console.error("System bilgisi alÄ±namadÄ±:",T),f("Failed to load system information"),t&&(g.current=setTimeout(()=>{p(!0),b()},5e3))}finally{p(!1)}};je(()=>(t&&!cr?b():t&&cr&&(o(cr),p(!1)),()=>{g.current&&clearTimeout(g.current)}),[t]);const _=T=>{if(!T)return"Unknown";const D=Math.floor(Date.now()/1e3)-T,O=D%60,N=Math.floor(D/60)%60,E=Math.floor(D/3600)%24,I=Math.floor(D/86400);return I>0?`${I}d ${E}h ${N}m ${O}s`:E>0?`${E}h ${N}m ${O}s`:N>0?`${N}m ${O}s`:`${O}s`};return t?y("div",{className:`system-details-overlay ${i?"dark":""}`,children:y("div",{className:"system-details-panel",children:[y("div",{className:"system-details-header",children:[y("span",{children:"System Information"}),y("button",{onClick:n,children:"Ã—"})]}),h?y("div",{className:"system-details-loading",children:"Loading system information..."}):u?y("div",{className:"system-details-error",children:[u,y("button",{className:"retry-button",onClick:()=>{p(!0),b()},children:"Try Again"})]}):s&&y("div",{className:"system-details-content",children:[y("div",{className:"detail-group",children:[y("h3",{children:"Hardware Information"}),y("div",{className:"detail-item",children:[y("span",{children:"Model Name:"}),y("span",{children:s.modelName})]}),y("div",{className:"detail-item",children:[y("span",{children:"Serial Number:"}),y("span",{children:s.serialNumber})]}),y("div",{className:"detail-item",children:[y("span",{children:"Hardware Model:"}),y("span",{children:s.hw_model})]}),y("div",{className:"detail-item",children:[y("span",{children:"Architecture:"}),y("span",{children:s.hw_machine})]})]}),y("div",{className:"detail-group",children:[y("h3",{children:"Software Information"}),y("div",{className:"detail-item",children:[y("span",{children:"Operating System:"}),y("span",{children:s.ostype})]}),y("div",{className:"detail-item",children:[y("span",{children:"SDK Version:"}),y("span",{children:s.sdk_version})]}),y("div",{className:"detail-item",children:[y("span",{children:"PS4 SDK:"}),y("span",{children:s.ps4_sdk_version})]}),y("div",{className:"detail-item",children:[y("span",{children:"Kernel Version:"}),y("span",{children:s.kernel_version})]}),y("div",{className:"detail-item",children:[y("span",{children:"Update Version:"}),y("span",{children:s.upd_version})]}),y("div",{className:"detail-item",children:[y("span",{children:"System Uptime:"}),y("span",{children:_(s.kernel_boot_time)})]})]})]})]})}):null},rm=({isDarkMode:i})=>{const[t,n]=oe([]),[s,o]=oe(!0),[u,f]=oe(null),[h,p]=oe(null),[g,b]=oe(null),_=["NPXS40032","NPXS40037","NPXS40047","NPXS40053","NPXS40054","NPXS40056","NPXS40063","NPXS40071","NPXS40139","NPXS40144","NPXS40145","NPXS40148","NPXS40149","NPXS40150"];je(()=>{(async()=>{try{const N=(await Ne.getAppList()).filter(E=>!_.includes(E.titleId)).sort((E,I)=>I.size-E.size);n(N),f(null)}catch(O){console.error("Apps yÃ¼klenemedi:",O),f("Failed to load applications")}finally{o(!1)}})()},[]);const T=D=>{p(D)},L=async D=>{try{const O=await Ne.runApp(D);b(O),setTimeout(()=>{b(null)},3e3)}catch{b({success:!1,message:"Error running application"})}};return y("div",{className:`applications ${i?"dark":""}`,children:s?y("div",{className:"applications-loading",children:"Loading applications..."}):u?y("div",{className:"applications-error",children:u}):y(Pt,{children:[y("div",{className:"app-grid",children:t.map(D=>y("div",{className:"app-item",onClick:()=>T(D),children:[y("div",{className:"app-icon",children:y("img",{src:Ne.getTitleImageUrl(D.titleId),alt:D.titleName,onError:O=>{O.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg"/>',O.target.style.background="#2c3e50"}})}),y("div",{className:"app-name",children:D.titleName}),D.size!=0&&y("div",{className:"app-size",children:Ne.formatBytes(D.size)})]},D.titleId))}),h&&y("div",{className:"app-details-overlay",onClick:()=>p(null),children:y("div",{className:"app-details",onClick:D=>D.stopPropagation(),children:[y("div",{className:"app-details-header",children:[y("h2",{children:h.titleName}),y("button",{onClick:()=>p(null),children:"Ã—"})]}),y("div",{className:"app-details-content",children:[y("div",{className:"app-details-icon",children:y("img",{src:Ne.getTitleImageUrl(h.titleId),alt:h.titleName,onError:D=>{D.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg"/>',D.target.style.background="#2c3e50"}})}),y("div",{className:"app-details-info",children:[y("div",{className:"detail-row",children:[y("span",{children:"Title ID:"}),y("span",{children:h.titleId})]}),h.size!=0&&y("div",{className:"detail-row",children:[y("span",{children:"Size:"}),y("span",{children:Ne.formatBytes(h.size)})]}),h.installTime!=null&&y("div",{className:"detail-row",children:[y("span",{children:"Install Date:"}),y("span",{children:new Date(h.installTime).toLocaleString()})]}),y("div",{className:"detail-actions",children:[y("button",{className:`run-button ${g?g.success?"success":"error":""}`,onClick:()=>L(h.titleId),children:"Run Application"}),g&&y("div",{className:`status-message ${g.success?"success":"error"}`,children:g.message})]})]})]})]})})]})})},sm=({message:i,type:t="info",duration:n=3e3,onClose:s})=>{const[o,u]=oe(!0);return je(()=>{const f=setTimeout(()=>{u(!1),setTimeout(()=>{s&&s()},300)},n);return()=>clearTimeout(f)},[n,s]),y("div",{className:`toast ${t} ${o?"visible":"hidden"}`,children:[y("div",{className:"toast-icon",children:[t==="success"&&"âœ“",t==="error"&&"âœ—",t==="warning"&&"âš ",t==="info"&&"â„¹"]}),y("div",{className:"toast-message",children:i}),y("button",{className:"toast-close",onClick:()=>u(!1),children:"Ã—"})]})};class tn{static init(){this.container||(this.container=document.createElement("div"),this.container.className="toast-container",document.body.appendChild(this.container),this.render())}static show(t,n="info",s=3e3){this.init();const o=this.nextId++;return this.toasts.push({id:o,message:t,type:n,duration:s}),this.render(),o}static success(t,n=3e3){return this.show(t,"success",n)}static error(t,n=3e3){return this.show(t,"error",n)}static warning(t,n=3e3){return this.show(t,"warning",n)}static info(t,n=3e3){return this.show(t,"info",n)}static dismiss(t){this.toasts=this.toasts.filter(n=>n.id!==t),this.render()}static render(){if(!this.container)return;document.body.classList.contains("dark")||document.documentElement.classList.contains("dark")||localStorage.getItem("theme")==="dark"?this.container.classList.add("dark"):this.container.classList.remove("dark"),Fi(y("div",{children:this.toasts.map(n=>y(sm,{message:n.message,type:n.type,duration:n.duration,onClose:()=>this.dismiss(n.id)},n.id))}),this.container)}}Ce(tn,"container",null),Ce(tn,"toasts",[]),Ce(tn,"nextId",1);const om=({contextMenu:i,setContextMenu:t,isDarkMode:n=!0,onOpenWindow:s})=>{const[o,u]=oe("/"),[f,h]=oe(["/"]),[p,g]=oe(0),[b,_]=oe([]),[T,L]=oe(!0),[D,O]=oe(null),[N,E]=oe({isSelecting:!1,start:{x:0,y:0},end:{x:0,y:0}}),[I,j]=oe(new Set),[K,X]=oe(!1),[V,G]=oe({id:null,time:0}),[ee,de]=oe(-1),[he,se]=oe(!1),[le,R]=oe(""),[F,S]=oe(null),[me,Me]=oe(null),[$e,qe]=oe(null),[Ve,we]=oe(new Set),ke=gt(null),Te=async B=>{try{L(!0),O(null);const Y=await Ne.listFiles(B);_(Y)}catch(Y){console.error("Failed to load files:",Y),O("Failed to load files")}finally{L(!1)}};je(()=>{Te(o)},[o]),je(()=>{const B=b.filter(Y=>Ee(Y.name)).map(Y=>Y.id);we(new Set(B))},[b]);const Ae=B=>{const Y=B.target instanceof HTMLInputElement?B.target.value:"";u(Y)},U=B=>{B.key==="Enter"&&Z(o)},Z=async B=>{const Y=B.endsWith("/")?B:B+"/";if(t({...i,show:!1}),Y!==f[p]){const be=f.slice(0,p+1);h([...be,Y]),g(be.length)}u(Y)},te=()=>{p>0&&(g(p-1),u(f[p-1]))},_e=()=>{p<f.length-1&&(g(p+1),u(f[p+1]))},Fe=()=>{const B=o.split("/").slice(0,-2).join("/")+"/";B!==o&&Z(B)};je(()=>{const B=Y=>{var be;if(!(!((be=ke.current)!=null&&be.contains(document.activeElement))||document.activeElement.tagName==="INPUT"||document.activeElement.tagName==="TEXTAREA"))switch(Y.key){case"Tab":Y.preventDefault(),de(ne=>{const Ge=Y.shiftKey?ne<=0?b.length-1:ne-1:ne>=b.length-1?0:ne+1;j(new Set([b[Ge].id]));const Be=ke.current.querySelector(`[data-id="${b[Ge].id}"]`);return Be==null||Be.scrollIntoView({block:"nearest"}),Ge});break;case"Enter":if(ee>=0){const ne=b[ee];re(ne)}break}};return window.addEventListener("keydown",B),()=>window.removeEventListener("keydown",B)},[b,ee]),je(()=>{const B=be=>{if(N.isSelecting){const ne=ke.current.getBoundingClientRect();let Ge=be.clientX-ne.left,Be=be.clientY-ne.top;Ge=Math.max(0,Math.min(Ge,ne.width)),Be=Math.max(0,Math.min(Be,ne.height)),E(Pe=>({...Pe,end:{x:Ge,y:Be}})),He(Ge,Be,be.ctrlKey)}},Y=()=>{N.isSelecting&&E(be=>({...be,isSelecting:!1}))};return N.isSelecting&&(document.addEventListener("mousemove",B),document.addEventListener("mouseup",Y)),()=>{document.removeEventListener("mousemove",B),document.removeEventListener("mouseup",Y)}},[N.isSelecting]);const $t=B=>{if(!B.target.closest(".context-menu")&&(B.preventDefault(),!B.target.closest(".file-item")&&!(B.target.classList.contains("file-grid")&&B.clientX>=B.target.getBoundingClientRect().right-20)&&(t({...i,show:!1}),B.button===0))){const Y=ke.current.getBoundingClientRect(),be=B.clientX-Y.left,ne=B.clientY-Y.top;E({isSelecting:!0,start:{x:be,y:ne},end:{x:be,y:ne}}),!B.ctrlKey&&!B.target.closest(".file-item")&&j(new Set),X(!1)}},He=(B,Y,be)=>{const ne=ke.current.getBoundingClientRect();B=Math.max(0,Math.min(B,ne.width)),Y=Math.max(0,Math.min(Y,ne.height));const Ge={left:Math.min(N.start.x,B),right:Math.max(N.start.x,B),top:Math.min(N.start.y,Y),bottom:Math.max(N.start.y,Y)},Be=ke.current.getElementsByClassName("file-item"),Pe=new Set(be?I:[]);Array.from(Be).forEach(ot=>{const Yt=ot.getBoundingClientRect(),et={left:Yt.left-ne.left,right:Yt.right-ne.left,top:Yt.top-ne.top,bottom:Yt.bottom-ne.top};if(!(et.right<Ge.left||et.left>Ge.right||et.bottom<Ge.top||et.top>Ge.bottom)){const rn=ot.getAttribute("data-id");rn&&Pe.add(rn)}}),j(Pe)},at=B=>{if(N.isSelecting){const Y=ke.current.getBoundingClientRect(),be=B.clientX-Y.left,ne=B.clientY-Y.top,Ge=Math.abs(N.end.x-N.start.x),Be=Math.abs(N.end.y-N.start.y);(Ge>=5||Be>=5)&&He(be,ne,B.ctrlKey)}E(Y=>({...Y,isSelecting:!1})),setTimeout(()=>X(!1),0)},Ft=(B,Y)=>{if(B.stopPropagation(),!K){const be=new Date().getTime();if(V.id===Y.id&&be-V.time<300){re(Y),G({id:null,time:0});return}if(G({id:Y.id,time:be}),t({...i,show:!1}),B.ctrlKey||B.metaKey){const ne=new Set(I);I.has(Y.id)?ne.delete(Y.id):ne.add(Y.id),j(ne)}else if(B.shiftKey&&I.size>0){const ne=Array.from(I)[I.size-1],Ge=b.findIndex(et=>et.id===ne),Be=b.findIndex(et=>et.id===Y.id),Pe=Math.min(Ge,Be),ot=Math.max(Ge,Be),Yt=new Set(I);for(let et=Pe;et<=ot;et++)Yt.add(b[et].id);j(Yt)}else j(new Set([Y.id]))}},re=B=>{if(B.isDirectory){t({...i,show:!1});const Y=o+B.name+"/";Z(Y)}else ze(B.name)?Ie(B):Ee(B.name)?Ze(B):console.log("Open File:",B.name)},fe=B=>{if(!B)return!1;const Y=[".mp3",".wav",".ogg",".flac",".aac",".m4a"],be=B.toLowerCase();return Y.some(ne=>be.endsWith(ne))},De=B=>{if(!B)return!1;const Y=[".mp4",".webm",".mkv",".avi",".mov",".wmv",".mpg",".mpeg",".m4v"],be=B.toLowerCase();return Y.some(ne=>be.endsWith(ne))},Ee=B=>{if(!B)return!1;const Y=[".jpg",".jpeg",".png",".gif",".bmp",".webp",".svg",".ico"],be=B.toLowerCase();return Y.some(ne=>be.endsWith(ne))},ze=B=>fe(B)||De(B),Ie=B=>{s&&s({app:"mediaPlayer",title:`Media Player - ${B.name}`,props:{mediaFile:B,currentPath:o}})},Ze=B=>{s&&s({app:"imageViewer",title:`Image Viewer - ${B.name}`,props:{imageFile:B,currentPath:o}})},Ke=(B,Y)=>{N.isSelecting||(B.preventDefault(),I.has(Y.id)||j(new Set([Y.id])),t({show:!0,x:B.pageX,y:B.pageY,item:Y,isBackground:!1}))},wt=B=>{const Y=Array.from(I).map(ne=>{const Ge=b.find(Be=>Be.id===ne);return o+Ge.name}),be=Y.length>0?Y:[o+B.name];try{Ne.downloadFiles(be)}catch(ne){console.error("Download failed:",ne)}t({...i,show:!1})},Ht=B=>{const Y=Array.from(I).map(Ge=>b.find(Be=>Be.id===Ge)),be=Y.map(Ge=>`â€¢ ${Ge.name}`).join(`
`),ne=Y.length>1?`Are you sure you want to delete these ${Y.length} items?

${be}`:`Are you sure you want to delete "${B.name}"?`;if(window.confirm(ne)){const Ge=b.filter(Be=>!I.has(Be.id));_(Ge),j(new Set),console.log("Deleted items:",Y.map(Be=>Be.name))}t({...i,show:!1})},Fn=B=>{if(B.preventDefault(),B.target.classList.contains("file-manager")||B.target.classList.contains("file-grid"))if(I.size>0){const Y=b.find(be=>be.id===Array.from(I)[0]);t({show:!0,x:B.pageX,y:B.pageY,isBackground:!1,item:Y})}else t({show:!0,x:B.pageX,y:B.pageY,isBackground:!0,item:null})},vn=B=>{B.preventDefault(),B.dataTransfer.dropEffect="copy"},un=async B=>{B.preventDefault();const Y=Array.from(B.dataTransfer.files);if(Y.length>0){Me(0),qe(null);try{for(const be of Y)await Ne.uploadFile(o+be.name,be,ne=>{Me(ne)});Me(100),setTimeout(()=>Me(null),3e3),Te(o)}catch(be){console.error("Upload failed:",be),qe(be.message)}}},C=B=>{S(B.id),R(B.name),se(!0),t({...i,show:!1})},W=async B=>{try{le&&le!==B.name&&(await Ne.renameFile(o+B.name,le),Te(o))}catch(Y){console.error("Rename failed:",Y)}finally{se(!1),S(null)}},$=async B=>{try{const Y=await Ne.executePayload(o+B.name);Y.success?tn.success("Payload executed successfully"):tn.error(Y.message||"Failed to execute payload")}catch(Y){console.error("Execute payload failed:",Y),tn.error("Network error while executing payload")}t({...i,show:!1})},Q=async B=>{try{const Y=Array.from(I).map(ne=>b.find(Be=>Be.id===ne)).filter(ne=>ne&&ne.name.toLowerCase().endsWith(".pkg")).map(ne=>o+ne.name);if(Y.length===0&&B.name.toLowerCase().endsWith(".pkg")&&Y.push(o+B.name),Y.length===0){tn.error("No PKG files selected for installation");return}let be=0;for(const ne of Y)await Ne.installPackageFromUrl(ne),be++;be===1?tn.success("Package installation started"):tn.success(`Installation of ${be} packages started`)}catch(Y){console.error("Package installation failed:",Y),tn.error(Y.message||"Failed to install package")}t({...i,show:!1})};return y("div",{ref:ke,className:`file-manager ${n?"dark":""}`,onMouseDown:$t,onMouseUp:at,onContextMenu:Fn,onDragOver:vn,onDrop:un,children:[y("div",{className:"path-navigation",children:[y("div",{className:"path-buttons",children:[y("button",{onClick:te,disabled:p<=0,title:"Back",children:"â—€"}),y("button",{onClick:_e,disabled:p>=f.length-1,title:"Forward",children:"â–¶"}),y("button",{onClick:Fe,disabled:o==="/",title:"Parent Directory",children:"â–²"})]}),y("input",{type:"text",className:"path-input",value:o,onChange:Ae,onKeyDown:U})]}),y("div",{className:"file-grid",onScroll:()=>{N.isSelecting&&E(B=>({...B,isSelecting:!1}))},children:T?y("div",{className:"loading",children:"Loading files..."}):D?y("div",{className:"error",children:D}):b.length===0?y("div",{className:"empty",children:"No files found"}):b.map((B,Y)=>y("div",{"data-id":String(B.id),className:`file-item ${I.has(B.id)?"selected":""} ${Y===ee?"focused":""}`,tabIndex:0,onClick:be=>Ft(be,B),onContextMenu:be=>Ke(be,B),onFocus:()=>{de(Y),I.has(B.id)||j(new Set([B.id]))},children:[y("div",{className:"file-icon icon",children:Ee(B.name)?y("div",{className:"image-thumbnail",children:[Ve.has(B.id)&&y("div",{className:"image-loading-spinner",children:y("div",{className:"spinner"})}),y("img",{src:Ne.getStreamUrl(o+B.name),alt:B.name,loading:"lazy",onLoad:()=>{we(be=>{const ne=new Set(be);return ne.delete(B.id),ne})},style:{opacity:Ve.has(B.id)?0:1},onError:()=>{we(be=>{const ne=new Set(be);return ne.delete(B.id),ne})}})]}):em.getFileIcon(B.type,B.name)}),he&&F===B.id?y("input",{type:"text",className:"rename-input",value:le,onChange:be=>R(be.target.value),onBlur:()=>W(B),onKeyDown:be=>{be.key==="Enter"?W(B):be.key==="Escape"&&(se(!1),S(null))},autoFocus:!0}):y("div",{className:"file-name",children:B.name})]},B.id))}),me!==null&&y("div",{className:"upload-progress",children:["Uploading: ",Math.round(me),"%",y("div",{className:"upload-progress-bar",children:y("div",{className:"upload-progress-bar-fill",style:{width:`${me}%`}})})]}),$e&&y("div",{className:"upload-error",children:$e}),N.isSelecting&&y("div",{className:"selection-box",style:{left:`${Math.min(N.start.x,N.end.x)}px`,top:`${Math.min(N.start.y,N.end.y)}px`,width:`${Math.abs(N.end.x-N.start.x)}px`,height:`${Math.abs(N.end.y-N.start.y)}px`}}),i.show&&y("div",{className:`context-menu ${n?"dark":""}`,style:{left:`${i.x}px`,top:`${i.y}px`},children:[!i.isBackground&&i.item&&i.item.name&&i.item.name.toLowerCase().endsWith(".pkg")&&y(Pt,{children:[y("div",{className:"context-menu-item install",onClick:()=>Q(i.item),children:"Install Package"}),y("div",{className:"context-menu-separator"})]}),!i.isBackground&&i.item&&i.item.name&&(i.item.name.endsWith(".elf")||i.item.name.endsWith(".bin"))&&y(Pt,{children:[y("div",{className:"context-menu-separator"}),y("div",{className:"context-menu-item execute",onClick:()=>$(i.item),children:"Execute Payload"})]}),i.isBackground?y("div",{className:"context-menu-item create-folder",children:"Create Folder"}):y(Pt,{children:[y("div",{className:"context-menu-item download",onClick:()=>wt(i.item),children:"Download"}),y("div",{className:"context-menu-item rename",onClick:()=>C(i.item),children:"Rename"}),y("div",{className:"context-menu-separator"}),y("div",{className:"context-menu-item delete",onClick:()=>Ht(i.item),children:"Delete"})]})]})]})},am=({isDarkMode:i})=>{const[t,n]=oe([]),[s,o]=oe({}),[u,f]=oe(!0),[h,p]=oe(null),[g,b]=oe("all"),[_,T]=oe("all"),[L,D]=oe("date-desc"),[O,N]=oe(null),[E,I]=oe(!1);je(()=>{j()},[]);const j=async()=>{try{f(!0),p(null);const F=await Ne.getMediaList(),S=F.entries.map(me=>{const Me=me.filePath.toLowerCase().endsWith(".mp4"),$e=K(me.filePath),qe=me.ext&&me.ext.trophy,Ve=me.meta&&me.meta.appVerTitleId;let we=null;return me.meta&&me.meta.segmentInfo&&me.meta.segmentInfo.mediaTime&&me.meta.segmentInfo.mediaTime.length>0&&me.meta.segmentInfo.mediaTime[0].length>1&&(we=me.meta.segmentInfo.mediaTime[0][1]),{...me,isVideo:Me,isJxr:$e,hasTrophy:qe,titleId:Ve,duration:we,date:me.meta&&me.meta.segmentInfo?new Date(me.meta.segmentInfo.start):new Date(0)}});n(S),o(F.titles||{})}catch(F){console.error("Failed to load media list:",F),p("Failed to load media list"),tn.error("Failed to load media list")}finally{f(!1)}},K=F=>{if(!F)return!1;const S=F.toLowerCase();return S.endsWith(".jxr")||S.endsWith(".wdp")||S.endsWith(".hdp")},X=F=>{try{const S=Ne.getMediaUrl(F.filePath+"?download=true"),me=document.createElement("a");me.href=S,me.download=F.filePath.split("/").pop(),document.body.appendChild(me),me.click(),document.body.removeChild(me),tn.success("Download started")}catch(S){console.error("Download failed:",S),tn.error("Download failed")}},V=F=>{N(F),I(!0)},G=()=>{I(!1),N(null)},ee=F=>F?s[F]||"Deleted Games and Apps":"Unknown",de=()=>{let F=[...t];return g==="images"?F=F.filter(S=>!S.isVideo):g==="videos"?F=F.filter(S=>S.isVideo):g==="trophies"&&(F=F.filter(S=>S.hasTrophy)),_!=="all"&&(F=F.filter(S=>S.titleId===_)),L==="date-desc"?F.sort((S,me)=>me.date-S.date):L==="date-asc"&&F.sort((S,me)=>S.date-me.date),F},he=()=>{const F=new Set;return t.forEach(S=>{S.titleId&&F.add(S.titleId)}),Array.from(F)},se=de(),le=he(),R=F=>{if(!F)return"";const S=Math.floor(F/1e3),me=Math.floor(S/3600),Me=Math.floor(S%3600/60),$e=S%60;return me>0?`${me.toString().padStart(2,"0")}:${Me.toString().padStart(2,"0")}:${$e.toString().padStart(2,"0")}`:`${Me.toString().padStart(2,"0")}:${$e.toString().padStart(2,"0")}`};return y("div",{className:`media-gallery ${i?"dark":""}`,children:[y("div",{className:"media-toolbar",children:[y("div",{className:"filter-group",children:[y("label",{children:"Filter:"}),y("select",{value:g,onChange:F=>b(F.target.value),className:"filter-select",children:[y("option",{value:"all",children:"All Media"}),y("option",{value:"images",children:"Images Only"}),y("option",{value:"videos",children:"Videos Only"}),y("option",{value:"trophies",children:"Trophy Media"})]})]}),y("div",{className:"filter-group",children:[y("label",{children:"Game:"}),y("select",{value:_,onChange:F=>T(F.target.value),className:"filter-select",children:[y("option",{value:"all",children:"All Games"}),le.map(F=>y("option",{value:F,children:ee(F)},F))]})]}),y("div",{className:"filter-group",children:[y("label",{children:"Sort:"}),y("select",{value:L,onChange:F=>D(F.target.value),className:"filter-select",children:[y("option",{value:"date-desc",children:"Newest First"}),y("option",{value:"date-asc",children:"Oldest First"})]})]}),y("button",{className:"refresh-button icon",onClick:j,disabled:u,children:"ðŸ”„"})]}),y("div",{className:"media-content",children:u?y("div",{className:"media-loading",children:"Loading media..."}):h?y("div",{className:"media-error",children:h}):se.length===0?y("div",{className:"media-empty",children:"No media found"}):y("div",{className:"media-grid",children:se.map((F,S)=>y("div",{className:"media-item",onClick:()=>V(F),children:[y("div",{className:"media-thumbnail",children:[F.isVideo&&y("div",{className:"video-indicator",children:"â–¶"}),F.isJxr?y("div",{className:"jxr-thumbnail",children:y("div",{className:"jxr-thumbnail-content",children:[y("div",{className:"jxr-thumbnail-icon",children:"HDR"}),y("div",{className:"jxr-thumbnail-text",children:"HDR Content"})]})}):y("img",{src:Ne.getMediaThumbnailUrl(F.filePath),alt:"Media thumbnail",loading:"lazy"}),F.hasTrophy&&y("div",{className:"trophy-badge icon",title:"Trophy Earned",children:"ðŸ†"})]}),y("div",{className:"media-info",children:[y("div",{className:"media-title",title:ee(F.titleId),children:ee(F.titleId)}),y("div",{className:"media-details",children:[y("div",{className:"media-date",children:F.date.toLocaleDateString()}),F.isVideo&&F.duration&&y("div",{className:"media-duration",children:R(F.duration)})]})]})]},S))})}),E&&O&&y("div",{className:"media-viewer-overlay",onClick:G,children:y("div",{className:"media-viewer",onClick:F=>F.stopPropagation(),children:[y("div",{className:"viewer-header",children:[y("div",{className:"viewer-title",children:[ee(O.titleId),O.hasTrophy&&y("span",{className:"viewer-trophy",children:"ðŸ†"}),O.isJxr&&y("span",{className:"viewer-hdr",children:"HDR"})]}),y("div",{className:"viewer-actions",children:[y("button",{className:"download-button icon",onClick:()=>X(O),title:"Download",children:"â¬‡ï¸"}),y("button",{className:"close-button",onClick:G,title:"Close",children:"âœ–"})]})]}),y("div",{className:"viewer-content",children:O.isVideo?y("video",{src:Ne.getMediaUrl(O.filePath),controls:!0,autoPlay:!0}):O.isJxr?y("div",{className:"hdr-content-container",children:y("div",{className:"hdr-content-message",children:[y("div",{className:"hdr-icon",children:"HDR"}),y("div",{className:"hdr-text",children:"HDR Content cannot be previewed."})]})}):y("img",{src:Ne.getMediaUrl(O.filePath),alt:"Media content"})}),y("div",{className:"viewer-footer",children:[y("div",{className:"media-date",children:O.date.toLocaleString()}),O.isVideo&&O.duration&&y("div",{className:"media-duration viewer-duration",children:R(O.duration)})]})]})})]})},lm=({mediaFile:i,currentPath:t,onClose:n})=>{const[s,o]=oe(!0),u=b(i==null?void 0:i.name),f=gt(null),h=gt(null),p=gt(null),g=gt("");je(()=>{if(!i||!t)return;o(!0),p.current||(p.current=new AbortController);const T=Ne.getStreamUrl(t+i.name),L=T.includes("?")?"&":"?";return g.current=`${T}${L}t=${Date.now()}`,()=>{p.current&&(p.current.abort(),p.current=null),f.current&&(f.current.pause(),f.current.src="",f.current.load()),h.current&&(h.current.pause(),h.current.src="",h.current.load())}},[i,t]);function b(T){if(!T)return!1;const L=[".mp3",".wav",".ogg",".flac",".aac",".m4a"],D=T.toLowerCase();return L.some(O=>D.endsWith(O))}return y("div",{className:"media-player",children:[y("div",{className:"download-button-container",children:y("button",{className:"download-button-media",onClick:()=>{if(i){const T=t+i.name;Ne.downloadFiles([T])}},title:"Ä°ndir",children:y("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[y("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),y("polyline",{points:"7 10 12 15 17 10"}),y("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]})})}),y("div",{className:"media-player-content",children:[u?y("div",{className:"audio-player-wrapper",children:[y("div",{className:"audio-visualization",children:[y("div",{className:"audio-icon",children:y("svg",{xmlns:"http://www.w3.org/2000/svg",width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round",children:[y("circle",{cx:"12",cy:"12",r:"10"}),y("circle",{cx:"12",cy:"12",r:"3"}),y("line",{x1:"12",y1:"2",x2:"12",y2:"4"}),y("line",{x1:"12",y1:"20",x2:"12",y2:"22"}),y("line",{x1:"4",y1:"12",x2:"2",y2:"12"}),y("line",{x1:"22",y1:"12",x2:"20",y2:"12"}),y("line",{x1:"6.34",y1:"6.34",x2:"4.93",y2:"4.93"}),y("line",{x1:"19.07",y1:"4.93",x2:"17.66",y2:"6.34"}),y("line",{x1:"17.66",y1:"17.66",x2:"19.07",y2:"19.07"}),y("line",{x1:"4.93",y1:"19.07",x2:"6.34",y2:"17.66"})]})}),y("div",{className:"audio-title-large",children:i==null?void 0:i.name})]}),i&&y("audio",{ref:f,src:g.current,controls:!0,autoPlay:!0,className:"audio-player-element",onLoadStart:()=>o(!0),onLoadedData:()=>o(!1),onError:()=>o(!1)})]}):y("div",{className:"video-container",children:i&&y("video",{ref:h,src:g.current,controls:!0,autoPlay:!0,onLoadStart:()=>o(!0),onLoadedData:()=>o(!1),onError:()=>o(!1)})}),s&&y("div",{className:"media-loading",children:[y("div",{className:"media-spinner"}),y("div",{className:"media-loading-text",children:"Loading..."})]})]})]})},cm=({imageFile:i,currentPath:t,onClose:n})=>{const[s,o]=oe(!0),u=gt(null),f=gt(null),h=gt("");return je(()=>{if(!i||!t)return;o(!0),f.current||(f.current=new AbortController);const g=Ne.getStreamUrl(t+i.name),b=g.includes("?")?"&":"?";return h.current=`${g}${b}t=${Date.now()}`,()=>{f.current&&(f.current.abort(),f.current=null)}},[i,t]),je(()=>{const g=u.current;if(!g)return;const b=()=>{console.log("Image loaded"),o(!1)},_=()=>{console.log("Image error"),o(!1)};return g.addEventListener("load",b),g.addEventListener("error",_),()=>{g.removeEventListener("load",b),g.removeEventListener("error",_)}},[u.current,i]),y("div",{className:"image-viewer",children:y("div",{className:"image-viewer-content",children:[y("button",{className:"download-button floating",onClick:()=>{if(i){const g=t+i.name;Ne.downloadFiles([g])}},title:"Ä°ndir",children:y("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[y("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),y("polyline",{points:"7 10 12 15 17 10"}),y("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]})}),s&&y("div",{className:"image-loading",children:[y("div",{className:"image-spinner"}),y("div",{className:"image-loading-text",children:"Image is loading..."})]}),i&&y("img",{ref:u,src:h.current,alt:i==null?void 0:i.name,className:"image-viewer-img"})]})})},um=({isDarkMode:i})=>{const[t,n]=oe([]),[s,o]=oe(!0),[u,f]=oe(null),[h,p]=oe(new Set),[g,b]=oe(!1),[_,T]=oe(null),[L,D]=oe({key:"pid",direction:"asc"}),[O,N]=oe(0);je(()=>{const V=setInterval(()=>{N(G=>G+1)},1e3);return()=>clearInterval(V)},[]),je(()=>{const V=async()=>{try{const ee=await Ne.getProcessList();if(!Array.isArray(ee))throw new Error("Invalid data format");const de=t.reduce((le,R)=>(le[R.pid]=R,le),{}),he=new Set,se=ee.map(le=>{const R=de[le.pid];return R&&(R.rssize!==le.rssize&&he.add(`memory-${le.pid}`),R.stat!==le.stat&&he.add(`stat-${le.pid}`)),delete de[le.pid],le});p(he),setTimeout(()=>p(new Set),1e3),n(se),f(null),b(!1),T(new Date)}catch(ee){console.error("Failed to fetch processes:",ee),t.length===0?f("Failed to load process list"):b(!0)}finally{o(!1)}};V();const G=setInterval(V,5e3);return()=>clearInterval(G)},[]);const E=V=>{let G="asc";L.key===V&&L.direction==="asc"&&(G="desc"),D({key:V,direction:G})},I=()=>{const V=[...t];return V.sort((G,ee)=>{let de=G[L.key],he=ee[L.key];return L.key==="rssize"&&(de=G.rssize*G.pageSize,he=ee.rssize*ee.pageSize),de<he?L.direction==="asc"?-1:1:de>he?L.direction==="asc"?1:-1:0}),V},j=V=>`${(V*16384/(1024*1024)).toFixed(1)} MB`,K=V=>{if(!V)return"--:--:--";const ee=Math.floor(Date.now()/1e3)-V,de=Math.floor(ee/3600),he=Math.floor(ee%3600/60),se=ee%60,le=R=>String(R).padStart(2,"0");return`${le(de)}:${le(he)}:${le(se)}`},X=(V,G)=>{const ee=`${V}-${G}`;return h.has(ee)?"updated":""};return s&&t.length===0?y("div",{className:`process-list ${i?"dark":""}`,children:y("div",{className:"process-list-message loading",children:[y("div",{className:"loading-spinner"}),y("div",{children:"Loading process list..."})]})}):u&&t.length===0?y("div",{className:`process-list ${i?"dark":""}`,children:y("div",{className:"process-list-message error",children:u})}):t.length?y("div",{className:`process-list ${i?"dark":""}`,children:[g&&y("div",{className:"update-status error",children:[y("span",{className:"error-icon",children:"âš ï¸"}),"Last update failed",_&&y("span",{className:"last-update",children:["Last successful update: ",_.toLocaleTimeString()]})]}),y("table",{children:[y("thead",{children:y("tr",{children:[y("th",{onClick:()=>E("pid"),children:"PID"}),y("th",{onClick:()=>E("comm"),children:"Process Name"}),y("th",{onClick:()=>E("ppid"),children:"PPID"}),y("th",{onClick:()=>E("rssize"),children:"Memory"}),y("th",{onClick:()=>E("stat"),children:"Status"}),y("th",{onClick:()=>E("start"),children:"Uptime"}),y("th",{onClick:()=>E("emul"),children:"Type"}),y("th",{onClick:()=>E("titleID"),children:"Title ID"})]})}),y("tbody",{children:I().map(V=>y("tr",{children:[y("td",{children:V.pid}),y("td",{children:V.comm}),y("td",{children:V.ppid}),y("td",{className:X("memory",V.pid),children:j(V.rssize)}),y("td",{className:X("stat",V.pid),children:V.stat}),y("td",{children:K(V.start)}),y("td",{children:V.emul}),y("td",{children:V.titleID||"-"})]},V.pid))})]})]}):y("div",{className:`process-list ${i?"dark":""}`,children:y("div",{className:"process-list-message",children:"No processes found"})})},fm=({isDarkMode:i})=>{const[t,n]=oe([]),[s,o]=oe(!0),[u,f]=oe(null),[h,p]=oe(null);je(()=>{(async()=>{try{const T=await Ne.getProfileList();n(T),f(null)}catch(T){console.error("Profiles yÃ¼klenemedi:",T),f("Failed to load profiles")}finally{o(!1)}})()},[]);const g=_=>{p(_)},b=async(_=null)=>{try{await Ne.downloadBackup(_)}catch(T){console.error("Backup failed:",T)}};return y("div",{className:`profiles ${i?"dark":""}`,children:s?y("div",{className:"profiles-loading",children:"Loading profiles..."}):u?y("div",{className:"profiles-error",children:u}):y(Pt,{children:[y("div",{className:"profiles-header",children:[y("h2",{children:"User Profiles"}),y("button",{className:"backup-all-button",onClick:()=>b(),children:[y("span",{className:"icon",children:"ðŸ’¾"}),"Save All Profile Backup Files"]})]}),y("div",{className:"profile-grid",children:t.map(_=>y("div",{className:"profile-item",onClick:()=>g(_),children:[y("div",{className:"profile-icon",children:y("img",{src:Ne.getProfileImageUrl(_.profileId),alt:_.username,onError:T=>{T.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg"/>',T.target.style.background="#2c3e50"}})}),y("div",{className:"profile-name",children:_.username})]},_.profileId))}),h&&y("div",{className:"profile-details-overlay",onClick:()=>p(null),children:y("div",{className:"profile-details",onClick:_=>_.stopPropagation(),children:[y("div",{className:"profile-details-header",children:[y("h2",{children:h.username}),y("button",{onClick:()=>p(null),children:"Ã—"})]}),y("div",{className:"profile-details-content",children:[y("div",{className:"profile-details-icon",children:y("img",{src:Ne.getProfileImageUrl(h.profileId),alt:h.username,onError:_=>{_.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg"/>',_.target.style.background="#2c3e50"}})}),y("div",{className:"profile-details-info",children:[y("div",{className:"detail-row",children:[y("span",{children:"Username:"}),y("span",{children:h.username})]}),y("div",{className:"detail-row",children:[y("span",{children:"Profile ID:"}),y("span",{children:h.profileId})]}),y("div",{className:"detail-actions",children:y("button",{className:"backup-button icon",onClick:()=>b(h.profileId),children:"Backup Save Files"})})]})]})]})})]})})};function hm(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Lo={exports:{}},dm=Lo.exports,Zu;function Vo(){return Zu||(Zu=1,function(i,t){(function(n,s){i.exports=s()})(dm,function(){var n=navigator.userAgent,s=navigator.platform,o=/gecko\/\d/i.test(n),u=/MSIE \d/.test(n),f=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(n),h=/Edge\/(\d+)/.exec(n),p=u||f||h,g=p&&(u?document.documentMode||6:+(h||f)[1]),b=!h&&/WebKit\//.test(n),_=b&&/Qt\/\d+\.\d+/.test(n),T=!h&&/Chrome\//.test(n),L=/Opera\//.test(n),D=/Apple Computer/.test(navigator.vendor),O=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(n),N=/PhantomJS/.test(n),E=D&&(/Mobile\/\w+/.test(n)||navigator.maxTouchPoints>2),I=/Android/.test(n),j=E||I||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(n),K=E||/Mac/.test(s),X=/\bCrOS\b/.test(n),V=/win/i.test(s),G=L&&n.match(/Version\/(\d*\.\d*)/);G&&(G=Number(G[1])),G&&G>=15&&(L=!1,b=!0);var ee=K&&(_||L&&(G==null||G<12.11)),de=o||p&&g>=9;function he(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var se=function(e,r){var l=e.className,a=he(r).exec(l);if(a){var c=l.slice(a.index+a[0].length);e.className=l.slice(0,a.index)+(c?a[1]+c:"")}};function le(e){for(var r=e.childNodes.length;r>0;--r)e.removeChild(e.firstChild);return e}function R(e,r){return le(e).appendChild(r)}function F(e,r,l,a){var c=document.createElement(e);if(l&&(c.className=l),a&&(c.style.cssText=a),typeof r=="string")c.appendChild(document.createTextNode(r));else if(r)for(var d=0;d<r.length;++d)c.appendChild(r[d]);return c}function S(e,r,l,a){var c=F(e,r,l,a);return c.setAttribute("role","presentation"),c}var me;document.createRange?me=function(e,r,l,a){var c=document.createRange();return c.setEnd(a||e,l),c.setStart(e,r),c}:me=function(e,r,l){var a=document.body.createTextRange();try{a.moveToElementText(e.parentNode)}catch{return a}return a.collapse(!0),a.moveEnd("character",l),a.moveStart("character",r),a};function Me(e,r){if(r.nodeType==3&&(r=r.parentNode),e.contains)return e.contains(r);do if(r.nodeType==11&&(r=r.host),r==e)return!0;while(r=r.parentNode)}function $e(){var e;try{e=document.activeElement}catch{e=document.body||null}for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}function qe(e,r){var l=e.className;he(r).test(l)||(e.className+=(l?" ":"")+r)}function Ve(e,r){for(var l=e.split(" "),a=0;a<l.length;a++)l[a]&&!he(l[a]).test(r)&&(r+=" "+l[a]);return r}var we=function(e){e.select()};E?we=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:p&&(we=function(e){try{e.select()}catch{}});function ke(e){var r=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,r)}}function Te(e,r,l){r||(r={});for(var a in e)e.hasOwnProperty(a)&&(l!==!1||!r.hasOwnProperty(a))&&(r[a]=e[a]);return r}function Ae(e,r,l,a,c){r==null&&(r=e.search(/[^\s\u00a0]/),r==-1&&(r=e.length));for(var d=a||0,m=c||0;;){var v=e.indexOf("	",d);if(v<0||v>=r)return m+(r-d);m+=v-d,m+=l-m%l,d=v+1}}var U=function(){this.id=null,this.f=null,this.time=0,this.handler=ke(this.onTimeout,this)};U.prototype.onTimeout=function(e){e.id=0,e.time<=+new Date?e.f():setTimeout(e.handler,e.time-+new Date)},U.prototype.set=function(e,r){this.f=r;var l=+new Date+e;(!this.id||l<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,e),this.time=l)};function Z(e,r){for(var l=0;l<e.length;++l)if(e[l]==r)return l;return-1}var te=50,_e={toString:function(){return"CodeMirror.Pass"}},Fe={scroll:!1},$t={origin:"*mouse"},He={origin:"+move"};function at(e,r,l){for(var a=0,c=0;;){var d=e.indexOf("	",a);d==-1&&(d=e.length);var m=d-a;if(d==e.length||c+m>=r)return a+Math.min(m,r-c);if(c+=d-a,c+=l-c%l,a=d+1,c>=r)return a}}var Ft=[""];function re(e){for(;Ft.length<=e;)Ft.push(fe(Ft)+" ");return Ft[e]}function fe(e){return e[e.length-1]}function De(e,r){for(var l=[],a=0;a<e.length;a++)l[a]=r(e[a],a);return l}function Ee(e,r,l){for(var a=0,c=l(r);a<e.length&&l(e[a])<=c;)a++;e.splice(a,0,r)}function ze(){}function Ie(e,r){var l;return Object.create?l=Object.create(e):(ze.prototype=e,l=new ze),r&&Te(r,l),l}var Ze=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Ke(e){return/\w/.test(e)||e>"Â€"&&(e.toUpperCase()!=e.toLowerCase()||Ze.test(e))}function wt(e,r){return r?r.source.indexOf("\\w")>-1&&Ke(e)?!0:r.test(e):Ke(e)}function Ht(e){for(var r in e)if(e.hasOwnProperty(r)&&e[r])return!1;return!0}var Fn=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function vn(e){return e.charCodeAt(0)>=768&&Fn.test(e)}function un(e,r,l){for(;(l<0?r>0:r<e.length)&&vn(e.charAt(r));)r+=l;return r}function C(e,r,l){for(var a=r>l?-1:1;;){if(r==l)return r;var c=(r+l)/2,d=a<0?Math.ceil(c):Math.floor(c);if(d==r)return e(d)?r:l;e(d)?l=d:r=d+a}}function W(e,r,l,a){if(!e)return a(r,l,"ltr",0);for(var c=!1,d=0;d<e.length;++d){var m=e[d];(m.from<l&&m.to>r||r==l&&m.to==r)&&(a(Math.max(m.from,r),Math.min(m.to,l),m.level==1?"rtl":"ltr",d),c=!0)}c||a(r,l,"ltr")}var $=null;function Q(e,r,l){var a;$=null;for(var c=0;c<e.length;++c){var d=e[c];if(d.from<r&&d.to>r)return c;d.to==r&&(d.from!=d.to&&l=="before"?a=c:$=c),d.from==r&&(d.from!=d.to&&l!="before"?a=c:$=c)}return a??$}var B=function(){var e="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",r="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function l(w){return w<=247?e.charAt(w):1424<=w&&w<=1524?"R":1536<=w&&w<=1785?r.charAt(w-1536):1774<=w&&w<=2220?"r":8192<=w&&w<=8203?"w":w==8204?"b":"L"}var a=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,c=/[stwN]/,d=/[LRr]/,m=/[Lb1n]/,v=/[1n]/;function x(w,M,P){this.level=w,this.from=M,this.to=P}return function(w,M){var P=M=="ltr"?"L":"R";if(w.length==0||M=="ltr"&&!a.test(w))return!1;for(var z=w.length,H=[],q=0;q<z;++q)H.push(l(w.charCodeAt(q)));for(var ie=0,ue=P;ie<z;++ie){var pe=H[ie];pe=="m"?H[ie]=ue:ue=pe}for(var ve=0,ge=P;ve<z;++ve){var xe=H[ve];xe=="1"&&ge=="r"?H[ve]="n":d.test(xe)&&(ge=xe,xe=="r"&&(H[ve]="R"))}for(var Oe=1,Le=H[0];Oe<z-1;++Oe){var We=H[Oe];We=="+"&&Le=="1"&&H[Oe+1]=="1"?H[Oe]="1":We==","&&Le==H[Oe+1]&&(Le=="1"||Le=="n")&&(H[Oe]=Le),Le=We}for(var st=0;st<z;++st){var Lt=H[st];if(Lt==",")H[st]="N";else if(Lt=="%"){var ft=void 0;for(ft=st+1;ft<z&&H[ft]=="%";++ft);for(var Qt=st&&H[st-1]=="!"||ft<z&&H[ft]=="1"?"1":"N",Xt=st;Xt<ft;++Xt)H[Xt]=Qt;st=ft-1}}for(var yt=0,qt=P;yt<z;++yt){var Mt=H[yt];qt=="L"&&Mt=="1"?H[yt]="L":d.test(Mt)&&(qt=Mt)}for(var kt=0;kt<z;++kt)if(c.test(H[kt])){var bt=void 0;for(bt=kt+1;bt<z&&c.test(H[bt]);++bt);for(var dt=(kt?H[kt-1]:P)=="L",Gt=(bt<z?H[bt]:P)=="L",ar=dt==Gt?dt?"L":"R":P,ci=kt;ci<bt;++ci)H[ci]=ar;kt=bt-1}for(var Rt=[],Pn,Nt=0;Nt<z;)if(m.test(H[Nt])){var za=Nt;for(++Nt;Nt<z&&m.test(H[Nt]);++Nt);Rt.push(new x(0,za,Nt))}else{var jn=Nt,Ti=Rt.length,Li=M=="rtl"?1:0;for(++Nt;Nt<z&&H[Nt]!="L";++Nt);for(var zt=jn;zt<Nt;)if(v.test(H[zt])){jn<zt&&(Rt.splice(Ti,0,new x(1,jn,zt)),Ti+=Li);var lr=zt;for(++zt;zt<Nt&&v.test(H[zt]);++zt);Rt.splice(Ti,0,new x(2,lr,zt)),Ti+=Li,jn=zt}else++zt;jn<Nt&&Rt.splice(Ti,0,new x(1,jn,Nt))}return M=="ltr"&&(Rt[0].level==1&&(Pn=w.match(/^\s+/))&&(Rt[0].from=Pn[0].length,Rt.unshift(new x(0,0,Pn[0].length))),fe(Rt).level==1&&(Pn=w.match(/\s+$/))&&(fe(Rt).to-=Pn[0].length,Rt.push(new x(0,z-Pn[0].length,z)))),M=="rtl"?Rt.reverse():Rt}}();function Y(e,r){var l=e.order;return l==null&&(l=e.order=B(e.text,r)),l}var be=[],ne=function(e,r,l){if(e.addEventListener)e.addEventListener(r,l,!1);else if(e.attachEvent)e.attachEvent("on"+r,l);else{var a=e._handlers||(e._handlers={});a[r]=(a[r]||be).concat(l)}};function Ge(e,r){return e._handlers&&e._handlers[r]||be}function Be(e,r,l){if(e.removeEventListener)e.removeEventListener(r,l,!1);else if(e.detachEvent)e.detachEvent("on"+r,l);else{var a=e._handlers,c=a&&a[r];if(c){var d=Z(c,l);d>-1&&(a[r]=c.slice(0,d).concat(c.slice(d+1)))}}}function Pe(e,r){var l=Ge(e,r);if(l.length)for(var a=Array.prototype.slice.call(arguments,2),c=0;c<l.length;++c)l[c].apply(null,a)}function ot(e,r,l){return typeof r=="string"&&(r={type:r,preventDefault:function(){this.defaultPrevented=!0}}),Pe(e,l||r.type,e,r),sn(r)||r.codemirrorIgnore}function Yt(e){var r=e._handlers&&e._handlers.cursorActivity;if(r)for(var l=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),a=0;a<r.length;++a)Z(l,r[a])==-1&&l.push(r[a])}function et(e,r){return Ge(e,r).length>0}function rn(e){e.prototype.on=function(r,l){ne(this,r,l)},e.prototype.off=function(r,l){Be(this,r,l)}}function At(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function zi(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function sn(e){return e.defaultPrevented!=null?e.defaultPrevented:e.returnValue==!1}function mi(e){At(e),zi(e)}function Qn(e){return e.target||e.srcElement}function Ds(e){var r=e.which;return r==null&&(e.button&1?r=1:e.button&2?r=3:e.button&4&&(r=2)),K&&e.ctrlKey&&r==1&&(r=3),r}var br=function(){if(p&&g<9)return!1;var e=F("div");return"draggable"in e||"dragDrop"in e}(),jt;function Ps(e){if(jt==null){var r=F("span","â€‹");R(e,F("span",[r,document.createTextNode("x")])),e.firstChild.offsetHeight!=0&&(jt=r.offsetWidth<=1&&r.offsetHeight>2&&!(p&&g<8))}var l=jt?F("span","â€‹"):F("span","Â ",null,"display: inline-block; width: 1px; margin-right: -1px");return l.setAttribute("cm-text",""),l}var xr;function Cn(e){if(xr!=null)return xr;var r=R(e,document.createTextNode("AØ®A")),l=me(r,0,1).getBoundingClientRect(),a=me(r,1,2).getBoundingClientRect();return le(e),!l||l.left==l.right?!1:xr=a.right-l.right<3}var _r=`

b`.split(/\n/).length!=3?function(e){for(var r=0,l=[],a=e.length;r<=a;){var c=e.indexOf(`
`,r);c==-1&&(c=e.length);var d=e.slice(r,e.charAt(c-1)=="\r"?c-1:c),m=d.indexOf("\r");m!=-1?(l.push(d.slice(0,m)),r+=m+1):(l.push(d),r=c+1)}return l}:function(e){return e.split(/\r\n?|\n/)},Os=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch{return!1}}:function(e){var r;try{r=e.ownerDocument.selection.createRange()}catch{}return!r||r.parentElement()!=e?!1:r.compareEndPoints("StartToEnd",r)!=0},As=function(){var e=F("div");return"oncopy"in e?!0:(e.setAttribute("oncopy","return;"),typeof e.oncopy=="function")}(),wr=null;function ei(e){if(wr!=null)return wr;var r=R(e,F("span","x")),l=r.getBoundingClientRect(),a=me(r,0,1).getBoundingClientRect();return wr=Math.abs(l.left-a.left)>1}var fn={},on={};function Is(e,r){arguments.length>2&&(r.dependencies=Array.prototype.slice.call(arguments,2)),fn[e]=r}function Hn(e,r){on[e]=r}function Bi(e){if(typeof e=="string"&&on.hasOwnProperty(e))e=on[e];else if(e&&typeof e.name=="string"&&on.hasOwnProperty(e.name)){var r=on[e.name];typeof r=="string"&&(r={name:r}),e=Ie(r,e),e.name=r.name}else{if(typeof e=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return Bi("application/xml");if(typeof e=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return Bi("application/json")}return typeof e=="string"?{name:e}:e||{name:"null"}}function Ui(e,r){r=Bi(r);var l=fn[r.name];if(!l)return Ui(e,"text/plain");var a=l(e,r);if(yn.hasOwnProperty(r.name)){var c=yn[r.name];for(var d in c)c.hasOwnProperty(d)&&(a.hasOwnProperty(d)&&(a["_"+d]=a[d]),a[d]=c[d])}if(a.name=r.name,r.helperType&&(a.helperType=r.helperType),r.modeProps)for(var m in r.modeProps)a[m]=r.modeProps[m];return a}var yn={};function bn(e,r){var l=yn.hasOwnProperty(e)?yn[e]:yn[e]={};Te(r,l)}function an(e,r){if(r===!0)return r;if(e.copyState)return e.copyState(r);var l={};for(var a in r){var c=r[a];c instanceof Array&&(c=c.concat([])),l[a]=c}return l}function kr(e,r){for(var l;e.innerMode&&(l=e.innerMode(r),!(!l||l.mode==e));)r=l.state,e=l.mode;return l||{mode:e,state:r}}function Sr(e,r,l){return e.startState?e.startState(r,l):!0}var ht=function(e,r,l){this.pos=this.start=0,this.string=e,this.tabSize=r||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=l};ht.prototype.eol=function(){return this.pos>=this.string.length},ht.prototype.sol=function(){return this.pos==this.lineStart},ht.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},ht.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},ht.prototype.eat=function(e){var r=this.string.charAt(this.pos),l;if(typeof e=="string"?l=r==e:l=r&&(e.test?e.test(r):e(r)),l)return++this.pos,r},ht.prototype.eatWhile=function(e){for(var r=this.pos;this.eat(e););return this.pos>r},ht.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},ht.prototype.skipToEnd=function(){this.pos=this.string.length},ht.prototype.skipTo=function(e){var r=this.string.indexOf(e,this.pos);if(r>-1)return this.pos=r,!0},ht.prototype.backUp=function(e){this.pos-=e},ht.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Ae(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Ae(this.string,this.lineStart,this.tabSize):0)},ht.prototype.indentation=function(){return Ae(this.string,null,this.tabSize)-(this.lineStart?Ae(this.string,this.lineStart,this.tabSize):0)},ht.prototype.match=function(e,r,l){if(typeof e=="string"){var a=function(m){return l?m.toLowerCase():m},c=this.string.substr(this.pos,e.length);if(a(c)==a(e))return r!==!1&&(this.pos+=e.length),!0}else{var d=this.string.slice(this.pos).match(e);return d&&d.index>0?null:(d&&r!==!1&&(this.pos+=d[0].length),d)}},ht.prototype.current=function(){return this.string.slice(this.start,this.pos)},ht.prototype.hideFirstChars=function(e,r){this.lineStart+=e;try{return r()}finally{this.lineStart-=e}},ht.prototype.lookAhead=function(e){var r=this.lineOracle;return r&&r.lookAhead(e)},ht.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};function Se(e,r){if(r-=e.first,r<0||r>=e.size)throw new Error("There is no line "+(r+e.first)+" in the document.");for(var l=e;!l.lines;)for(var a=0;;++a){var c=l.children[a],d=c.chunkSize();if(r<d){l=c;break}r-=d}return l.lines[r]}function Tn(e,r,l){var a=[],c=r.line;return e.iter(r.line,l.line+1,function(d){var m=d.text;c==l.line&&(m=m.slice(0,l.ch)),c==r.line&&(m=m.slice(r.ch)),a.push(m),++c}),a}function Cr(e,r,l){var a=[];return e.iter(r,l,function(c){a.push(c.text)}),a}function Zt(e,r){var l=r-e.height;if(l)for(var a=e;a;a=a.parent)a.height+=l}function Je(e){if(e.parent==null)return null;for(var r=e.parent,l=Z(r.lines,e),a=r.parent;a;r=a,a=a.parent)for(var c=0;a.children[c]!=r;++c)l+=a.children[c].chunkSize();return l+r.first}function Ln(e,r){var l=e.first;e:do{for(var a=0;a<e.children.length;++a){var c=e.children[a],d=c.height;if(r<d){e=c;continue e}r-=d,l+=c.chunkSize()}return l}while(!e.lines);for(var m=0;m<e.lines.length;++m){var v=e.lines[m],x=v.height;if(r<x)break;r-=x}return l+m}function vi(e,r){return r>=e.first&&r<e.first+e.size}function Tr(e,r){return String(e.lineNumberFormatter(r+e.firstLineNumber))}function ae(e,r,l){if(l===void 0&&(l=null),!(this instanceof ae))return new ae(e,r,l);this.line=e,this.ch=r,this.sticky=l}function k(e,r){return e.line-r.line||e.ch-r.ch}function A(e,r){return e.sticky==r.sticky&&k(e,r)==0}function J(e){return ae(e.line,e.ch)}function ce(e,r){return k(e,r)<0?r:e}function Re(e,r){return k(e,r)<0?e:r}function Xe(e,r){return Math.max(e.first,Math.min(r,e.first+e.size-1))}function ye(e,r){if(r.line<e.first)return ae(e.first,0);var l=e.first+e.size-1;return r.line>l?ae(l,Se(e,l).text.length):It(r,Se(e,r.line).text.length)}function It(e,r){var l=e.ch;return l==null||l>r?ae(e.line,r):l<0?ae(e.line,0):e}function ln(e,r){for(var l=[],a=0;a<r.length;a++)l[a]=ye(e,r[a]);return l}var $i=function(e,r){this.state=e,this.lookAhead=r},Nn=function(e,r,l,a){this.state=r,this.doc=e,this.line=l,this.maxLookAhead=a||0,this.baseTokens=null,this.baseTokenPos=1};Nn.prototype.lookAhead=function(e){var r=this.doc.getLine(this.line+e);return r!=null&&e>this.maxLookAhead&&(this.maxLookAhead=e),r},Nn.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var r=this.baseTokens[this.baseTokenPos+1];return{type:r&&r.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},Nn.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Nn.fromSaved=function(e,r,l){return r instanceof $i?new Nn(e,an(e.mode,r.state),l,r.lookAhead):new Nn(e,an(e.mode,r),l)},Nn.prototype.save=function(e){var r=e!==!1?an(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new $i(r,this.maxLookAhead):r};function Bl(e,r,l,a){var c=[e.state.modeGen],d={};Xl(e,r.text,e.doc.mode,l,function(w,M){return c.push(w,M)},d,a);for(var m=l.state,v=function(w){l.baseTokens=c;var M=e.state.overlays[w],P=1,z=0;l.state=!0,Xl(e,r.text,M.mode,l,function(H,q){for(var ie=P;z<H;){var ue=c[P];ue>H&&c.splice(P,1,H,c[P+1],ue),P+=2,z=Math.min(H,ue)}if(q)if(M.opaque)c.splice(ie,P-ie,H,"overlay "+q),P=ie+2;else for(;ie<P;ie+=2){var pe=c[ie+1];c[ie+1]=(pe?pe+" ":"")+"overlay "+q}},d),l.state=m,l.baseTokens=null,l.baseTokenPos=1},x=0;x<e.state.overlays.length;++x)v(x);return{styles:c,classes:d.bgClass||d.textClass?d:null}}function Ul(e,r,l){if(!r.styles||r.styles[0]!=e.state.modeGen){var a=Lr(e,Je(r)),c=r.text.length>e.options.maxHighlightLength&&an(e.doc.mode,a.state),d=Bl(e,r,a);c&&(a.state=c),r.stateAfter=a.save(!c),r.styles=d.styles,d.classes?r.styleClasses=d.classes:r.styleClasses&&(r.styleClasses=null),l===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return r.styles}function Lr(e,r,l){var a=e.doc,c=e.display;if(!a.mode.startState)return new Nn(a,!0,r);var d=Ud(e,r,l),m=d>a.first&&Se(a,d-1).stateAfter,v=m?Nn.fromSaved(a,m,d):new Nn(a,Sr(a.mode),d);return a.iter(d,r,function(x){Yo(e,x.text,v);var w=v.line;x.stateAfter=w==r-1||w%5==0||w>=c.viewFrom&&w<c.viewTo?v.save():null,v.nextLine()}),l&&(a.modeFrontier=v.line),v}function Yo(e,r,l,a){var c=e.doc.mode,d=new ht(r,e.options.tabSize,l);for(d.start=d.pos=a||0,r==""&&$l(c,l.state);!d.eol();)Zo(c,d,l.state),d.start=d.pos}function $l(e,r){if(e.blankLine)return e.blankLine(r);if(e.innerMode){var l=kr(e,r);if(l.mode.blankLine)return l.mode.blankLine(l.state)}}function Zo(e,r,l,a){for(var c=0;c<10;c++){a&&(a[0]=kr(e,l).mode);var d=e.token(r,l);if(r.pos>r.start)return d}throw new Error("Mode "+e.name+" failed to advance stream.")}var jl=function(e,r,l){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=r||null,this.state=l};function Vl(e,r,l,a){var c=e.doc,d=c.mode,m;r=ye(c,r);var v=Se(c,r.line),x=Lr(e,r.line,l),w=new ht(v.text,e.options.tabSize,x),M;for(a&&(M=[]);(a||w.pos<r.ch)&&!w.eol();)w.start=w.pos,m=Zo(d,w,x.state),a&&M.push(new jl(w,m,an(c.mode,x.state)));return a?M:new jl(w,m,x.state)}function Kl(e,r){if(e)for(;;){var l=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!l)break;e=e.slice(0,l.index)+e.slice(l.index+l[0].length);var a=l[1]?"bgClass":"textClass";r[a]==null?r[a]=l[2]:new RegExp("(?:^|\\s)"+l[2]+"(?:$|\\s)").test(r[a])||(r[a]+=" "+l[2])}return e}function Xl(e,r,l,a,c,d,m){var v=l.flattenSpans;v==null&&(v=e.options.flattenSpans);var x=0,w=null,M=new ht(r,e.options.tabSize,a),P,z=e.options.addModeClass&&[null];for(r==""&&Kl($l(l,a.state),d);!M.eol();){if(M.pos>e.options.maxHighlightLength?(v=!1,m&&Yo(e,r,a,M.pos),M.pos=r.length,P=null):P=Kl(Zo(l,M,a.state,z),d),z){var H=z[0].name;H&&(P="m-"+(P?H+" "+P:H))}if(!v||w!=P){for(;x<M.start;)x=Math.min(M.start,x+5e3),c(x,w);w=P}M.start=M.pos}for(;x<M.pos;){var q=Math.min(M.pos,x+5e3);c(q,w),x=q}}function Ud(e,r,l){for(var a,c,d=e.doc,m=l?-1:r-(e.doc.mode.innerMode?1e3:100),v=r;v>m;--v){if(v<=d.first)return d.first;var x=Se(d,v-1),w=x.stateAfter;if(w&&(!l||v+(w instanceof $i?w.lookAhead:0)<=d.modeFrontier))return v;var M=Ae(x.text,null,e.options.tabSize);(c==null||a>M)&&(c=v-1,a=M)}return c}function $d(e,r){if(e.modeFrontier=Math.min(e.modeFrontier,r),!(e.highlightFrontier<r-10)){for(var l=e.first,a=r-1;a>l;a--){var c=Se(e,a).stateAfter;if(c&&(!(c instanceof $i)||a+c.lookAhead<r)){l=a+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,l)}}var ql=!1,Wn=!1;function jd(){ql=!0}function Vd(){Wn=!0}function Es(e,r,l){this.marker=e,this.from=r,this.to=l}function Nr(e,r){if(e)for(var l=0;l<e.length;++l){var a=e[l];if(a.marker==r)return a}}function Kd(e,r){for(var l,a=0;a<e.length;++a)e[a]!=r&&(l||(l=[])).push(e[a]);return l}function Xd(e,r,l){var a=l&&window.WeakSet&&(l.markedSpans||(l.markedSpans=new WeakSet));a&&a.has(e.markedSpans)?e.markedSpans.push(r):(e.markedSpans=e.markedSpans?e.markedSpans.concat([r]):[r],a&&a.add(e.markedSpans)),r.marker.attachLine(e)}function qd(e,r,l){var a;if(e)for(var c=0;c<e.length;++c){var d=e[c],m=d.marker,v=d.from==null||(m.inclusiveLeft?d.from<=r:d.from<r);if(v||d.from==r&&m.type=="bookmark"&&(!l||!d.marker.insertLeft)){var x=d.to==null||(m.inclusiveRight?d.to>=r:d.to>r);(a||(a=[])).push(new Es(m,d.from,x?null:d.to))}}return a}function Gd(e,r,l){var a;if(e)for(var c=0;c<e.length;++c){var d=e[c],m=d.marker,v=d.to==null||(m.inclusiveRight?d.to>=r:d.to>r);if(v||d.from==r&&m.type=="bookmark"&&(!l||d.marker.insertLeft)){var x=d.from==null||(m.inclusiveLeft?d.from<=r:d.from<r);(a||(a=[])).push(new Es(m,x?null:d.from-r,d.to==null?null:d.to-r))}}return a}function Jo(e,r){if(r.full)return null;var l=vi(e,r.from.line)&&Se(e,r.from.line).markedSpans,a=vi(e,r.to.line)&&Se(e,r.to.line).markedSpans;if(!l&&!a)return null;var c=r.from.ch,d=r.to.ch,m=k(r.from,r.to)==0,v=qd(l,c,m),x=Gd(a,d,m),w=r.text.length==1,M=fe(r.text).length+(w?c:0);if(v)for(var P=0;P<v.length;++P){var z=v[P];if(z.to==null){var H=Nr(x,z.marker);H?w&&(z.to=H.to==null?null:H.to+M):z.to=c}}if(x)for(var q=0;q<x.length;++q){var ie=x[q];if(ie.to!=null&&(ie.to+=M),ie.from==null){var ue=Nr(v,ie.marker);ue||(ie.from=M,w&&(v||(v=[])).push(ie))}else ie.from+=M,w&&(v||(v=[])).push(ie)}v&&(v=Gl(v)),x&&x!=v&&(x=Gl(x));var pe=[v];if(!w){var ve=r.text.length-2,ge;if(ve>0&&v)for(var xe=0;xe<v.length;++xe)v[xe].to==null&&(ge||(ge=[])).push(new Es(v[xe].marker,null,null));for(var Oe=0;Oe<ve;++Oe)pe.push(ge);pe.push(x)}return pe}function Gl(e){for(var r=0;r<e.length;++r){var l=e[r];l.from!=null&&l.from==l.to&&l.marker.clearWhenEmpty!==!1&&e.splice(r--,1)}return e.length?e:null}function Yd(e,r,l){var a=null;if(e.iter(r.line,l.line+1,function(H){if(H.markedSpans)for(var q=0;q<H.markedSpans.length;++q){var ie=H.markedSpans[q].marker;ie.readOnly&&(!a||Z(a,ie)==-1)&&(a||(a=[])).push(ie)}}),!a)return null;for(var c=[{from:r,to:l}],d=0;d<a.length;++d)for(var m=a[d],v=m.find(0),x=0;x<c.length;++x){var w=c[x];if(!(k(w.to,v.from)<0||k(w.from,v.to)>0)){var M=[x,1],P=k(w.from,v.from),z=k(w.to,v.to);(P<0||!m.inclusiveLeft&&!P)&&M.push({from:w.from,to:v.from}),(z>0||!m.inclusiveRight&&!z)&&M.push({from:v.to,to:w.to}),c.splice.apply(c,M),x+=M.length-3}}return c}function Yl(e){var r=e.markedSpans;if(r){for(var l=0;l<r.length;++l)r[l].marker.detachLine(e);e.markedSpans=null}}function Zl(e,r){if(r){for(var l=0;l<r.length;++l)r[l].marker.attachLine(e);e.markedSpans=r}}function Rs(e){return e.inclusiveLeft?-1:0}function Fs(e){return e.inclusiveRight?1:0}function Qo(e,r){var l=e.lines.length-r.lines.length;if(l!=0)return l;var a=e.find(),c=r.find(),d=k(a.from,c.from)||Rs(e)-Rs(r);if(d)return-d;var m=k(a.to,c.to)||Fs(e)-Fs(r);return m||r.id-e.id}function Jl(e,r){var l=Wn&&e.markedSpans,a;if(l)for(var c=void 0,d=0;d<l.length;++d)c=l[d],c.marker.collapsed&&(r?c.from:c.to)==null&&(!a||Qo(a,c.marker)<0)&&(a=c.marker);return a}function Ql(e){return Jl(e,!0)}function Hs(e){return Jl(e,!1)}function Zd(e,r){var l=Wn&&e.markedSpans,a;if(l)for(var c=0;c<l.length;++c){var d=l[c];d.marker.collapsed&&(d.from==null||d.from<r)&&(d.to==null||d.to>r)&&(!a||Qo(a,d.marker)<0)&&(a=d.marker)}return a}function ec(e,r,l,a,c){var d=Se(e,r),m=Wn&&d.markedSpans;if(m)for(var v=0;v<m.length;++v){var x=m[v];if(x.marker.collapsed){var w=x.marker.find(0),M=k(w.from,l)||Rs(x.marker)-Rs(c),P=k(w.to,a)||Fs(x.marker)-Fs(c);if(!(M>=0&&P<=0||M<=0&&P>=0)&&(M<=0&&(x.marker.inclusiveRight&&c.inclusiveLeft?k(w.to,l)>=0:k(w.to,l)>0)||M>=0&&(x.marker.inclusiveRight&&c.inclusiveLeft?k(w.from,a)<=0:k(w.from,a)<0)))return!0}}}function xn(e){for(var r;r=Ql(e);)e=r.find(-1,!0).line;return e}function Jd(e){for(var r;r=Hs(e);)e=r.find(1,!0).line;return e}function Qd(e){for(var r,l;r=Hs(e);)e=r.find(1,!0).line,(l||(l=[])).push(e);return l}function ea(e,r){var l=Se(e,r),a=xn(l);return l==a?r:Je(a)}function tc(e,r){if(r>e.lastLine())return r;var l=Se(e,r),a;if(!ti(e,l))return r;for(;a=Hs(l);)l=a.find(1,!0).line;return Je(l)+1}function ti(e,r){var l=Wn&&r.markedSpans;if(l){for(var a=void 0,c=0;c<l.length;++c)if(a=l[c],!!a.marker.collapsed){if(a.from==null)return!0;if(!a.marker.widgetNode&&a.from==0&&a.marker.inclusiveLeft&&ta(e,r,a))return!0}}}function ta(e,r,l){if(l.to==null){var a=l.marker.find(1,!0);return ta(e,a.line,Nr(a.line.markedSpans,l.marker))}if(l.marker.inclusiveRight&&l.to==r.text.length)return!0;for(var c=void 0,d=0;d<r.markedSpans.length;++d)if(c=r.markedSpans[d],c.marker.collapsed&&!c.marker.widgetNode&&c.from==l.to&&(c.to==null||c.to!=l.from)&&(c.marker.inclusiveLeft||l.marker.inclusiveRight)&&ta(e,r,c))return!0}function zn(e){e=xn(e);for(var r=0,l=e.parent,a=0;a<l.lines.length;++a){var c=l.lines[a];if(c==e)break;r+=c.height}for(var d=l.parent;d;l=d,d=l.parent)for(var m=0;m<d.children.length;++m){var v=d.children[m];if(v==l)break;r+=v.height}return r}function Ws(e){if(e.height==0)return 0;for(var r=e.text.length,l,a=e;l=Ql(a);){var c=l.find(0,!0);a=c.from.line,r+=c.from.ch-c.to.ch}for(a=e;l=Hs(a);){var d=l.find(0,!0);r-=a.text.length-d.from.ch,a=d.to.line,r+=a.text.length-d.to.ch}return r}function na(e){var r=e.display,l=e.doc;r.maxLine=Se(l,l.first),r.maxLineLength=Ws(r.maxLine),r.maxLineChanged=!0,l.iter(function(a){var c=Ws(a);c>r.maxLineLength&&(r.maxLineLength=c,r.maxLine=a)})}var ji=function(e,r,l){this.text=e,Zl(this,r),this.height=l?l(this):1};ji.prototype.lineNo=function(){return Je(this)},rn(ji);function ep(e,r,l,a){e.text=r,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),e.order!=null&&(e.order=null),Yl(e),Zl(e,l);var c=a?a(e):1;c!=e.height&&Zt(e,c)}function tp(e){e.parent=null,Yl(e)}var np={},ip={};function nc(e,r){if(!e||/^\s*$/.test(e))return null;var l=r.addModeClass?ip:np;return l[e]||(l[e]=e.replace(/\S+/g,"cm-$&"))}function ic(e,r){var l=S("span",null,null,b?"padding-right: .1px":null),a={pre:S("pre",[l],"CodeMirror-line"),content:l,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};r.measure={};for(var c=0;c<=(r.rest?r.rest.length:0);c++){var d=c?r.rest[c-1]:r.line,m=void 0;a.pos=0,a.addToken=sp,Cn(e.display.measure)&&(m=Y(d,e.doc.direction))&&(a.addToken=ap(a.addToken,m)),a.map=[];var v=r!=e.display.externalMeasured&&Je(d);lp(d,a,Ul(e,d,v)),d.styleClasses&&(d.styleClasses.bgClass&&(a.bgClass=Ve(d.styleClasses.bgClass,a.bgClass||"")),d.styleClasses.textClass&&(a.textClass=Ve(d.styleClasses.textClass,a.textClass||""))),a.map.length==0&&a.map.push(0,0,a.content.appendChild(Ps(e.display.measure))),c==0?(r.measure.map=a.map,r.measure.cache={}):((r.measure.maps||(r.measure.maps=[])).push(a.map),(r.measure.caches||(r.measure.caches=[])).push({}))}if(b){var x=a.content.lastChild;(/\bcm-tab\b/.test(x.className)||x.querySelector&&x.querySelector(".cm-tab"))&&(a.content.className="cm-tab-wrap-hack")}return Pe(e,"renderLine",e,r.line,a.pre),a.pre.className&&(a.textClass=Ve(a.pre.className,a.textClass||"")),a}function rp(e){var r=F("span","â€¢","cm-invalidchar");return r.title="\\u"+e.charCodeAt(0).toString(16),r.setAttribute("aria-label",r.title),r}function sp(e,r,l,a,c,d,m){if(r){var v=e.splitSpaces?op(r,e.trailingSpace):r,x=e.cm.state.specialChars,w=!1,M;if(!x.test(r))e.col+=r.length,M=document.createTextNode(v),e.map.push(e.pos,e.pos+r.length,M),p&&g<9&&(w=!0),e.pos+=r.length;else{M=document.createDocumentFragment();for(var P=0;;){x.lastIndex=P;var z=x.exec(r),H=z?z.index-P:r.length-P;if(H){var q=document.createTextNode(v.slice(P,P+H));p&&g<9?M.appendChild(F("span",[q])):M.appendChild(q),e.map.push(e.pos,e.pos+H,q),e.col+=H,e.pos+=H}if(!z)break;P+=H+1;var ie=void 0;if(z[0]=="	"){var ue=e.cm.options.tabSize,pe=ue-e.col%ue;ie=M.appendChild(F("span",re(pe),"cm-tab")),ie.setAttribute("role","presentation"),ie.setAttribute("cm-text","	"),e.col+=pe}else z[0]=="\r"||z[0]==`
`?(ie=M.appendChild(F("span",z[0]=="\r"?"â":"â¤","cm-invalidchar")),ie.setAttribute("cm-text",z[0]),e.col+=1):(ie=e.cm.options.specialCharPlaceholder(z[0]),ie.setAttribute("cm-text",z[0]),p&&g<9?M.appendChild(F("span",[ie])):M.appendChild(ie),e.col+=1);e.map.push(e.pos,e.pos+1,ie),e.pos++}}if(e.trailingSpace=v.charCodeAt(r.length-1)==32,l||a||c||w||d||m){var ve=l||"";a&&(ve+=a),c&&(ve+=c);var ge=F("span",[M],ve,d);if(m)for(var xe in m)m.hasOwnProperty(xe)&&xe!="style"&&xe!="class"&&ge.setAttribute(xe,m[xe]);return e.content.appendChild(ge)}e.content.appendChild(M)}}function op(e,r){if(e.length>1&&!/  /.test(e))return e;for(var l=r,a="",c=0;c<e.length;c++){var d=e.charAt(c);d==" "&&l&&(c==e.length-1||e.charCodeAt(c+1)==32)&&(d="Â "),a+=d,l=d==" "}return a}function ap(e,r){return function(l,a,c,d,m,v,x){c=c?c+" cm-force-border":"cm-force-border";for(var w=l.pos,M=w+a.length;;){for(var P=void 0,z=0;z<r.length&&(P=r[z],!(P.to>w&&P.from<=w));z++);if(P.to>=M)return e(l,a,c,d,m,v,x);e(l,a.slice(0,P.to-w),c,d,null,v,x),d=null,a=a.slice(P.to-w),w=P.to}}}function rc(e,r,l,a){var c=!a&&l.widgetNode;c&&e.map.push(e.pos,e.pos+r,c),!a&&e.cm.display.input.needsContentAttribute&&(c||(c=e.content.appendChild(document.createElement("span"))),c.setAttribute("cm-marker",l.id)),c&&(e.cm.display.input.setUneditable(c),e.content.appendChild(c)),e.pos+=r,e.trailingSpace=!1}function lp(e,r,l){var a=e.markedSpans,c=e.text,d=0;if(!a){for(var m=1;m<l.length;m+=2)r.addToken(r,c.slice(d,d=l[m]),nc(l[m+1],r.cm.options));return}for(var v=c.length,x=0,w=1,M="",P,z,H=0,q,ie,ue,pe,ve;;){if(H==x){q=ie=ue=z="",ve=null,pe=null,H=1/0;for(var ge=[],xe=void 0,Oe=0;Oe<a.length;++Oe){var Le=a[Oe],We=Le.marker;if(We.type=="bookmark"&&Le.from==x&&We.widgetNode)ge.push(We);else if(Le.from<=x&&(Le.to==null||Le.to>x||We.collapsed&&Le.to==x&&Le.from==x)){if(Le.to!=null&&Le.to!=x&&H>Le.to&&(H=Le.to,ie=""),We.className&&(q+=" "+We.className),We.css&&(z=(z?z+";":"")+We.css),We.startStyle&&Le.from==x&&(ue+=" "+We.startStyle),We.endStyle&&Le.to==H&&(xe||(xe=[])).push(We.endStyle,Le.to),We.title&&((ve||(ve={})).title=We.title),We.attributes)for(var st in We.attributes)(ve||(ve={}))[st]=We.attributes[st];We.collapsed&&(!pe||Qo(pe.marker,We)<0)&&(pe=Le)}else Le.from>x&&H>Le.from&&(H=Le.from)}if(xe)for(var Lt=0;Lt<xe.length;Lt+=2)xe[Lt+1]==H&&(ie+=" "+xe[Lt]);if(!pe||pe.from==x)for(var ft=0;ft<ge.length;++ft)rc(r,0,ge[ft]);if(pe&&(pe.from||0)==x){if(rc(r,(pe.to==null?v+1:pe.to)-x,pe.marker,pe.from==null),pe.to==null)return;pe.to==x&&(pe=!1)}}if(x>=v)break;for(var Qt=Math.min(v,H);;){if(M){var Xt=x+M.length;if(!pe){var yt=Xt>Qt?M.slice(0,Qt-x):M;r.addToken(r,yt,P?P+q:q,ue,x+yt.length==H?ie:"",z,ve)}if(Xt>=Qt){M=M.slice(Qt-x),x=Qt;break}x=Xt,ue=""}M=c.slice(d,d=l[w++]),P=nc(l[w++],r.cm.options)}}}function sc(e,r,l){this.line=r,this.rest=Qd(r),this.size=this.rest?Je(fe(this.rest))-l+1:1,this.node=this.text=null,this.hidden=ti(e,r)}function zs(e,r,l){for(var a=[],c,d=r;d<l;d=c){var m=new sc(e.doc,Se(e.doc,d),d);c=d+m.size,a.push(m)}return a}var Vi=null;function cp(e){Vi?Vi.ops.push(e):e.ownsGroup=Vi={ops:[e],delayedCallbacks:[]}}function up(e){var r=e.delayedCallbacks,l=0;do{for(;l<r.length;l++)r[l].call(null);for(var a=0;a<e.ops.length;a++){var c=e.ops[a];if(c.cursorActivityHandlers)for(;c.cursorActivityCalled<c.cursorActivityHandlers.length;)c.cursorActivityHandlers[c.cursorActivityCalled++].call(null,c.cm)}}while(l<r.length)}function fp(e,r){var l=e.ownsGroup;if(l)try{up(l)}finally{Vi=null,r(l)}}var Mr=null;function St(e,r){var l=Ge(e,r);if(l.length){var a=Array.prototype.slice.call(arguments,2),c;Vi?c=Vi.delayedCallbacks:Mr?c=Mr:(c=Mr=[],setTimeout(hp,0));for(var d=function(v){c.push(function(){return l[v].apply(null,a)})},m=0;m<l.length;++m)d(m)}}function hp(){var e=Mr;Mr=null;for(var r=0;r<e.length;++r)e[r]()}function oc(e,r,l,a){for(var c=0;c<r.changes.length;c++){var d=r.changes[c];d=="text"?pp(e,r):d=="gutter"?lc(e,r,l,a):d=="class"?ia(e,r):d=="widget"&&gp(e,r,a)}r.changes=null}function Dr(e){return e.node==e.text&&(e.node=F("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),p&&g<8&&(e.node.style.zIndex=2)),e.node}function dp(e,r){var l=r.bgClass?r.bgClass+" "+(r.line.bgClass||""):r.line.bgClass;if(l&&(l+=" CodeMirror-linebackground"),r.background)l?r.background.className=l:(r.background.parentNode.removeChild(r.background),r.background=null);else if(l){var a=Dr(r);r.background=a.insertBefore(F("div",null,l),a.firstChild),e.display.input.setUneditable(r.background)}}function ac(e,r){var l=e.display.externalMeasured;return l&&l.line==r.line?(e.display.externalMeasured=null,r.measure=l.measure,l.built):ic(e,r)}function pp(e,r){var l=r.text.className,a=ac(e,r);r.text==r.node&&(r.node=a.pre),r.text.parentNode.replaceChild(a.pre,r.text),r.text=a.pre,a.bgClass!=r.bgClass||a.textClass!=r.textClass?(r.bgClass=a.bgClass,r.textClass=a.textClass,ia(e,r)):l&&(r.text.className=l)}function ia(e,r){dp(e,r),r.line.wrapClass?Dr(r).className=r.line.wrapClass:r.node!=r.text&&(r.node.className="");var l=r.textClass?r.textClass+" "+(r.line.textClass||""):r.line.textClass;r.text.className=l||""}function lc(e,r,l,a){if(r.gutter&&(r.node.removeChild(r.gutter),r.gutter=null),r.gutterBackground&&(r.node.removeChild(r.gutterBackground),r.gutterBackground=null),r.line.gutterClass){var c=Dr(r);r.gutterBackground=F("div",null,"CodeMirror-gutter-background "+r.line.gutterClass,"left: "+(e.options.fixedGutter?a.fixedPos:-a.gutterTotalWidth)+"px; width: "+a.gutterTotalWidth+"px"),e.display.input.setUneditable(r.gutterBackground),c.insertBefore(r.gutterBackground,r.text)}var d=r.line.gutterMarkers;if(e.options.lineNumbers||d){var m=Dr(r),v=r.gutter=F("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?a.fixedPos:-a.gutterTotalWidth)+"px");if(v.setAttribute("aria-hidden","true"),e.display.input.setUneditable(v),m.insertBefore(v,r.text),r.line.gutterClass&&(v.className+=" "+r.line.gutterClass),e.options.lineNumbers&&(!d||!d["CodeMirror-linenumbers"])&&(r.lineNumber=v.appendChild(F("div",Tr(e.options,l),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+a.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),d)for(var x=0;x<e.display.gutterSpecs.length;++x){var w=e.display.gutterSpecs[x].className,M=d.hasOwnProperty(w)&&d[w];M&&v.appendChild(F("div",[M],"CodeMirror-gutter-elt","left: "+a.gutterLeft[w]+"px; width: "+a.gutterWidth[w]+"px"))}}}function gp(e,r,l){r.alignable&&(r.alignable=null);for(var a=he("CodeMirror-linewidget"),c=r.node.firstChild,d=void 0;c;c=d)d=c.nextSibling,a.test(c.className)&&r.node.removeChild(c);cc(e,r,l)}function mp(e,r,l,a){var c=ac(e,r);return r.text=r.node=c.pre,c.bgClass&&(r.bgClass=c.bgClass),c.textClass&&(r.textClass=c.textClass),ia(e,r),lc(e,r,l,a),cc(e,r,a),r.node}function cc(e,r,l){if(uc(e,r.line,r,l,!0),r.rest)for(var a=0;a<r.rest.length;a++)uc(e,r.rest[a],r,l,!1)}function uc(e,r,l,a,c){if(r.widgets)for(var d=Dr(l),m=0,v=r.widgets;m<v.length;++m){var x=v[m],w=F("div",[x.node],"CodeMirror-linewidget"+(x.className?" "+x.className:""));x.handleMouseEvents||w.setAttribute("cm-ignore-events","true"),vp(x,w,l,a),e.display.input.setUneditable(w),c&&x.above?d.insertBefore(w,l.gutter||l.text):d.appendChild(w),St(x,"redraw")}}function vp(e,r,l,a){if(e.noHScroll){(l.alignable||(l.alignable=[])).push(r);var c=a.wrapperWidth;r.style.left=a.fixedPos+"px",e.coverGutter||(c-=a.gutterTotalWidth,r.style.paddingLeft=a.gutterTotalWidth+"px"),r.style.width=c+"px"}e.coverGutter&&(r.style.zIndex=5,r.style.position="relative",e.noHScroll||(r.style.marginLeft=-a.gutterTotalWidth+"px"))}function Pr(e){if(e.height!=null)return e.height;var r=e.doc.cm;if(!r)return 0;if(!Me(document.body,e.node)){var l="position: relative;";e.coverGutter&&(l+="margin-left: -"+r.display.gutters.offsetWidth+"px;"),e.noHScroll&&(l+="width: "+r.display.wrapper.clientWidth+"px;"),R(r.display.measure,F("div",[e.node],null,l))}return e.height=e.node.parentNode.offsetHeight}function Bn(e,r){for(var l=Qn(r);l!=e.wrapper;l=l.parentNode)if(!l||l.nodeType==1&&l.getAttribute("cm-ignore-events")=="true"||l.parentNode==e.sizer&&l!=e.mover)return!0}function Bs(e){return e.lineSpace.offsetTop}function ra(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function fc(e){if(e.cachedPaddingH)return e.cachedPaddingH;var r=R(e.measure,F("pre","x","CodeMirror-line-like")),l=window.getComputedStyle?window.getComputedStyle(r):r.currentStyle,a={left:parseInt(l.paddingLeft),right:parseInt(l.paddingRight)};return!isNaN(a.left)&&!isNaN(a.right)&&(e.cachedPaddingH=a),a}function Mn(e){return te-e.display.nativeBarWidth}function yi(e){return e.display.scroller.clientWidth-Mn(e)-e.display.barWidth}function sa(e){return e.display.scroller.clientHeight-Mn(e)-e.display.barHeight}function yp(e,r,l){var a=e.options.lineWrapping,c=a&&yi(e);if(!r.measure.heights||a&&r.measure.width!=c){var d=r.measure.heights=[];if(a){r.measure.width=c;for(var m=r.text.firstChild.getClientRects(),v=0;v<m.length-1;v++){var x=m[v],w=m[v+1];Math.abs(x.bottom-w.bottom)>2&&d.push((x.bottom+w.top)/2-l.top)}}d.push(l.bottom-l.top)}}function hc(e,r,l){if(e.line==r)return{map:e.measure.map,cache:e.measure.cache};if(e.rest){for(var a=0;a<e.rest.length;a++)if(e.rest[a]==r)return{map:e.measure.maps[a],cache:e.measure.caches[a]};for(var c=0;c<e.rest.length;c++)if(Je(e.rest[c])>l)return{map:e.measure.maps[c],cache:e.measure.caches[c],before:!0}}}function bp(e,r){r=xn(r);var l=Je(r),a=e.display.externalMeasured=new sc(e.doc,r,l);a.lineN=l;var c=a.built=ic(e,a);return a.text=c.pre,R(e.display.lineMeasure,c.pre),a}function dc(e,r,l,a){return Dn(e,Ki(e,r),l,a)}function oa(e,r){if(r>=e.display.viewFrom&&r<e.display.viewTo)return e.display.view[_i(e,r)];var l=e.display.externalMeasured;if(l&&r>=l.lineN&&r<l.lineN+l.size)return l}function Ki(e,r){var l=Je(r),a=oa(e,l);a&&!a.text?a=null:a&&a.changes&&(oc(e,a,l,fa(e)),e.curOp.forceUpdate=!0),a||(a=bp(e,r));var c=hc(a,r,l);return{line:r,view:a,rect:null,map:c.map,cache:c.cache,before:c.before,hasHeights:!1}}function Dn(e,r,l,a,c){r.before&&(l=-1);var d=l+(a||""),m;return r.cache.hasOwnProperty(d)?m=r.cache[d]:(r.rect||(r.rect=r.view.text.getBoundingClientRect()),r.hasHeights||(yp(e,r.view,r.rect),r.hasHeights=!0),m=_p(e,r,l,a),m.bogus||(r.cache[d]=m)),{left:m.left,right:m.right,top:c?m.rtop:m.top,bottom:c?m.rbottom:m.bottom}}var pc={left:0,right:0,top:0,bottom:0};function gc(e,r,l){for(var a,c,d,m,v,x,w=0;w<e.length;w+=3)if(v=e[w],x=e[w+1],r<v?(c=0,d=1,m="left"):r<x?(c=r-v,d=c+1):(w==e.length-3||r==x&&e[w+3]>r)&&(d=x-v,c=d-1,r>=x&&(m="right")),c!=null){if(a=e[w+2],v==x&&l==(a.insertLeft?"left":"right")&&(m=l),l=="left"&&c==0)for(;w&&e[w-2]==e[w-3]&&e[w-1].insertLeft;)a=e[(w-=3)+2],m="left";if(l=="right"&&c==x-v)for(;w<e.length-3&&e[w+3]==e[w+4]&&!e[w+5].insertLeft;)a=e[(w+=3)+2],m="right";break}return{node:a,start:c,end:d,collapse:m,coverStart:v,coverEnd:x}}function xp(e,r){var l=pc;if(r=="left")for(var a=0;a<e.length&&(l=e[a]).left==l.right;a++);else for(var c=e.length-1;c>=0&&(l=e[c]).left==l.right;c--);return l}function _p(e,r,l,a){var c=gc(r.map,l,a),d=c.node,m=c.start,v=c.end,x=c.collapse,w;if(d.nodeType==3){for(var M=0;M<4;M++){for(;m&&vn(r.line.text.charAt(c.coverStart+m));)--m;for(;c.coverStart+v<c.coverEnd&&vn(r.line.text.charAt(c.coverStart+v));)++v;if(p&&g<9&&m==0&&v==c.coverEnd-c.coverStart?w=d.parentNode.getBoundingClientRect():w=xp(me(d,m,v).getClientRects(),a),w.left||w.right||m==0)break;v=m,m=m-1,x="right"}p&&g<11&&(w=wp(e.display.measure,w))}else{m>0&&(x=a="right");var P;e.options.lineWrapping&&(P=d.getClientRects()).length>1?w=P[a=="right"?P.length-1:0]:w=d.getBoundingClientRect()}if(p&&g<9&&!m&&(!w||!w.left&&!w.right)){var z=d.parentNode.getClientRects()[0];z?w={left:z.left,right:z.left+qi(e.display),top:z.top,bottom:z.bottom}:w=pc}for(var H=w.top-r.rect.top,q=w.bottom-r.rect.top,ie=(H+q)/2,ue=r.view.measure.heights,pe=0;pe<ue.length-1&&!(ie<ue[pe]);pe++);var ve=pe?ue[pe-1]:0,ge=ue[pe],xe={left:(x=="right"?w.right:w.left)-r.rect.left,right:(x=="left"?w.left:w.right)-r.rect.left,top:ve,bottom:ge};return!w.left&&!w.right&&(xe.bogus=!0),e.options.singleCursorHeightPerLine||(xe.rtop=H,xe.rbottom=q),xe}function wp(e,r){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!ei(e))return r;var l=screen.logicalXDPI/screen.deviceXDPI,a=screen.logicalYDPI/screen.deviceYDPI;return{left:r.left*l,right:r.right*l,top:r.top*a,bottom:r.bottom*a}}function mc(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var r=0;r<e.rest.length;r++)e.measure.caches[r]={}}function vc(e){e.display.externalMeasure=null,le(e.display.lineMeasure);for(var r=0;r<e.display.view.length;r++)mc(e.display.view[r])}function Or(e){vc(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function yc(){return T&&I?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function bc(){return T&&I?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function aa(e){var r=xn(e),l=r.widgets,a=0;if(l)for(var c=0;c<l.length;++c)l[c].above&&(a+=Pr(l[c]));return a}function Us(e,r,l,a,c){if(!c){var d=aa(r);l.top+=d,l.bottom+=d}if(a=="line")return l;a||(a="local");var m=zn(r);if(a=="local"?m+=Bs(e.display):m-=e.display.viewOffset,a=="page"||a=="window"){var v=e.display.lineSpace.getBoundingClientRect();m+=v.top+(a=="window"?0:bc());var x=v.left+(a=="window"?0:yc());l.left+=x,l.right+=x}return l.top+=m,l.bottom+=m,l}function xc(e,r,l){if(l=="div")return r;var a=r.left,c=r.top;if(l=="page")a-=yc(),c-=bc();else if(l=="local"||!l){var d=e.display.sizer.getBoundingClientRect();a+=d.left,c+=d.top}var m=e.display.lineSpace.getBoundingClientRect();return{left:a-m.left,top:c-m.top}}function $s(e,r,l,a,c){return a||(a=Se(e.doc,r.line)),Us(e,a,dc(e,a,r.ch,c),l)}function _n(e,r,l,a,c,d){a=a||Se(e.doc,r.line),c||(c=Ki(e,a));function m(q,ie){var ue=Dn(e,c,q,ie?"right":"left",d);return ie?ue.left=ue.right:ue.right=ue.left,Us(e,a,ue,l)}var v=Y(a,e.doc.direction),x=r.ch,w=r.sticky;if(x>=a.text.length?(x=a.text.length,w="before"):x<=0&&(x=0,w="after"),!v)return m(w=="before"?x-1:x,w=="before");function M(q,ie,ue){var pe=v[ie],ve=pe.level==1;return m(ue?q-1:q,ve!=ue)}var P=Q(v,x,w),z=$,H=M(x,P,w=="before");return z!=null&&(H.other=M(x,z,w!="before")),H}function _c(e,r){var l=0;r=ye(e.doc,r),e.options.lineWrapping||(l=qi(e.display)*r.ch);var a=Se(e.doc,r.line),c=zn(a)+Bs(e.display);return{left:l,right:l,top:c,bottom:c+a.height}}function la(e,r,l,a,c){var d=ae(e,r,l);return d.xRel=c,a&&(d.outside=a),d}function ca(e,r,l){var a=e.doc;if(l+=e.display.viewOffset,l<0)return la(a.first,0,null,-1,-1);var c=Ln(a,l),d=a.first+a.size-1;if(c>d)return la(a.first+a.size-1,Se(a,d).text.length,null,1,1);r<0&&(r=0);for(var m=Se(a,c);;){var v=kp(e,m,c,r,l),x=Zd(m,v.ch+(v.xRel>0||v.outside>0?1:0));if(!x)return v;var w=x.find(1);if(w.line==c)return w;m=Se(a,c=w.line)}}function wc(e,r,l,a){a-=aa(r);var c=r.text.length,d=C(function(m){return Dn(e,l,m-1).bottom<=a},c,0);return c=C(function(m){return Dn(e,l,m).top>a},d,c),{begin:d,end:c}}function kc(e,r,l,a){l||(l=Ki(e,r));var c=Us(e,r,Dn(e,l,a),"line").top;return wc(e,r,l,c)}function ua(e,r,l,a){return e.bottom<=l?!1:e.top>l?!0:(a?e.left:e.right)>r}function kp(e,r,l,a,c){c-=zn(r);var d=Ki(e,r),m=aa(r),v=0,x=r.text.length,w=!0,M=Y(r,e.doc.direction);if(M){var P=(e.options.lineWrapping?Cp:Sp)(e,r,l,d,M,a,c);w=P.level!=1,v=w?P.from:P.to-1,x=w?P.to:P.from-1}var z=null,H=null,q=C(function(Oe){var Le=Dn(e,d,Oe);return Le.top+=m,Le.bottom+=m,ua(Le,a,c,!1)?(Le.top<=c&&Le.left<=a&&(z=Oe,H=Le),!0):!1},v,x),ie,ue,pe=!1;if(H){var ve=a-H.left<H.right-a,ge=ve==w;q=z+(ge?0:1),ue=ge?"after":"before",ie=ve?H.left:H.right}else{!w&&(q==x||q==v)&&q++,ue=q==0?"after":q==r.text.length?"before":Dn(e,d,q-(w?1:0)).bottom+m<=c==w?"after":"before";var xe=_n(e,ae(l,q,ue),"line",r,d);ie=xe.left,pe=c<xe.top?-1:c>=xe.bottom?1:0}return q=un(r.text,q,1),la(l,q,ue,pe,a-ie)}function Sp(e,r,l,a,c,d,m){var v=C(function(P){var z=c[P],H=z.level!=1;return ua(_n(e,ae(l,H?z.to:z.from,H?"before":"after"),"line",r,a),d,m,!0)},0,c.length-1),x=c[v];if(v>0){var w=x.level!=1,M=_n(e,ae(l,w?x.from:x.to,w?"after":"before"),"line",r,a);ua(M,d,m,!0)&&M.top>m&&(x=c[v-1])}return x}function Cp(e,r,l,a,c,d,m){var v=wc(e,r,a,m),x=v.begin,w=v.end;/\s/.test(r.text.charAt(w-1))&&w--;for(var M=null,P=null,z=0;z<c.length;z++){var H=c[z];if(!(H.from>=w||H.to<=x)){var q=H.level!=1,ie=Dn(e,a,q?Math.min(w,H.to)-1:Math.max(x,H.from)).right,ue=ie<d?d-ie+1e9:ie-d;(!M||P>ue)&&(M=H,P=ue)}}return M||(M=c[c.length-1]),M.from<x&&(M={from:x,to:M.to,level:M.level}),M.to>w&&(M={from:M.from,to:w,level:M.level}),M}var bi;function Xi(e){if(e.cachedTextHeight!=null)return e.cachedTextHeight;if(bi==null){bi=F("pre",null,"CodeMirror-line-like");for(var r=0;r<49;++r)bi.appendChild(document.createTextNode("x")),bi.appendChild(F("br"));bi.appendChild(document.createTextNode("x"))}R(e.measure,bi);var l=bi.offsetHeight/50;return l>3&&(e.cachedTextHeight=l),le(e.measure),l||1}function qi(e){if(e.cachedCharWidth!=null)return e.cachedCharWidth;var r=F("span","xxxxxxxxxx"),l=F("pre",[r],"CodeMirror-line-like");R(e.measure,l);var a=r.getBoundingClientRect(),c=(a.right-a.left)/10;return c>2&&(e.cachedCharWidth=c),c||10}function fa(e){for(var r=e.display,l={},a={},c=r.gutters.clientLeft,d=r.gutters.firstChild,m=0;d;d=d.nextSibling,++m){var v=e.display.gutterSpecs[m].className;l[v]=d.offsetLeft+d.clientLeft+c,a[v]=d.clientWidth}return{fixedPos:ha(r),gutterTotalWidth:r.gutters.offsetWidth,gutterLeft:l,gutterWidth:a,wrapperWidth:r.wrapper.clientWidth}}function ha(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function Sc(e){var r=Xi(e.display),l=e.options.lineWrapping,a=l&&Math.max(5,e.display.scroller.clientWidth/qi(e.display)-3);return function(c){if(ti(e.doc,c))return 0;var d=0;if(c.widgets)for(var m=0;m<c.widgets.length;m++)c.widgets[m].height&&(d+=c.widgets[m].height);return l?d+(Math.ceil(c.text.length/a)||1)*r:d+r}}function da(e){var r=e.doc,l=Sc(e);r.iter(function(a){var c=l(a);c!=a.height&&Zt(a,c)})}function xi(e,r,l,a){var c=e.display;if(!l&&Qn(r).getAttribute("cm-not-content")=="true")return null;var d,m,v=c.lineSpace.getBoundingClientRect();try{d=r.clientX-v.left,m=r.clientY-v.top}catch{return null}var x=ca(e,d,m),w;if(a&&x.xRel>0&&(w=Se(e.doc,x.line).text).length==x.ch){var M=Ae(w,w.length,e.options.tabSize)-w.length;x=ae(x.line,Math.max(0,Math.round((d-fc(e.display).left)/qi(e.display))-M))}return x}function _i(e,r){if(r>=e.display.viewTo||(r-=e.display.viewFrom,r<0))return null;for(var l=e.display.view,a=0;a<l.length;a++)if(r-=l[a].size,r<0)return a}function Vt(e,r,l,a){r==null&&(r=e.doc.first),l==null&&(l=e.doc.first+e.doc.size),a||(a=0);var c=e.display;if(a&&l<c.viewTo&&(c.updateLineNumbers==null||c.updateLineNumbers>r)&&(c.updateLineNumbers=r),e.curOp.viewChanged=!0,r>=c.viewTo)Wn&&ea(e.doc,r)<c.viewTo&&ii(e);else if(l<=c.viewFrom)Wn&&tc(e.doc,l+a)>c.viewFrom?ii(e):(c.viewFrom+=a,c.viewTo+=a);else if(r<=c.viewFrom&&l>=c.viewTo)ii(e);else if(r<=c.viewFrom){var d=js(e,l,l+a,1);d?(c.view=c.view.slice(d.index),c.viewFrom=d.lineN,c.viewTo+=a):ii(e)}else if(l>=c.viewTo){var m=js(e,r,r,-1);m?(c.view=c.view.slice(0,m.index),c.viewTo=m.lineN):ii(e)}else{var v=js(e,r,r,-1),x=js(e,l,l+a,1);v&&x?(c.view=c.view.slice(0,v.index).concat(zs(e,v.lineN,x.lineN)).concat(c.view.slice(x.index)),c.viewTo+=a):ii(e)}var w=c.externalMeasured;w&&(l<w.lineN?w.lineN+=a:r<w.lineN+w.size&&(c.externalMeasured=null))}function ni(e,r,l){e.curOp.viewChanged=!0;var a=e.display,c=e.display.externalMeasured;if(c&&r>=c.lineN&&r<c.lineN+c.size&&(a.externalMeasured=null),!(r<a.viewFrom||r>=a.viewTo)){var d=a.view[_i(e,r)];if(d.node!=null){var m=d.changes||(d.changes=[]);Z(m,l)==-1&&m.push(l)}}}function ii(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function js(e,r,l,a){var c=_i(e,r),d,m=e.display.view;if(!Wn||l==e.doc.first+e.doc.size)return{index:c,lineN:l};for(var v=e.display.viewFrom,x=0;x<c;x++)v+=m[x].size;if(v!=r){if(a>0){if(c==m.length-1)return null;d=v+m[c].size-r,c++}else d=v-r;r+=d,l+=d}for(;ea(e.doc,l)!=l;){if(c==(a<0?0:m.length-1))return null;l+=a*m[c-(a<0?1:0)].size,c+=a}return{index:c,lineN:l}}function Tp(e,r,l){var a=e.display,c=a.view;c.length==0||r>=a.viewTo||l<=a.viewFrom?(a.view=zs(e,r,l),a.viewFrom=r):(a.viewFrom>r?a.view=zs(e,r,a.viewFrom).concat(a.view):a.viewFrom<r&&(a.view=a.view.slice(_i(e,r))),a.viewFrom=r,a.viewTo<l?a.view=a.view.concat(zs(e,a.viewTo,l)):a.viewTo>l&&(a.view=a.view.slice(0,_i(e,l)))),a.viewTo=l}function Cc(e){for(var r=e.display.view,l=0,a=0;a<r.length;a++){var c=r[a];!c.hidden&&(!c.node||c.changes)&&++l}return l}function Ar(e){e.display.input.showSelection(e.display.input.prepareSelection())}function Tc(e,r){r===void 0&&(r=!0);var l=e.doc,a={},c=a.cursors=document.createDocumentFragment(),d=a.selection=document.createDocumentFragment(),m=e.options.$customCursor;m&&(r=!0);for(var v=0;v<l.sel.ranges.length;v++)if(!(!r&&v==l.sel.primIndex)){var x=l.sel.ranges[v];if(!(x.from().line>=e.display.viewTo||x.to().line<e.display.viewFrom)){var w=x.empty();if(m){var M=m(e,x);M&&pa(e,M,c)}else(w||e.options.showCursorWhenSelecting)&&pa(e,x.head,c);w||Lp(e,x,d)}}return a}function pa(e,r,l){var a=_n(e,r,"div",null,null,!e.options.singleCursorHeightPerLine),c=l.appendChild(F("div","Â ","CodeMirror-cursor"));if(c.style.left=a.left+"px",c.style.top=a.top+"px",c.style.height=Math.max(0,a.bottom-a.top)*e.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(e.getWrapperElement().className)){var d=$s(e,r,"div",null,null),m=d.right-d.left;c.style.width=(m>0?m:e.defaultCharWidth())+"px"}if(a.other){var v=l.appendChild(F("div","Â ","CodeMirror-cursor CodeMirror-secondarycursor"));v.style.display="",v.style.left=a.other.left+"px",v.style.top=a.other.top+"px",v.style.height=(a.other.bottom-a.other.top)*.85+"px"}}function Vs(e,r){return e.top-r.top||e.left-r.left}function Lp(e,r,l){var a=e.display,c=e.doc,d=document.createDocumentFragment(),m=fc(e.display),v=m.left,x=Math.max(a.sizerWidth,yi(e)-a.sizer.offsetLeft)-m.right,w=c.direction=="ltr";function M(ge,xe,Oe,Le){xe<0&&(xe=0),xe=Math.round(xe),Le=Math.round(Le),d.appendChild(F("div",null,"CodeMirror-selected","position: absolute; left: "+ge+`px;
                             top: `+xe+"px; width: "+(Oe??x-ge)+`px;
                             height: `+(Le-xe)+"px"))}function P(ge,xe,Oe){var Le=Se(c,ge),We=Le.text.length,st,Lt;function ft(yt,qt){return $s(e,ae(ge,yt),"div",Le,qt)}function Qt(yt,qt,Mt){var kt=kc(e,Le,null,yt),bt=qt=="ltr"==(Mt=="after")?"left":"right",dt=Mt=="after"?kt.begin:kt.end-(/\s/.test(Le.text.charAt(kt.end-1))?2:1);return ft(dt,bt)[bt]}var Xt=Y(Le,c.direction);return W(Xt,xe||0,Oe??We,function(yt,qt,Mt,kt){var bt=Mt=="ltr",dt=ft(yt,bt?"left":"right"),Gt=ft(qt-1,bt?"right":"left"),ar=xe==null&&yt==0,ci=Oe==null&&qt==We,Rt=kt==0,Pn=!Xt||kt==Xt.length-1;if(Gt.top-dt.top<=3){var Nt=(w?ar:ci)&&Rt,za=(w?ci:ar)&&Pn,jn=Nt?v:(bt?dt:Gt).left,Ti=za?x:(bt?Gt:dt).right;M(jn,dt.top,Ti-jn,dt.bottom)}else{var Li,zt,lr,Ba;bt?(Li=w&&ar&&Rt?v:dt.left,zt=w?x:Qt(yt,Mt,"before"),lr=w?v:Qt(qt,Mt,"after"),Ba=w&&ci&&Pn?x:Gt.right):(Li=w?Qt(yt,Mt,"before"):v,zt=!w&&ar&&Rt?x:dt.right,lr=!w&&ci&&Pn?v:Gt.left,Ba=w?Qt(qt,Mt,"after"):x),M(Li,dt.top,zt-Li,dt.bottom),dt.bottom<Gt.top&&M(v,dt.bottom,null,Gt.top),M(lr,Gt.top,Ba-lr,Gt.bottom)}(!st||Vs(dt,st)<0)&&(st=dt),Vs(Gt,st)<0&&(st=Gt),(!Lt||Vs(dt,Lt)<0)&&(Lt=dt),Vs(Gt,Lt)<0&&(Lt=Gt)}),{start:st,end:Lt}}var z=r.from(),H=r.to();if(z.line==H.line)P(z.line,z.ch,H.ch);else{var q=Se(c,z.line),ie=Se(c,H.line),ue=xn(q)==xn(ie),pe=P(z.line,z.ch,ue?q.text.length+1:null).end,ve=P(H.line,ue?0:null,H.ch).start;ue&&(pe.top<ve.top-2?(M(pe.right,pe.top,null,pe.bottom),M(v,ve.top,ve.left,ve.bottom)):M(pe.right,pe.top,ve.left-pe.right,pe.bottom)),pe.bottom<ve.top&&M(v,pe.bottom,null,ve.top)}l.appendChild(d)}function ga(e){if(e.state.focused){var r=e.display;clearInterval(r.blinker);var l=!0;r.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?r.blinker=setInterval(function(){e.hasFocus()||Gi(e),r.cursorDiv.style.visibility=(l=!l)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(r.cursorDiv.style.visibility="hidden")}}function Lc(e){e.hasFocus()||(e.display.input.focus(),e.state.focused||va(e))}function ma(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,e.state.focused&&Gi(e))},100)}function va(e,r){e.state.delayingBlurEvent&&!e.state.draggingText&&(e.state.delayingBlurEvent=!1),e.options.readOnly!="nocursor"&&(e.state.focused||(Pe(e,"focus",e,r),e.state.focused=!0,qe(e.display.wrapper,"CodeMirror-focused"),!e.curOp&&e.display.selForContextMenu!=e.doc.sel&&(e.display.input.reset(),b&&setTimeout(function(){return e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),ga(e))}function Gi(e,r){e.state.delayingBlurEvent||(e.state.focused&&(Pe(e,"blur",e,r),e.state.focused=!1,se(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function Ks(e){for(var r=e.display,l=r.lineDiv.offsetTop,a=Math.max(0,r.scroller.getBoundingClientRect().top),c=r.lineDiv.getBoundingClientRect().top,d=0,m=0;m<r.view.length;m++){var v=r.view[m],x=e.options.lineWrapping,w=void 0,M=0;if(!v.hidden){if(c+=v.line.height,p&&g<8){var P=v.node.offsetTop+v.node.offsetHeight;w=P-l,l=P}else{var z=v.node.getBoundingClientRect();w=z.bottom-z.top,!x&&v.text.firstChild&&(M=v.text.firstChild.getBoundingClientRect().right-z.left-1)}var H=v.line.height-w;if((H>.005||H<-.005)&&(c<a&&(d-=H),Zt(v.line,w),Nc(v.line),v.rest))for(var q=0;q<v.rest.length;q++)Nc(v.rest[q]);if(M>e.display.sizerWidth){var ie=Math.ceil(M/qi(e.display));ie>e.display.maxLineLength&&(e.display.maxLineLength=ie,e.display.maxLine=v.line,e.display.maxLineChanged=!0)}}}Math.abs(d)>2&&(r.scroller.scrollTop+=d)}function Nc(e){if(e.widgets)for(var r=0;r<e.widgets.length;++r){var l=e.widgets[r],a=l.node.parentNode;a&&(l.height=a.offsetHeight)}}function Xs(e,r,l){var a=l&&l.top!=null?Math.max(0,l.top):e.scroller.scrollTop;a=Math.floor(a-Bs(e));var c=l&&l.bottom!=null?l.bottom:a+e.wrapper.clientHeight,d=Ln(r,a),m=Ln(r,c);if(l&&l.ensure){var v=l.ensure.from.line,x=l.ensure.to.line;v<d?(d=v,m=Ln(r,zn(Se(r,v))+e.wrapper.clientHeight)):Math.min(x,r.lastLine())>=m&&(d=Ln(r,zn(Se(r,x))-e.wrapper.clientHeight),m=x)}return{from:d,to:Math.max(m,d+1)}}function Np(e,r){if(!ot(e,"scrollCursorIntoView")){var l=e.display,a=l.sizer.getBoundingClientRect(),c=null;if(r.top+a.top<0?c=!0:r.bottom+a.top>(window.innerHeight||document.documentElement.clientHeight)&&(c=!1),c!=null&&!N){var d=F("div","â€‹",null,`position: absolute;
                         top: `+(r.top-l.viewOffset-Bs(e.display))+`px;
                         height: `+(r.bottom-r.top+Mn(e)+l.barHeight)+`px;
                         left: `+r.left+"px; width: "+Math.max(2,r.right-r.left)+"px;");e.display.lineSpace.appendChild(d),d.scrollIntoView(c),e.display.lineSpace.removeChild(d)}}}function Mp(e,r,l,a){a==null&&(a=0);var c;!e.options.lineWrapping&&r==l&&(l=r.sticky=="before"?ae(r.line,r.ch+1,"before"):r,r=r.ch?ae(r.line,r.sticky=="before"?r.ch-1:r.ch,"after"):r);for(var d=0;d<5;d++){var m=!1,v=_n(e,r),x=!l||l==r?v:_n(e,l);c={left:Math.min(v.left,x.left),top:Math.min(v.top,x.top)-a,right:Math.max(v.left,x.left),bottom:Math.max(v.bottom,x.bottom)+a};var w=ya(e,c),M=e.doc.scrollTop,P=e.doc.scrollLeft;if(w.scrollTop!=null&&(Er(e,w.scrollTop),Math.abs(e.doc.scrollTop-M)>1&&(m=!0)),w.scrollLeft!=null&&(wi(e,w.scrollLeft),Math.abs(e.doc.scrollLeft-P)>1&&(m=!0)),!m)break}return c}function Dp(e,r){var l=ya(e,r);l.scrollTop!=null&&Er(e,l.scrollTop),l.scrollLeft!=null&&wi(e,l.scrollLeft)}function ya(e,r){var l=e.display,a=Xi(e.display);r.top<0&&(r.top=0);var c=e.curOp&&e.curOp.scrollTop!=null?e.curOp.scrollTop:l.scroller.scrollTop,d=sa(e),m={};r.bottom-r.top>d&&(r.bottom=r.top+d);var v=e.doc.height+ra(l),x=r.top<a,w=r.bottom>v-a;if(r.top<c)m.scrollTop=x?0:r.top;else if(r.bottom>c+d){var M=Math.min(r.top,(w?v:r.bottom)-d);M!=c&&(m.scrollTop=M)}var P=e.options.fixedGutter?0:l.gutters.offsetWidth,z=e.curOp&&e.curOp.scrollLeft!=null?e.curOp.scrollLeft:l.scroller.scrollLeft-P,H=yi(e)-l.gutters.offsetWidth,q=r.right-r.left>H;return q&&(r.right=r.left+H),r.left<10?m.scrollLeft=0:r.left<z?m.scrollLeft=Math.max(0,r.left+P-(q?0:10)):r.right>H+z-3&&(m.scrollLeft=r.right+(q?0:10)-H),m}function ba(e,r){r!=null&&(qs(e),e.curOp.scrollTop=(e.curOp.scrollTop==null?e.doc.scrollTop:e.curOp.scrollTop)+r)}function Yi(e){qs(e);var r=e.getCursor();e.curOp.scrollToPos={from:r,to:r,margin:e.options.cursorScrollMargin}}function Ir(e,r,l){(r!=null||l!=null)&&qs(e),r!=null&&(e.curOp.scrollLeft=r),l!=null&&(e.curOp.scrollTop=l)}function Pp(e,r){qs(e),e.curOp.scrollToPos=r}function qs(e){var r=e.curOp.scrollToPos;if(r){e.curOp.scrollToPos=null;var l=_c(e,r.from),a=_c(e,r.to);Mc(e,l,a,r.margin)}}function Mc(e,r,l,a){var c=ya(e,{left:Math.min(r.left,l.left),top:Math.min(r.top,l.top)-a,right:Math.max(r.right,l.right),bottom:Math.max(r.bottom,l.bottom)+a});Ir(e,c.scrollLeft,c.scrollTop)}function Er(e,r){Math.abs(e.doc.scrollTop-r)<2||(o||_a(e,{top:r}),Dc(e,r,!0),o&&_a(e),Hr(e,100))}function Dc(e,r,l){r=Math.max(0,Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,r)),!(e.display.scroller.scrollTop==r&&!l)&&(e.doc.scrollTop=r,e.display.scrollbars.setScrollTop(r),e.display.scroller.scrollTop!=r&&(e.display.scroller.scrollTop=r))}function wi(e,r,l,a){r=Math.max(0,Math.min(r,e.display.scroller.scrollWidth-e.display.scroller.clientWidth)),!((l?r==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-r)<2)&&!a)&&(e.doc.scrollLeft=r,Ec(e),e.display.scroller.scrollLeft!=r&&(e.display.scroller.scrollLeft=r),e.display.scrollbars.setScrollLeft(r))}function Rr(e){var r=e.display,l=r.gutters.offsetWidth,a=Math.round(e.doc.height+ra(e.display));return{clientHeight:r.scroller.clientHeight,viewHeight:r.wrapper.clientHeight,scrollWidth:r.scroller.scrollWidth,clientWidth:r.scroller.clientWidth,viewWidth:r.wrapper.clientWidth,barLeft:e.options.fixedGutter?l:0,docHeight:a,scrollHeight:a+Mn(e)+r.barHeight,nativeBarWidth:r.nativeBarWidth,gutterWidth:l}}var ki=function(e,r,l){this.cm=l;var a=this.vert=F("div",[F("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),c=this.horiz=F("div",[F("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");a.tabIndex=c.tabIndex=-1,e(a),e(c),ne(a,"scroll",function(){a.clientHeight&&r(a.scrollTop,"vertical")}),ne(c,"scroll",function(){c.clientWidth&&r(c.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,p&&g<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};ki.prototype.update=function(e){var r=e.scrollWidth>e.clientWidth+1,l=e.scrollHeight>e.clientHeight+1,a=e.nativeBarWidth;if(l){this.vert.style.display="block",this.vert.style.bottom=r?a+"px":"0";var c=e.viewHeight-(r?a:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+c)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(r){this.horiz.style.display="block",this.horiz.style.right=l?a+"px":"0",this.horiz.style.left=e.barLeft+"px";var d=e.viewWidth-e.barLeft-(l?a:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+d)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(a==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:l?a:0,bottom:r?a:0}},ki.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},ki.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},ki.prototype.zeroWidthHack=function(){var e=K&&!O?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new U,this.disableVert=new U},ki.prototype.enableZeroWidthBar=function(e,r,l){e.style.pointerEvents="auto";function a(){var c=e.getBoundingClientRect(),d=l=="vert"?document.elementFromPoint(c.right-1,(c.top+c.bottom)/2):document.elementFromPoint((c.right+c.left)/2,c.bottom-1);d!=e?e.style.pointerEvents="none":r.set(1e3,a)}r.set(1e3,a)},ki.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var Fr=function(){};Fr.prototype.update=function(){return{bottom:0,right:0}},Fr.prototype.setScrollLeft=function(){},Fr.prototype.setScrollTop=function(){},Fr.prototype.clear=function(){};function Zi(e,r){r||(r=Rr(e));var l=e.display.barWidth,a=e.display.barHeight;Pc(e,r);for(var c=0;c<4&&l!=e.display.barWidth||a!=e.display.barHeight;c++)l!=e.display.barWidth&&e.options.lineWrapping&&Ks(e),Pc(e,Rr(e)),l=e.display.barWidth,a=e.display.barHeight}function Pc(e,r){var l=e.display,a=l.scrollbars.update(r);l.sizer.style.paddingRight=(l.barWidth=a.right)+"px",l.sizer.style.paddingBottom=(l.barHeight=a.bottom)+"px",l.heightForcer.style.borderBottom=a.bottom+"px solid transparent",a.right&&a.bottom?(l.scrollbarFiller.style.display="block",l.scrollbarFiller.style.height=a.bottom+"px",l.scrollbarFiller.style.width=a.right+"px"):l.scrollbarFiller.style.display="",a.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(l.gutterFiller.style.display="block",l.gutterFiller.style.height=a.bottom+"px",l.gutterFiller.style.width=r.gutterWidth+"px"):l.gutterFiller.style.display=""}var Oc={native:ki,null:Fr};function Ac(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&se(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new Oc[e.options.scrollbarStyle](function(r){e.display.wrapper.insertBefore(r,e.display.scrollbarFiller),ne(r,"mousedown",function(){e.state.focused&&setTimeout(function(){return e.display.input.focus()},0)}),r.setAttribute("cm-not-content","true")},function(r,l){l=="horizontal"?wi(e,r):Er(e,r)},e),e.display.scrollbars.addClass&&qe(e.display.wrapper,e.display.scrollbars.addClass)}var Op=0;function Si(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Op,markArrays:null},cp(e.curOp)}function Ci(e){var r=e.curOp;r&&fp(r,function(l){for(var a=0;a<l.ops.length;a++)l.ops[a].cm.curOp=null;Ap(l)})}function Ap(e){for(var r=e.ops,l=0;l<r.length;l++)Ip(r[l]);for(var a=0;a<r.length;a++)Ep(r[a]);for(var c=0;c<r.length;c++)Rp(r[c]);for(var d=0;d<r.length;d++)Fp(r[d]);for(var m=0;m<r.length;m++)Hp(r[m])}function Ip(e){var r=e.cm,l=r.display;zp(r),e.updateMaxLine&&na(r),e.mustUpdate=e.viewChanged||e.forceUpdate||e.scrollTop!=null||e.scrollToPos&&(e.scrollToPos.from.line<l.viewFrom||e.scrollToPos.to.line>=l.viewTo)||l.maxLineChanged&&r.options.lineWrapping,e.update=e.mustUpdate&&new Gs(r,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function Ep(e){e.updatedDisplay=e.mustUpdate&&xa(e.cm,e.update)}function Rp(e){var r=e.cm,l=r.display;e.updatedDisplay&&Ks(r),e.barMeasure=Rr(r),l.maxLineChanged&&!r.options.lineWrapping&&(e.adjustWidthTo=dc(r,l.maxLine,l.maxLine.text.length).left+3,r.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(l.scroller.clientWidth,l.sizer.offsetLeft+e.adjustWidthTo+Mn(r)+r.display.barWidth),e.maxScrollLeft=Math.max(0,l.sizer.offsetLeft+e.adjustWidthTo-yi(r))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=l.input.prepareSelection())}function Fp(e){var r=e.cm;e.adjustWidthTo!=null&&(r.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<r.doc.scrollLeft&&wi(r,Math.min(r.display.scroller.scrollLeft,e.maxScrollLeft),!0),r.display.maxLineChanged=!1);var l=e.focus&&e.focus==$e();e.preparedSelection&&r.display.input.showSelection(e.preparedSelection,l),(e.updatedDisplay||e.startHeight!=r.doc.height)&&Zi(r,e.barMeasure),e.updatedDisplay&&ka(r,e.barMeasure),e.selectionChanged&&ga(r),r.state.focused&&e.updateInput&&r.display.input.reset(e.typing),l&&Lc(e.cm)}function Hp(e){var r=e.cm,l=r.display,a=r.doc;if(e.updatedDisplay&&Ic(r,e.update),l.wheelStartX!=null&&(e.scrollTop!=null||e.scrollLeft!=null||e.scrollToPos)&&(l.wheelStartX=l.wheelStartY=null),e.scrollTop!=null&&Dc(r,e.scrollTop,e.forceScroll),e.scrollLeft!=null&&wi(r,e.scrollLeft,!0,!0),e.scrollToPos){var c=Mp(r,ye(a,e.scrollToPos.from),ye(a,e.scrollToPos.to),e.scrollToPos.margin);Np(r,c)}var d=e.maybeHiddenMarkers,m=e.maybeUnhiddenMarkers;if(d)for(var v=0;v<d.length;++v)d[v].lines.length||Pe(d[v],"hide");if(m)for(var x=0;x<m.length;++x)m[x].lines.length&&Pe(m[x],"unhide");l.wrapper.offsetHeight&&(a.scrollTop=r.display.scroller.scrollTop),e.changeObjs&&Pe(r,"changes",r,e.changeObjs),e.update&&e.update.finish()}function Jt(e,r){if(e.curOp)return r();Si(e);try{return r()}finally{Ci(e)}}function Ct(e,r){return function(){if(e.curOp)return r.apply(e,arguments);Si(e);try{return r.apply(e,arguments)}finally{Ci(e)}}}function Wt(e){return function(){if(this.curOp)return e.apply(this,arguments);Si(this);try{return e.apply(this,arguments)}finally{Ci(this)}}}function Tt(e){return function(){var r=this.cm;if(!r||r.curOp)return e.apply(this,arguments);Si(r);try{return e.apply(this,arguments)}finally{Ci(r)}}}function Hr(e,r){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(r,ke(Wp,e))}function Wp(e){var r=e.doc;if(!(r.highlightFrontier>=e.display.viewTo)){var l=+new Date+e.options.workTime,a=Lr(e,r.highlightFrontier),c=[];r.iter(a.line,Math.min(r.first+r.size,e.display.viewTo+500),function(d){if(a.line>=e.display.viewFrom){var m=d.styles,v=d.text.length>e.options.maxHighlightLength?an(r.mode,a.state):null,x=Bl(e,d,a,!0);v&&(a.state=v),d.styles=x.styles;var w=d.styleClasses,M=x.classes;M?d.styleClasses=M:w&&(d.styleClasses=null);for(var P=!m||m.length!=d.styles.length||w!=M&&(!w||!M||w.bgClass!=M.bgClass||w.textClass!=M.textClass),z=0;!P&&z<m.length;++z)P=m[z]!=d.styles[z];P&&c.push(a.line),d.stateAfter=a.save(),a.nextLine()}else d.text.length<=e.options.maxHighlightLength&&Yo(e,d.text,a),d.stateAfter=a.line%5==0?a.save():null,a.nextLine();if(+new Date>l)return Hr(e,e.options.workDelay),!0}),r.highlightFrontier=a.line,r.modeFrontier=Math.max(r.modeFrontier,a.line),c.length&&Jt(e,function(){for(var d=0;d<c.length;d++)ni(e,c[d],"text")})}}var Gs=function(e,r,l){var a=e.display;this.viewport=r,this.visible=Xs(a,e.doc,r),this.editorIsHidden=!a.wrapper.offsetWidth,this.wrapperHeight=a.wrapper.clientHeight,this.wrapperWidth=a.wrapper.clientWidth,this.oldDisplayWidth=yi(e),this.force=l,this.dims=fa(e),this.events=[]};Gs.prototype.signal=function(e,r){et(e,r)&&this.events.push(arguments)},Gs.prototype.finish=function(){for(var e=0;e<this.events.length;e++)Pe.apply(null,this.events[e])};function zp(e){var r=e.display;!r.scrollbarsClipped&&r.scroller.offsetWidth&&(r.nativeBarWidth=r.scroller.offsetWidth-r.scroller.clientWidth,r.heightForcer.style.height=Mn(e)+"px",r.sizer.style.marginBottom=-r.nativeBarWidth+"px",r.sizer.style.borderRightWidth=Mn(e)+"px",r.scrollbarsClipped=!0)}function Bp(e){if(e.hasFocus())return null;var r=$e();if(!r||!Me(e.display.lineDiv,r))return null;var l={activeElt:r};if(window.getSelection){var a=window.getSelection();a.anchorNode&&a.extend&&Me(e.display.lineDiv,a.anchorNode)&&(l.anchorNode=a.anchorNode,l.anchorOffset=a.anchorOffset,l.focusNode=a.focusNode,l.focusOffset=a.focusOffset)}return l}function Up(e){if(!(!e||!e.activeElt||e.activeElt==$e())&&(e.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(e.activeElt.nodeName)&&e.anchorNode&&Me(document.body,e.anchorNode)&&Me(document.body,e.focusNode))){var r=window.getSelection(),l=document.createRange();l.setEnd(e.anchorNode,e.anchorOffset),l.collapse(!1),r.removeAllRanges(),r.addRange(l),r.extend(e.focusNode,e.focusOffset)}}function xa(e,r){var l=e.display,a=e.doc;if(r.editorIsHidden)return ii(e),!1;if(!r.force&&r.visible.from>=l.viewFrom&&r.visible.to<=l.viewTo&&(l.updateLineNumbers==null||l.updateLineNumbers>=l.viewTo)&&l.renderedView==l.view&&Cc(e)==0)return!1;Rc(e)&&(ii(e),r.dims=fa(e));var c=a.first+a.size,d=Math.max(r.visible.from-e.options.viewportMargin,a.first),m=Math.min(c,r.visible.to+e.options.viewportMargin);l.viewFrom<d&&d-l.viewFrom<20&&(d=Math.max(a.first,l.viewFrom)),l.viewTo>m&&l.viewTo-m<20&&(m=Math.min(c,l.viewTo)),Wn&&(d=ea(e.doc,d),m=tc(e.doc,m));var v=d!=l.viewFrom||m!=l.viewTo||l.lastWrapHeight!=r.wrapperHeight||l.lastWrapWidth!=r.wrapperWidth;Tp(e,d,m),l.viewOffset=zn(Se(e.doc,l.viewFrom)),e.display.mover.style.top=l.viewOffset+"px";var x=Cc(e);if(!v&&x==0&&!r.force&&l.renderedView==l.view&&(l.updateLineNumbers==null||l.updateLineNumbers>=l.viewTo))return!1;var w=Bp(e);return x>4&&(l.lineDiv.style.display="none"),$p(e,l.updateLineNumbers,r.dims),x>4&&(l.lineDiv.style.display=""),l.renderedView=l.view,Up(w),le(l.cursorDiv),le(l.selectionDiv),l.gutters.style.height=l.sizer.style.minHeight=0,v&&(l.lastWrapHeight=r.wrapperHeight,l.lastWrapWidth=r.wrapperWidth,Hr(e,400)),l.updateLineNumbers=null,!0}function Ic(e,r){for(var l=r.viewport,a=!0;;a=!1){if(!a||!e.options.lineWrapping||r.oldDisplayWidth==yi(e)){if(l&&l.top!=null&&(l={top:Math.min(e.doc.height+ra(e.display)-sa(e),l.top)}),r.visible=Xs(e.display,e.doc,l),r.visible.from>=e.display.viewFrom&&r.visible.to<=e.display.viewTo)break}else a&&(r.visible=Xs(e.display,e.doc,l));if(!xa(e,r))break;Ks(e);var c=Rr(e);Ar(e),Zi(e,c),ka(e,c),r.force=!1}r.signal(e,"update",e),(e.display.viewFrom!=e.display.reportedViewFrom||e.display.viewTo!=e.display.reportedViewTo)&&(r.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function _a(e,r){var l=new Gs(e,r);if(xa(e,l)){Ks(e),Ic(e,l);var a=Rr(e);Ar(e),Zi(e,a),ka(e,a),l.finish()}}function $p(e,r,l){var a=e.display,c=e.options.lineNumbers,d=a.lineDiv,m=d.firstChild;function v(q){var ie=q.nextSibling;return b&&K&&e.display.currentWheelTarget==q?q.style.display="none":q.parentNode.removeChild(q),ie}for(var x=a.view,w=a.viewFrom,M=0;M<x.length;M++){var P=x[M];if(!P.hidden)if(!P.node||P.node.parentNode!=d){var z=mp(e,P,w,l);d.insertBefore(z,m)}else{for(;m!=P.node;)m=v(m);var H=c&&r!=null&&r<=w&&P.lineNumber;P.changes&&(Z(P.changes,"gutter")>-1&&(H=!1),oc(e,P,w,l)),H&&(le(P.lineNumber),P.lineNumber.appendChild(document.createTextNode(Tr(e.options,w)))),m=P.node.nextSibling}w+=P.size}for(;m;)m=v(m)}function wa(e){var r=e.gutters.offsetWidth;e.sizer.style.marginLeft=r+"px",St(e,"gutterChanged",e)}function ka(e,r){e.display.sizer.style.minHeight=r.docHeight+"px",e.display.heightForcer.style.top=r.docHeight+"px",e.display.gutters.style.height=r.docHeight+e.display.barHeight+Mn(e)+"px"}function Ec(e){var r=e.display,l=r.view;if(!(!r.alignWidgets&&(!r.gutters.firstChild||!e.options.fixedGutter))){for(var a=ha(r)-r.scroller.scrollLeft+e.doc.scrollLeft,c=r.gutters.offsetWidth,d=a+"px",m=0;m<l.length;m++)if(!l[m].hidden){e.options.fixedGutter&&(l[m].gutter&&(l[m].gutter.style.left=d),l[m].gutterBackground&&(l[m].gutterBackground.style.left=d));var v=l[m].alignable;if(v)for(var x=0;x<v.length;x++)v[x].style.left=d}e.options.fixedGutter&&(r.gutters.style.left=a+c+"px")}}function Rc(e){if(!e.options.lineNumbers)return!1;var r=e.doc,l=Tr(e.options,r.first+r.size-1),a=e.display;if(l.length!=a.lineNumChars){var c=a.measure.appendChild(F("div",[F("div",l)],"CodeMirror-linenumber CodeMirror-gutter-elt")),d=c.firstChild.offsetWidth,m=c.offsetWidth-d;return a.lineGutter.style.width="",a.lineNumInnerWidth=Math.max(d,a.lineGutter.offsetWidth-m)+1,a.lineNumWidth=a.lineNumInnerWidth+m,a.lineNumChars=a.lineNumInnerWidth?l.length:-1,a.lineGutter.style.width=a.lineNumWidth+"px",wa(e.display),!0}return!1}function Sa(e,r){for(var l=[],a=!1,c=0;c<e.length;c++){var d=e[c],m=null;if(typeof d!="string"&&(m=d.style,d=d.className),d=="CodeMirror-linenumbers")if(r)a=!0;else continue;l.push({className:d,style:m})}return r&&!a&&l.push({className:"CodeMirror-linenumbers",style:null}),l}function Fc(e){var r=e.gutters,l=e.gutterSpecs;le(r),e.lineGutter=null;for(var a=0;a<l.length;++a){var c=l[a],d=c.className,m=c.style,v=r.appendChild(F("div",null,"CodeMirror-gutter "+d));m&&(v.style.cssText=m),d=="CodeMirror-linenumbers"&&(e.lineGutter=v,v.style.width=(e.lineNumWidth||1)+"px")}r.style.display=l.length?"":"none",wa(e)}function Wr(e){Fc(e.display),Vt(e),Ec(e)}function jp(e,r,l,a){var c=this;this.input=l,c.scrollbarFiller=F("div",null,"CodeMirror-scrollbar-filler"),c.scrollbarFiller.setAttribute("cm-not-content","true"),c.gutterFiller=F("div",null,"CodeMirror-gutter-filler"),c.gutterFiller.setAttribute("cm-not-content","true"),c.lineDiv=S("div",null,"CodeMirror-code"),c.selectionDiv=F("div",null,null,"position: relative; z-index: 1"),c.cursorDiv=F("div",null,"CodeMirror-cursors"),c.measure=F("div",null,"CodeMirror-measure"),c.lineMeasure=F("div",null,"CodeMirror-measure"),c.lineSpace=S("div",[c.measure,c.lineMeasure,c.selectionDiv,c.cursorDiv,c.lineDiv],null,"position: relative; outline: none");var d=S("div",[c.lineSpace],"CodeMirror-lines");c.mover=F("div",[d],null,"position: relative"),c.sizer=F("div",[c.mover],"CodeMirror-sizer"),c.sizerWidth=null,c.heightForcer=F("div",null,null,"position: absolute; height: "+te+"px; width: 1px;"),c.gutters=F("div",null,"CodeMirror-gutters"),c.lineGutter=null,c.scroller=F("div",[c.sizer,c.heightForcer,c.gutters],"CodeMirror-scroll"),c.scroller.setAttribute("tabIndex","-1"),c.wrapper=F("div",[c.scrollbarFiller,c.gutterFiller,c.scroller],"CodeMirror"),c.wrapper.setAttribute("translate","no"),p&&g<8&&(c.gutters.style.zIndex=-1,c.scroller.style.paddingRight=0),!b&&!(o&&j)&&(c.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(c.wrapper):e(c.wrapper)),c.viewFrom=c.viewTo=r.first,c.reportedViewFrom=c.reportedViewTo=r.first,c.view=[],c.renderedView=null,c.externalMeasured=null,c.viewOffset=0,c.lastWrapHeight=c.lastWrapWidth=0,c.updateLineNumbers=null,c.nativeBarWidth=c.barHeight=c.barWidth=0,c.scrollbarsClipped=!1,c.lineNumWidth=c.lineNumInnerWidth=c.lineNumChars=null,c.alignWidgets=!1,c.cachedCharWidth=c.cachedTextHeight=c.cachedPaddingH=null,c.maxLine=null,c.maxLineLength=0,c.maxLineChanged=!1,c.wheelDX=c.wheelDY=c.wheelStartX=c.wheelStartY=null,c.shift=!1,c.selForContextMenu=null,c.activeTouch=null,c.gutterSpecs=Sa(a.gutters,a.lineNumbers),Fc(c),l.init(c)}var Ys=0,Un=null;p?Un=-.53:o?Un=15:T?Un=-.7:D&&(Un=-1/3);function Hc(e){var r=e.wheelDeltaX,l=e.wheelDeltaY;return r==null&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(r=e.detail),l==null&&e.detail&&e.axis==e.VERTICAL_AXIS?l=e.detail:l==null&&(l=e.wheelDelta),{x:r,y:l}}function Vp(e){var r=Hc(e);return r.x*=Un,r.y*=Un,r}function Wc(e,r){var l=Hc(r),a=l.x,c=l.y,d=Un;r.deltaMode===0&&(a=r.deltaX,c=r.deltaY,d=1);var m=e.display,v=m.scroller,x=v.scrollWidth>v.clientWidth,w=v.scrollHeight>v.clientHeight;if(a&&x||c&&w){if(c&&K&&b){e:for(var M=r.target,P=m.view;M!=v;M=M.parentNode)for(var z=0;z<P.length;z++)if(P[z].node==M){e.display.currentWheelTarget=M;break e}}if(a&&!o&&!L&&d!=null){c&&w&&Er(e,Math.max(0,v.scrollTop+c*d)),wi(e,Math.max(0,v.scrollLeft+a*d)),(!c||c&&w)&&At(r),m.wheelStartX=null;return}if(c&&d!=null){var H=c*d,q=e.doc.scrollTop,ie=q+m.wrapper.clientHeight;H<0?q=Math.max(0,q+H-50):ie=Math.min(e.doc.height,ie+H+50),_a(e,{top:q,bottom:ie})}Ys<20&&r.deltaMode!==0&&(m.wheelStartX==null?(m.wheelStartX=v.scrollLeft,m.wheelStartY=v.scrollTop,m.wheelDX=a,m.wheelDY=c,setTimeout(function(){if(m.wheelStartX!=null){var ue=v.scrollLeft-m.wheelStartX,pe=v.scrollTop-m.wheelStartY,ve=pe&&m.wheelDY&&pe/m.wheelDY||ue&&m.wheelDX&&ue/m.wheelDX;m.wheelStartX=m.wheelStartY=null,ve&&(Un=(Un*Ys+ve)/(Ys+1),++Ys)}},200)):(m.wheelDX+=a,m.wheelDY+=c))}}var cn=function(e,r){this.ranges=e,this.primIndex=r};cn.prototype.primary=function(){return this.ranges[this.primIndex]},cn.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var r=0;r<this.ranges.length;r++){var l=this.ranges[r],a=e.ranges[r];if(!A(l.anchor,a.anchor)||!A(l.head,a.head))return!1}return!0},cn.prototype.deepCopy=function(){for(var e=[],r=0;r<this.ranges.length;r++)e[r]=new Qe(J(this.ranges[r].anchor),J(this.ranges[r].head));return new cn(e,this.primIndex)},cn.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},cn.prototype.contains=function(e,r){r||(r=e);for(var l=0;l<this.ranges.length;l++){var a=this.ranges[l];if(k(r,a.from())>=0&&k(e,a.to())<=0)return l}return-1};var Qe=function(e,r){this.anchor=e,this.head=r};Qe.prototype.from=function(){return Re(this.anchor,this.head)},Qe.prototype.to=function(){return ce(this.anchor,this.head)},Qe.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function wn(e,r,l){var a=e&&e.options.selectionsMayTouch,c=r[l];r.sort(function(z,H){return k(z.from(),H.from())}),l=Z(r,c);for(var d=1;d<r.length;d++){var m=r[d],v=r[d-1],x=k(v.to(),m.from());if(a&&!m.empty()?x>0:x>=0){var w=Re(v.from(),m.from()),M=ce(v.to(),m.to()),P=v.empty()?m.from()==m.head:v.from()==v.head;d<=l&&--l,r.splice(--d,2,new Qe(P?M:w,P?w:M))}}return new cn(r,l)}function ri(e,r){return new cn([new Qe(e,r||e)],0)}function si(e){return e.text?ae(e.from.line+e.text.length-1,fe(e.text).length+(e.text.length==1?e.from.ch:0)):e.to}function zc(e,r){if(k(e,r.from)<0)return e;if(k(e,r.to)<=0)return si(r);var l=e.line+r.text.length-(r.to.line-r.from.line)-1,a=e.ch;return e.line==r.to.line&&(a+=si(r).ch-r.to.ch),ae(l,a)}function Ca(e,r){for(var l=[],a=0;a<e.sel.ranges.length;a++){var c=e.sel.ranges[a];l.push(new Qe(zc(c.anchor,r),zc(c.head,r)))}return wn(e.cm,l,e.sel.primIndex)}function Bc(e,r,l){return e.line==r.line?ae(l.line,e.ch-r.ch+l.ch):ae(l.line+(e.line-r.line),e.ch)}function Kp(e,r,l){for(var a=[],c=ae(e.first,0),d=c,m=0;m<r.length;m++){var v=r[m],x=Bc(v.from,c,d),w=Bc(si(v),c,d);if(c=v.to,d=w,l=="around"){var M=e.sel.ranges[m],P=k(M.head,M.anchor)<0;a[m]=new Qe(P?w:x,P?x:w)}else a[m]=new Qe(x,x)}return new cn(a,e.sel.primIndex)}function Ta(e){e.doc.mode=Ui(e.options,e.doc.modeOption),zr(e)}function zr(e){e.doc.iter(function(r){r.stateAfter&&(r.stateAfter=null),r.styles&&(r.styles=null)}),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,Hr(e,100),e.state.modeGen++,e.curOp&&Vt(e)}function Uc(e,r){return r.from.ch==0&&r.to.ch==0&&fe(r.text)==""&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function La(e,r,l,a){function c(ve){return l?l[ve]:null}function d(ve,ge,xe){ep(ve,ge,xe,a),St(ve,"change",ve,r)}function m(ve,ge){for(var xe=[],Oe=ve;Oe<ge;++Oe)xe.push(new ji(w[Oe],c(Oe),a));return xe}var v=r.from,x=r.to,w=r.text,M=Se(e,v.line),P=Se(e,x.line),z=fe(w),H=c(w.length-1),q=x.line-v.line;if(r.full)e.insert(0,m(0,w.length)),e.remove(w.length,e.size-w.length);else if(Uc(e,r)){var ie=m(0,w.length-1);d(P,P.text,H),q&&e.remove(v.line,q),ie.length&&e.insert(v.line,ie)}else if(M==P)if(w.length==1)d(M,M.text.slice(0,v.ch)+z+M.text.slice(x.ch),H);else{var ue=m(1,w.length-1);ue.push(new ji(z+M.text.slice(x.ch),H,a)),d(M,M.text.slice(0,v.ch)+w[0],c(0)),e.insert(v.line+1,ue)}else if(w.length==1)d(M,M.text.slice(0,v.ch)+w[0]+P.text.slice(x.ch),c(0)),e.remove(v.line+1,q);else{d(M,M.text.slice(0,v.ch)+w[0],c(0)),d(P,z+P.text.slice(x.ch),H);var pe=m(1,w.length-1);q>1&&e.remove(v.line+1,q-1),e.insert(v.line+1,pe)}St(e,"change",e,r)}function oi(e,r,l){function a(c,d,m){if(c.linked)for(var v=0;v<c.linked.length;++v){var x=c.linked[v];if(x.doc!=d){var w=m&&x.sharedHist;l&&!w||(r(x.doc,w),a(x.doc,c,w))}}}a(e,null,!0)}function $c(e,r){if(r.cm)throw new Error("This document is already in use.");e.doc=r,r.cm=e,da(e),Ta(e),jc(e),e.options.direction=r.direction,e.options.lineWrapping||na(e),e.options.mode=r.modeOption,Vt(e)}function jc(e){(e.doc.direction=="rtl"?qe:se)(e.display.lineDiv,"CodeMirror-rtl")}function Xp(e){Jt(e,function(){jc(e),Vt(e)})}function Zs(e){this.done=[],this.undone=[],this.undoDepth=e?e.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e?e.maxGeneration:1}function Na(e,r){var l={from:J(r.from),to:si(r),text:Tn(e,r.from,r.to)};return Xc(e,l,r.from.line,r.to.line+1),oi(e,function(a){return Xc(a,l,r.from.line,r.to.line+1)},!0),l}function Vc(e){for(;e.length;){var r=fe(e);if(r.ranges)e.pop();else break}}function qp(e,r){if(r)return Vc(e.done),fe(e.done);if(e.done.length&&!fe(e.done).ranges)return fe(e.done);if(e.done.length>1&&!e.done[e.done.length-2].ranges)return e.done.pop(),fe(e.done)}function Kc(e,r,l,a){var c=e.history;c.undone.length=0;var d=+new Date,m,v;if((c.lastOp==a||c.lastOrigin==r.origin&&r.origin&&(r.origin.charAt(0)=="+"&&c.lastModTime>d-(e.cm?e.cm.options.historyEventDelay:500)||r.origin.charAt(0)=="*"))&&(m=qp(c,c.lastOp==a)))v=fe(m.changes),k(r.from,r.to)==0&&k(r.from,v.to)==0?v.to=si(r):m.changes.push(Na(e,r));else{var x=fe(c.done);for((!x||!x.ranges)&&Js(e.sel,c.done),m={changes:[Na(e,r)],generation:c.generation},c.done.push(m);c.done.length>c.undoDepth;)c.done.shift(),c.done[0].ranges||c.done.shift()}c.done.push(l),c.generation=++c.maxGeneration,c.lastModTime=c.lastSelTime=d,c.lastOp=c.lastSelOp=a,c.lastOrigin=c.lastSelOrigin=r.origin,v||Pe(e,"historyAdded")}function Gp(e,r,l,a){var c=r.charAt(0);return c=="*"||c=="+"&&l.ranges.length==a.ranges.length&&l.somethingSelected()==a.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}function Yp(e,r,l,a){var c=e.history,d=a&&a.origin;l==c.lastSelOp||d&&c.lastSelOrigin==d&&(c.lastModTime==c.lastSelTime&&c.lastOrigin==d||Gp(e,d,fe(c.done),r))?c.done[c.done.length-1]=r:Js(r,c.done),c.lastSelTime=+new Date,c.lastSelOrigin=d,c.lastSelOp=l,a&&a.clearRedo!==!1&&Vc(c.undone)}function Js(e,r){var l=fe(r);l&&l.ranges&&l.equals(e)||r.push(e)}function Xc(e,r,l,a){var c=r["spans_"+e.id],d=0;e.iter(Math.max(e.first,l),Math.min(e.first+e.size,a),function(m){m.markedSpans&&((c||(c=r["spans_"+e.id]={}))[d]=m.markedSpans),++d})}function Zp(e){if(!e)return null;for(var r,l=0;l<e.length;++l)e[l].marker.explicitlyCleared?r||(r=e.slice(0,l)):r&&r.push(e[l]);return r?r.length?r:null:e}function Jp(e,r){var l=r["spans_"+e.id];if(!l)return null;for(var a=[],c=0;c<r.text.length;++c)a.push(Zp(l[c]));return a}function qc(e,r){var l=Jp(e,r),a=Jo(e,r);if(!l)return a;if(!a)return l;for(var c=0;c<l.length;++c){var d=l[c],m=a[c];if(d&&m)e:for(var v=0;v<m.length;++v){for(var x=m[v],w=0;w<d.length;++w)if(d[w].marker==x.marker)continue e;d.push(x)}else m&&(l[c]=m)}return l}function Ji(e,r,l){for(var a=[],c=0;c<e.length;++c){var d=e[c];if(d.ranges){a.push(l?cn.prototype.deepCopy.call(d):d);continue}var m=d.changes,v=[];a.push({changes:v});for(var x=0;x<m.length;++x){var w=m[x],M=void 0;if(v.push({from:w.from,to:w.to,text:w.text}),r)for(var P in w)(M=P.match(/^spans_(\d+)$/))&&Z(r,Number(M[1]))>-1&&(fe(v)[P]=w[P],delete w[P])}}return a}function Ma(e,r,l,a){if(a){var c=e.anchor;if(l){var d=k(r,c)<0;d!=k(l,c)<0?(c=r,r=l):d!=k(r,l)<0&&(r=l)}return new Qe(c,r)}else return new Qe(l||r,r)}function Qs(e,r,l,a,c){c==null&&(c=e.cm&&(e.cm.display.shift||e.extend)),Et(e,new cn([Ma(e.sel.primary(),r,l,c)],0),a)}function Gc(e,r,l){for(var a=[],c=e.cm&&(e.cm.display.shift||e.extend),d=0;d<e.sel.ranges.length;d++)a[d]=Ma(e.sel.ranges[d],r[d],null,c);var m=wn(e.cm,a,e.sel.primIndex);Et(e,m,l)}function Da(e,r,l,a){var c=e.sel.ranges.slice(0);c[r]=l,Et(e,wn(e.cm,c,e.sel.primIndex),a)}function Yc(e,r,l,a){Et(e,ri(r,l),a)}function Qp(e,r,l){var a={ranges:r.ranges,update:function(c){this.ranges=[];for(var d=0;d<c.length;d++)this.ranges[d]=new Qe(ye(e,c[d].anchor),ye(e,c[d].head))},origin:l&&l.origin};return Pe(e,"beforeSelectionChange",e,a),e.cm&&Pe(e.cm,"beforeSelectionChange",e.cm,a),a.ranges!=r.ranges?wn(e.cm,a.ranges,a.ranges.length-1):r}function Zc(e,r,l){var a=e.history.done,c=fe(a);c&&c.ranges?(a[a.length-1]=r,eo(e,r,l)):Et(e,r,l)}function Et(e,r,l){eo(e,r,l),Yp(e,e.sel,e.cm?e.cm.curOp.id:NaN,l)}function eo(e,r,l){(et(e,"beforeSelectionChange")||e.cm&&et(e.cm,"beforeSelectionChange"))&&(r=Qp(e,r,l));var a=l&&l.bias||(k(r.primary().head,e.sel.primary().head)<0?-1:1);Jc(e,eu(e,r,a,!0)),!(l&&l.scroll===!1)&&e.cm&&e.cm.getOption("readOnly")!="nocursor"&&Yi(e.cm)}function Jc(e,r){r.equals(e.sel)||(e.sel=r,e.cm&&(e.cm.curOp.updateInput=1,e.cm.curOp.selectionChanged=!0,Yt(e.cm)),St(e,"cursorActivity",e))}function Qc(e){Jc(e,eu(e,e.sel,null,!1))}function eu(e,r,l,a){for(var c,d=0;d<r.ranges.length;d++){var m=r.ranges[d],v=r.ranges.length==e.sel.ranges.length&&e.sel.ranges[d],x=to(e,m.anchor,v&&v.anchor,l,a),w=to(e,m.head,v&&v.head,l,a);(c||x!=m.anchor||w!=m.head)&&(c||(c=r.ranges.slice(0,d)),c[d]=new Qe(x,w))}return c?wn(e.cm,c,r.primIndex):r}function Qi(e,r,l,a,c){var d=Se(e,r.line);if(d.markedSpans)for(var m=0;m<d.markedSpans.length;++m){var v=d.markedSpans[m],x=v.marker,w="selectLeft"in x?!x.selectLeft:x.inclusiveLeft,M="selectRight"in x?!x.selectRight:x.inclusiveRight;if((v.from==null||(w?v.from<=r.ch:v.from<r.ch))&&(v.to==null||(M?v.to>=r.ch:v.to>r.ch))){if(c&&(Pe(x,"beforeCursorEnter"),x.explicitlyCleared))if(d.markedSpans){--m;continue}else break;if(!x.atomic)continue;if(l){var P=x.find(a<0?1:-1),z=void 0;if((a<0?M:w)&&(P=tu(e,P,-a,P&&P.line==r.line?d:null)),P&&P.line==r.line&&(z=k(P,l))&&(a<0?z<0:z>0))return Qi(e,P,r,a,c)}var H=x.find(a<0?-1:1);return(a<0?w:M)&&(H=tu(e,H,a,H.line==r.line?d:null)),H?Qi(e,H,r,a,c):null}}return r}function to(e,r,l,a,c){var d=a||1,m=Qi(e,r,l,d,c)||!c&&Qi(e,r,l,d,!0)||Qi(e,r,l,-d,c)||!c&&Qi(e,r,l,-d,!0);return m||(e.cantEdit=!0,ae(e.first,0))}function tu(e,r,l,a){return l<0&&r.ch==0?r.line>e.first?ye(e,ae(r.line-1)):null:l>0&&r.ch==(a||Se(e,r.line)).text.length?r.line<e.first+e.size-1?ae(r.line+1,0):null:new ae(r.line,r.ch+l)}function nu(e){e.setSelection(ae(e.firstLine(),0),ae(e.lastLine()),Fe)}function iu(e,r,l){var a={canceled:!1,from:r.from,to:r.to,text:r.text,origin:r.origin,cancel:function(){return a.canceled=!0}};return l&&(a.update=function(c,d,m,v){c&&(a.from=ye(e,c)),d&&(a.to=ye(e,d)),m&&(a.text=m),v!==void 0&&(a.origin=v)}),Pe(e,"beforeChange",e,a),e.cm&&Pe(e.cm,"beforeChange",e.cm,a),a.canceled?(e.cm&&(e.cm.curOp.updateInput=2),null):{from:a.from,to:a.to,text:a.text,origin:a.origin}}function er(e,r,l){if(e.cm){if(!e.cm.curOp)return Ct(e.cm,er)(e,r,l);if(e.cm.state.suppressEdits)return}if(!((et(e,"beforeChange")||e.cm&&et(e.cm,"beforeChange"))&&(r=iu(e,r,!0),!r))){var a=ql&&!l&&Yd(e,r.from,r.to);if(a)for(var c=a.length-1;c>=0;--c)ru(e,{from:a[c].from,to:a[c].to,text:c?[""]:r.text,origin:r.origin});else ru(e,r)}}function ru(e,r){if(!(r.text.length==1&&r.text[0]==""&&k(r.from,r.to)==0)){var l=Ca(e,r);Kc(e,r,l,e.cm?e.cm.curOp.id:NaN),Br(e,r,l,Jo(e,r));var a=[];oi(e,function(c,d){!d&&Z(a,c.history)==-1&&(lu(c.history,r),a.push(c.history)),Br(c,r,null,Jo(c,r))})}}function no(e,r,l){var a=e.cm&&e.cm.state.suppressEdits;if(!(a&&!l)){for(var c=e.history,d,m=e.sel,v=r=="undo"?c.done:c.undone,x=r=="undo"?c.undone:c.done,w=0;w<v.length&&(d=v[w],!(l?d.ranges&&!d.equals(e.sel):!d.ranges));w++);if(w!=v.length){for(c.lastOrigin=c.lastSelOrigin=null;;)if(d=v.pop(),d.ranges){if(Js(d,x),l&&!d.equals(e.sel)){Et(e,d,{clearRedo:!1});return}m=d}else if(a){v.push(d);return}else break;var M=[];Js(m,x),x.push({changes:M,generation:c.generation}),c.generation=d.generation||++c.maxGeneration;for(var P=et(e,"beforeChange")||e.cm&&et(e.cm,"beforeChange"),z=function(ie){var ue=d.changes[ie];if(ue.origin=r,P&&!iu(e,ue,!1))return v.length=0,{};M.push(Na(e,ue));var pe=ie?Ca(e,ue):fe(v);Br(e,ue,pe,qc(e,ue)),!ie&&e.cm&&e.cm.scrollIntoView({from:ue.from,to:si(ue)});var ve=[];oi(e,function(ge,xe){!xe&&Z(ve,ge.history)==-1&&(lu(ge.history,ue),ve.push(ge.history)),Br(ge,ue,null,qc(ge,ue))})},H=d.changes.length-1;H>=0;--H){var q=z(H);if(q)return q.v}}}}function su(e,r){if(r!=0&&(e.first+=r,e.sel=new cn(De(e.sel.ranges,function(c){return new Qe(ae(c.anchor.line+r,c.anchor.ch),ae(c.head.line+r,c.head.ch))}),e.sel.primIndex),e.cm)){Vt(e.cm,e.first,e.first-r,r);for(var l=e.cm.display,a=l.viewFrom;a<l.viewTo;a++)ni(e.cm,a,"gutter")}}function Br(e,r,l,a){if(e.cm&&!e.cm.curOp)return Ct(e.cm,Br)(e,r,l,a);if(r.to.line<e.first){su(e,r.text.length-1-(r.to.line-r.from.line));return}if(!(r.from.line>e.lastLine())){if(r.from.line<e.first){var c=r.text.length-1-(e.first-r.from.line);su(e,c),r={from:ae(e.first,0),to:ae(r.to.line+c,r.to.ch),text:[fe(r.text)],origin:r.origin}}var d=e.lastLine();r.to.line>d&&(r={from:r.from,to:ae(d,Se(e,d).text.length),text:[r.text[0]],origin:r.origin}),r.removed=Tn(e,r.from,r.to),l||(l=Ca(e,r)),e.cm?eg(e.cm,r,a):La(e,r,a),eo(e,l,Fe),e.cantEdit&&to(e,ae(e.firstLine(),0))&&(e.cantEdit=!1)}}function eg(e,r,l){var a=e.doc,c=e.display,d=r.from,m=r.to,v=!1,x=d.line;e.options.lineWrapping||(x=Je(xn(Se(a,d.line))),a.iter(x,m.line+1,function(H){if(H==c.maxLine)return v=!0,!0})),a.sel.contains(r.from,r.to)>-1&&Yt(e),La(a,r,l,Sc(e)),e.options.lineWrapping||(a.iter(x,d.line+r.text.length,function(H){var q=Ws(H);q>c.maxLineLength&&(c.maxLine=H,c.maxLineLength=q,c.maxLineChanged=!0,v=!1)}),v&&(e.curOp.updateMaxLine=!0)),$d(a,d.line),Hr(e,400);var w=r.text.length-(m.line-d.line)-1;r.full?Vt(e):d.line==m.line&&r.text.length==1&&!Uc(e.doc,r)?ni(e,d.line,"text"):Vt(e,d.line,m.line+1,w);var M=et(e,"changes"),P=et(e,"change");if(P||M){var z={from:d,to:m,text:r.text,removed:r.removed,origin:r.origin};P&&St(e,"change",e,z),M&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(z)}e.display.selForContextMenu=null}function tr(e,r,l,a,c){var d;a||(a=l),k(a,l)<0&&(d=[a,l],l=d[0],a=d[1]),typeof r=="string"&&(r=e.splitLines(r)),er(e,{from:l,to:a,text:r,origin:c})}function ou(e,r,l,a){l<e.line?e.line+=a:r<e.line&&(e.line=r,e.ch=0)}function au(e,r,l,a){for(var c=0;c<e.length;++c){var d=e[c],m=!0;if(d.ranges){d.copied||(d=e[c]=d.deepCopy(),d.copied=!0);for(var v=0;v<d.ranges.length;v++)ou(d.ranges[v].anchor,r,l,a),ou(d.ranges[v].head,r,l,a);continue}for(var x=0;x<d.changes.length;++x){var w=d.changes[x];if(l<w.from.line)w.from=ae(w.from.line+a,w.from.ch),w.to=ae(w.to.line+a,w.to.ch);else if(r<=w.to.line){m=!1;break}}m||(e.splice(0,c+1),c=0)}}function lu(e,r){var l=r.from.line,a=r.to.line,c=r.text.length-(a-l)-1;au(e.done,l,a,c),au(e.undone,l,a,c)}function Ur(e,r,l,a){var c=r,d=r;return typeof r=="number"?d=Se(e,Xe(e,r)):c=Je(r),c==null?null:(a(d,c)&&e.cm&&ni(e.cm,c,l),d)}function $r(e){this.lines=e,this.parent=null;for(var r=0,l=0;l<e.length;++l)e[l].parent=this,r+=e[l].height;this.height=r}$r.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,r){for(var l=e,a=e+r;l<a;++l){var c=this.lines[l];this.height-=c.height,tp(c),St(c,"delete")}this.lines.splice(e,r)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,r,l){this.height+=l,this.lines=this.lines.slice(0,e).concat(r).concat(this.lines.slice(e));for(var a=0;a<r.length;++a)r[a].parent=this},iterN:function(e,r,l){for(var a=e+r;e<a;++e)if(l(this.lines[e]))return!0}};function jr(e){this.children=e;for(var r=0,l=0,a=0;a<e.length;++a){var c=e[a];r+=c.chunkSize(),l+=c.height,c.parent=this}this.size=r,this.height=l,this.parent=null}jr.prototype={chunkSize:function(){return this.size},removeInner:function(e,r){this.size-=r;for(var l=0;l<this.children.length;++l){var a=this.children[l],c=a.chunkSize();if(e<c){var d=Math.min(r,c-e),m=a.height;if(a.removeInner(e,d),this.height-=m-a.height,c==d&&(this.children.splice(l--,1),a.parent=null),(r-=d)==0)break;e=0}else e-=c}if(this.size-r<25&&(this.children.length>1||!(this.children[0]instanceof $r))){var v=[];this.collapse(v),this.children=[new $r(v)],this.children[0].parent=this}},collapse:function(e){for(var r=0;r<this.children.length;++r)this.children[r].collapse(e)},insertInner:function(e,r,l){this.size+=r.length,this.height+=l;for(var a=0;a<this.children.length;++a){var c=this.children[a],d=c.chunkSize();if(e<=d){if(c.insertInner(e,r,l),c.lines&&c.lines.length>50){for(var m=c.lines.length%25+25,v=m;v<c.lines.length;){var x=new $r(c.lines.slice(v,v+=25));c.height-=x.height,this.children.splice(++a,0,x),x.parent=this}c.lines=c.lines.slice(0,m),this.maybeSpill()}break}e-=d}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var r=e.children.splice(e.children.length-5,5),l=new jr(r);if(e.parent){e.size-=l.size,e.height-=l.height;var c=Z(e.parent.children,e);e.parent.children.splice(c+1,0,l)}else{var a=new jr(e.children);a.parent=e,e.children=[a,l],e=a}l.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,r,l){for(var a=0;a<this.children.length;++a){var c=this.children[a],d=c.chunkSize();if(e<d){var m=Math.min(r,d-e);if(c.iterN(e,m,l))return!0;if((r-=m)==0)break;e=0}else e-=d}}};var Vr=function(e,r,l){if(l)for(var a in l)l.hasOwnProperty(a)&&(this[a]=l[a]);this.doc=e,this.node=r};Vr.prototype.clear=function(){var e=this.doc.cm,r=this.line.widgets,l=this.line,a=Je(l);if(!(a==null||!r)){for(var c=0;c<r.length;++c)r[c]==this&&r.splice(c--,1);r.length||(l.widgets=null);var d=Pr(this);Zt(l,Math.max(0,l.height-d)),e&&(Jt(e,function(){cu(e,l,-d),ni(e,a,"widget")}),St(e,"lineWidgetCleared",e,this,a))}},Vr.prototype.changed=function(){var e=this,r=this.height,l=this.doc.cm,a=this.line;this.height=null;var c=Pr(this)-r;c&&(ti(this.doc,a)||Zt(a,a.height+c),l&&Jt(l,function(){l.curOp.forceUpdate=!0,cu(l,a,c),St(l,"lineWidgetChanged",l,e,Je(a))}))},rn(Vr);function cu(e,r,l){zn(r)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&ba(e,l)}function tg(e,r,l,a){var c=new Vr(e,l,a),d=e.cm;return d&&c.noHScroll&&(d.display.alignWidgets=!0),Ur(e,r,"widget",function(m){var v=m.widgets||(m.widgets=[]);if(c.insertAt==null?v.push(c):v.splice(Math.min(v.length,Math.max(0,c.insertAt)),0,c),c.line=m,d&&!ti(e,m)){var x=zn(m)<e.scrollTop;Zt(m,m.height+Pr(c)),x&&ba(d,c.height),d.curOp.forceUpdate=!0}return!0}),d&&St(d,"lineWidgetAdded",d,c,typeof r=="number"?r:Je(r)),c}var uu=0,ai=function(e,r){this.lines=[],this.type=r,this.doc=e,this.id=++uu};ai.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,r=e&&!e.curOp;if(r&&Si(e),et(this,"clear")){var l=this.find();l&&St(this,"clear",l.from,l.to)}for(var a=null,c=null,d=0;d<this.lines.length;++d){var m=this.lines[d],v=Nr(m.markedSpans,this);e&&!this.collapsed?ni(e,Je(m),"text"):e&&(v.to!=null&&(c=Je(m)),v.from!=null&&(a=Je(m))),m.markedSpans=Kd(m.markedSpans,v),v.from==null&&this.collapsed&&!ti(this.doc,m)&&e&&Zt(m,Xi(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var x=0;x<this.lines.length;++x){var w=xn(this.lines[x]),M=Ws(w);M>e.display.maxLineLength&&(e.display.maxLine=w,e.display.maxLineLength=M,e.display.maxLineChanged=!0)}a!=null&&e&&this.collapsed&&Vt(e,a,c+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&Qc(e.doc)),e&&St(e,"markerCleared",e,this,a,c),r&&Ci(e),this.parent&&this.parent.clear()}},ai.prototype.find=function(e,r){e==null&&this.type=="bookmark"&&(e=1);for(var l,a,c=0;c<this.lines.length;++c){var d=this.lines[c],m=Nr(d.markedSpans,this);if(m.from!=null&&(l=ae(r?d:Je(d),m.from),e==-1))return l;if(m.to!=null&&(a=ae(r?d:Je(d),m.to),e==1))return a}return l&&{from:l,to:a}},ai.prototype.changed=function(){var e=this,r=this.find(-1,!0),l=this,a=this.doc.cm;!r||!a||Jt(a,function(){var c=r.line,d=Je(r.line),m=oa(a,d);if(m&&(mc(m),a.curOp.selectionChanged=a.curOp.forceUpdate=!0),a.curOp.updateMaxLine=!0,!ti(l.doc,c)&&l.height!=null){var v=l.height;l.height=null;var x=Pr(l)-v;x&&Zt(c,c.height+x)}St(a,"markerChanged",a,e)})},ai.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var r=this.doc.cm.curOp;(!r.maybeHiddenMarkers||Z(r.maybeHiddenMarkers,this)==-1)&&(r.maybeUnhiddenMarkers||(r.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},ai.prototype.detachLine=function(e){if(this.lines.splice(Z(this.lines,e),1),!this.lines.length&&this.doc.cm){var r=this.doc.cm.curOp;(r.maybeHiddenMarkers||(r.maybeHiddenMarkers=[])).push(this)}},rn(ai);function nr(e,r,l,a,c){if(a&&a.shared)return ng(e,r,l,a,c);if(e.cm&&!e.cm.curOp)return Ct(e.cm,nr)(e,r,l,a,c);var d=new ai(e,c),m=k(r,l);if(a&&Te(a,d,!1),m>0||m==0&&d.clearWhenEmpty!==!1)return d;if(d.replacedWith&&(d.collapsed=!0,d.widgetNode=S("span",[d.replacedWith],"CodeMirror-widget"),a.handleMouseEvents||d.widgetNode.setAttribute("cm-ignore-events","true"),a.insertLeft&&(d.widgetNode.insertLeft=!0)),d.collapsed){if(ec(e,r.line,r,l,d)||r.line!=l.line&&ec(e,l.line,r,l,d))throw new Error("Inserting collapsed marker partially overlapping an existing one");Vd()}d.addToHistory&&Kc(e,{from:r,to:l,origin:"markText"},e.sel,NaN);var v=r.line,x=e.cm,w;if(e.iter(v,l.line+1,function(P){x&&d.collapsed&&!x.options.lineWrapping&&xn(P)==x.display.maxLine&&(w=!0),d.collapsed&&v!=r.line&&Zt(P,0),Xd(P,new Es(d,v==r.line?r.ch:null,v==l.line?l.ch:null),e.cm&&e.cm.curOp),++v}),d.collapsed&&e.iter(r.line,l.line+1,function(P){ti(e,P)&&Zt(P,0)}),d.clearOnEnter&&ne(d,"beforeCursorEnter",function(){return d.clear()}),d.readOnly&&(jd(),(e.history.done.length||e.history.undone.length)&&e.clearHistory()),d.collapsed&&(d.id=++uu,d.atomic=!0),x){if(w&&(x.curOp.updateMaxLine=!0),d.collapsed)Vt(x,r.line,l.line+1);else if(d.className||d.startStyle||d.endStyle||d.css||d.attributes||d.title)for(var M=r.line;M<=l.line;M++)ni(x,M,"text");d.atomic&&Qc(x.doc),St(x,"markerAdded",x,d)}return d}var Kr=function(e,r){this.markers=e,this.primary=r;for(var l=0;l<e.length;++l)e[l].parent=this};Kr.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();St(this,"clear")}},Kr.prototype.find=function(e,r){return this.primary.find(e,r)},rn(Kr);function ng(e,r,l,a,c){a=Te(a),a.shared=!1;var d=[nr(e,r,l,a,c)],m=d[0],v=a.widgetNode;return oi(e,function(x){v&&(a.widgetNode=v.cloneNode(!0)),d.push(nr(x,ye(x,r),ye(x,l),a,c));for(var w=0;w<x.linked.length;++w)if(x.linked[w].isParent)return;m=fe(d)}),new Kr(d,m)}function fu(e){return e.findMarks(ae(e.first,0),e.clipPos(ae(e.lastLine())),function(r){return r.parent})}function ig(e,r){for(var l=0;l<r.length;l++){var a=r[l],c=a.find(),d=e.clipPos(c.from),m=e.clipPos(c.to);if(k(d,m)){var v=nr(e,d,m,a.primary,a.primary.type);a.markers.push(v),v.parent=a}}}function rg(e){for(var r=function(a){var c=e[a],d=[c.primary.doc];oi(c.primary.doc,function(x){return d.push(x)});for(var m=0;m<c.markers.length;m++){var v=c.markers[m];Z(d,v.doc)==-1&&(v.parent=null,c.markers.splice(m--,1))}},l=0;l<e.length;l++)r(l)}var sg=0,Kt=function(e,r,l,a,c){if(!(this instanceof Kt))return new Kt(e,r,l,a,c);l==null&&(l=0),jr.call(this,[new $r([new ji("",null)])]),this.first=l,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=l;var d=ae(l,0);this.sel=ri(d),this.history=new Zs(null),this.id=++sg,this.modeOption=r,this.lineSep=a,this.direction=c=="rtl"?"rtl":"ltr",this.extend=!1,typeof e=="string"&&(e=this.splitLines(e)),La(this,{from:d,to:d,text:e}),Et(this,ri(d),Fe)};Kt.prototype=Ie(jr.prototype,{constructor:Kt,iter:function(e,r,l){l?this.iterN(e-this.first,r-e,l):this.iterN(this.first,this.first+this.size,e)},insert:function(e,r){for(var l=0,a=0;a<r.length;++a)l+=r[a].height;this.insertInner(e-this.first,r,l)},remove:function(e,r){this.removeInner(e-this.first,r)},getValue:function(e){var r=Cr(this,this.first,this.first+this.size);return e===!1?r:r.join(e||this.lineSeparator())},setValue:Tt(function(e){var r=ae(this.first,0),l=this.first+this.size-1;er(this,{from:r,to:ae(l,Se(this,l).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&Ir(this.cm,0,0),Et(this,ri(r),Fe)}),replaceRange:function(e,r,l,a){r=ye(this,r),l=l?ye(this,l):r,tr(this,e,r,l,a)},getRange:function(e,r,l){var a=Tn(this,ye(this,e),ye(this,r));return l===!1?a:l===""?a.join(""):a.join(l||this.lineSeparator())},getLine:function(e){var r=this.getLineHandle(e);return r&&r.text},getLineHandle:function(e){if(vi(this,e))return Se(this,e)},getLineNumber:function(e){return Je(e)},getLineHandleVisualStart:function(e){return typeof e=="number"&&(e=Se(this,e)),xn(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return ye(this,e)},getCursor:function(e){var r=this.sel.primary(),l;return e==null||e=="head"?l=r.head:e=="anchor"?l=r.anchor:e=="end"||e=="to"||e===!1?l=r.to():l=r.from(),l},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Tt(function(e,r,l){Yc(this,ye(this,typeof e=="number"?ae(e,r||0):e),null,l)}),setSelection:Tt(function(e,r,l){Yc(this,ye(this,e),ye(this,r||e),l)}),extendSelection:Tt(function(e,r,l){Qs(this,ye(this,e),r&&ye(this,r),l)}),extendSelections:Tt(function(e,r){Gc(this,ln(this,e),r)}),extendSelectionsBy:Tt(function(e,r){var l=De(this.sel.ranges,e);Gc(this,ln(this,l),r)}),setSelections:Tt(function(e,r,l){if(e.length){for(var a=[],c=0;c<e.length;c++)a[c]=new Qe(ye(this,e[c].anchor),ye(this,e[c].head||e[c].anchor));r==null&&(r=Math.min(e.length-1,this.sel.primIndex)),Et(this,wn(this.cm,a,r),l)}}),addSelection:Tt(function(e,r,l){var a=this.sel.ranges.slice(0);a.push(new Qe(ye(this,e),ye(this,r||e))),Et(this,wn(this.cm,a,a.length-1),l)}),getSelection:function(e){for(var r=this.sel.ranges,l,a=0;a<r.length;a++){var c=Tn(this,r[a].from(),r[a].to());l=l?l.concat(c):c}return e===!1?l:l.join(e||this.lineSeparator())},getSelections:function(e){for(var r=[],l=this.sel.ranges,a=0;a<l.length;a++){var c=Tn(this,l[a].from(),l[a].to());e!==!1&&(c=c.join(e||this.lineSeparator())),r[a]=c}return r},replaceSelection:function(e,r,l){for(var a=[],c=0;c<this.sel.ranges.length;c++)a[c]=e;this.replaceSelections(a,r,l||"+input")},replaceSelections:Tt(function(e,r,l){for(var a=[],c=this.sel,d=0;d<c.ranges.length;d++){var m=c.ranges[d];a[d]={from:m.from(),to:m.to(),text:this.splitLines(e[d]),origin:l}}for(var v=r&&r!="end"&&Kp(this,a,r),x=a.length-1;x>=0;x--)er(this,a[x]);v?Zc(this,v):this.cm&&Yi(this.cm)}),undo:Tt(function(){no(this,"undo")}),redo:Tt(function(){no(this,"redo")}),undoSelection:Tt(function(){no(this,"undo",!0)}),redoSelection:Tt(function(){no(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,r=0,l=0,a=0;a<e.done.length;a++)e.done[a].ranges||++r;for(var c=0;c<e.undone.length;c++)e.undone[c].ranges||++l;return{undo:r,redo:l}},clearHistory:function(){var e=this;this.history=new Zs(this.history),oi(this,function(r){return r.history=e.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Ji(this.history.done),undone:Ji(this.history.undone)}},setHistory:function(e){var r=this.history=new Zs(this.history);r.done=Ji(e.done.slice(0),null,!0),r.undone=Ji(e.undone.slice(0),null,!0)},setGutterMarker:Tt(function(e,r,l){return Ur(this,e,"gutter",function(a){var c=a.gutterMarkers||(a.gutterMarkers={});return c[r]=l,!l&&Ht(c)&&(a.gutterMarkers=null),!0})}),clearGutter:Tt(function(e){var r=this;this.iter(function(l){l.gutterMarkers&&l.gutterMarkers[e]&&Ur(r,l,"gutter",function(){return l.gutterMarkers[e]=null,Ht(l.gutterMarkers)&&(l.gutterMarkers=null),!0})})}),lineInfo:function(e){var r;if(typeof e=="number"){if(!vi(this,e)||(r=e,e=Se(this,e),!e))return null}else if(r=Je(e),r==null)return null;return{line:r,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:Tt(function(e,r,l){return Ur(this,e,r=="gutter"?"gutter":"class",function(a){var c=r=="text"?"textClass":r=="background"?"bgClass":r=="gutter"?"gutterClass":"wrapClass";if(!a[c])a[c]=l;else{if(he(l).test(a[c]))return!1;a[c]+=" "+l}return!0})}),removeLineClass:Tt(function(e,r,l){return Ur(this,e,r=="gutter"?"gutter":"class",function(a){var c=r=="text"?"textClass":r=="background"?"bgClass":r=="gutter"?"gutterClass":"wrapClass",d=a[c];if(d)if(l==null)a[c]=null;else{var m=d.match(he(l));if(!m)return!1;var v=m.index+m[0].length;a[c]=d.slice(0,m.index)+(!m.index||v==d.length?"":" ")+d.slice(v)||null}else return!1;return!0})}),addLineWidget:Tt(function(e,r,l){return tg(this,e,r,l)}),removeLineWidget:function(e){e.clear()},markText:function(e,r,l){return nr(this,ye(this,e),ye(this,r),l,l&&l.type||"range")},setBookmark:function(e,r){var l={replacedWith:r&&(r.nodeType==null?r.widget:r),insertLeft:r&&r.insertLeft,clearWhenEmpty:!1,shared:r&&r.shared,handleMouseEvents:r&&r.handleMouseEvents};return e=ye(this,e),nr(this,e,e,l,"bookmark")},findMarksAt:function(e){e=ye(this,e);var r=[],l=Se(this,e.line).markedSpans;if(l)for(var a=0;a<l.length;++a){var c=l[a];(c.from==null||c.from<=e.ch)&&(c.to==null||c.to>=e.ch)&&r.push(c.marker.parent||c.marker)}return r},findMarks:function(e,r,l){e=ye(this,e),r=ye(this,r);var a=[],c=e.line;return this.iter(e.line,r.line+1,function(d){var m=d.markedSpans;if(m)for(var v=0;v<m.length;v++){var x=m[v];!(x.to!=null&&c==e.line&&e.ch>=x.to||x.from==null&&c!=e.line||x.from!=null&&c==r.line&&x.from>=r.ch)&&(!l||l(x.marker))&&a.push(x.marker.parent||x.marker)}++c}),a},getAllMarks:function(){var e=[];return this.iter(function(r){var l=r.markedSpans;if(l)for(var a=0;a<l.length;++a)l[a].from!=null&&e.push(l[a].marker)}),e},posFromIndex:function(e){var r,l=this.first,a=this.lineSeparator().length;return this.iter(function(c){var d=c.text.length+a;if(d>e)return r=e,!0;e-=d,++l}),ye(this,ae(l,r))},indexFromPos:function(e){e=ye(this,e);var r=e.ch;if(e.line<this.first||e.ch<0)return 0;var l=this.lineSeparator().length;return this.iter(this.first,e.line,function(a){r+=a.text.length+l}),r},copy:function(e){var r=new Kt(Cr(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return r.scrollTop=this.scrollTop,r.scrollLeft=this.scrollLeft,r.sel=this.sel,r.extend=!1,e&&(r.history.undoDepth=this.history.undoDepth,r.setHistory(this.getHistory())),r},linkedDoc:function(e){e||(e={});var r=this.first,l=this.first+this.size;e.from!=null&&e.from>r&&(r=e.from),e.to!=null&&e.to<l&&(l=e.to);var a=new Kt(Cr(this,r,l),e.mode||this.modeOption,r,this.lineSep,this.direction);return e.sharedHist&&(a.history=this.history),(this.linked||(this.linked=[])).push({doc:a,sharedHist:e.sharedHist}),a.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],ig(a,fu(this)),a},unlinkDoc:function(e){if(e instanceof lt&&(e=e.doc),this.linked)for(var r=0;r<this.linked.length;++r){var l=this.linked[r];if(l.doc==e){this.linked.splice(r,1),e.unlinkDoc(this),rg(fu(this));break}}if(e.history==this.history){var a=[e.id];oi(e,function(c){return a.push(c.id)},!0),e.history=new Zs(null),e.history.done=Ji(this.history.done,a),e.history.undone=Ji(this.history.undone,a)}},iterLinkedDocs:function(e){oi(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):_r(e)},lineSeparator:function(){return this.lineSep||`
`},setDirection:Tt(function(e){e!="rtl"&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter(function(r){return r.order=null}),this.cm&&Xp(this.cm))})}),Kt.prototype.eachLine=Kt.prototype.iter;var hu=0;function og(e){var r=this;if(du(r),!(ot(r,e)||Bn(r.display,e))){At(e),p&&(hu=+new Date);var l=xi(r,e,!0),a=e.dataTransfer.files;if(!(!l||r.isReadOnly()))if(a&&a.length&&window.FileReader&&window.File)for(var c=a.length,d=Array(c),m=0,v=function(){++m==c&&Ct(r,function(){l=ye(r.doc,l);var H={from:l,to:l,text:r.doc.splitLines(d.filter(function(q){return q!=null}).join(r.doc.lineSeparator())),origin:"paste"};er(r.doc,H),Zc(r.doc,ri(ye(r.doc,l),ye(r.doc,si(H))))})()},x=function(H,q){if(r.options.allowDropFileTypes&&Z(r.options.allowDropFileTypes,H.type)==-1){v();return}var ie=new FileReader;ie.onerror=function(){return v()},ie.onload=function(){var ue=ie.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(ue)){v();return}d[q]=ue,v()},ie.readAsText(H)},w=0;w<a.length;w++)x(a[w],w);else{if(r.state.draggingText&&r.doc.sel.contains(l)>-1){r.state.draggingText(e),setTimeout(function(){return r.display.input.focus()},20);return}try{var M=e.dataTransfer.getData("Text");if(M){var P;if(r.state.draggingText&&!r.state.draggingText.copy&&(P=r.listSelections()),eo(r.doc,ri(l,l)),P)for(var z=0;z<P.length;++z)tr(r.doc,"",P[z].anchor,P[z].head,"drag");r.replaceSelection(M,"around","paste"),r.display.input.focus()}}catch{}}}}function ag(e,r){if(p&&(!e.state.draggingText||+new Date-hu<100)){mi(r);return}if(!(ot(e,r)||Bn(e.display,r))&&(r.dataTransfer.setData("Text",e.getSelection()),r.dataTransfer.effectAllowed="copyMove",r.dataTransfer.setDragImage&&!D)){var l=F("img",null,null,"position: fixed; left: 0; top: 0;");l.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",L&&(l.width=l.height=1,e.display.wrapper.appendChild(l),l._top=l.offsetTop),r.dataTransfer.setDragImage(l,0,0),L&&l.parentNode.removeChild(l)}}function lg(e,r){var l=xi(e,r);if(l){var a=document.createDocumentFragment();pa(e,l,a),e.display.dragCursor||(e.display.dragCursor=F("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),R(e.display.dragCursor,a)}}function du(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function pu(e){if(document.getElementsByClassName){for(var r=document.getElementsByClassName("CodeMirror"),l=[],a=0;a<r.length;a++){var c=r[a].CodeMirror;c&&l.push(c)}l.length&&l[0].operation(function(){for(var d=0;d<l.length;d++)e(l[d])})}}var gu=!1;function cg(){gu||(ug(),gu=!0)}function ug(){var e;ne(window,"resize",function(){e==null&&(e=setTimeout(function(){e=null,pu(fg)},100))}),ne(window,"blur",function(){return pu(Gi)})}function fg(e){var r=e.display;r.cachedCharWidth=r.cachedTextHeight=r.cachedPaddingH=null,r.scrollbarsClipped=!1,e.setSize()}for(var li={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Xr=0;Xr<10;Xr++)li[Xr+48]=li[Xr+96]=String(Xr);for(var io=65;io<=90;io++)li[io]=String.fromCharCode(io);for(var qr=1;qr<=12;qr++)li[qr+111]=li[qr+63235]="F"+qr;var $n={};$n.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},$n.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},$n.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},$n.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},$n.default=K?$n.macDefault:$n.pcDefault;function hg(e){var r=e.split(/-(?!$)/);e=r[r.length-1];for(var l,a,c,d,m=0;m<r.length-1;m++){var v=r[m];if(/^(cmd|meta|m)$/i.test(v))d=!0;else if(/^a(lt)?$/i.test(v))l=!0;else if(/^(c|ctrl|control)$/i.test(v))a=!0;else if(/^s(hift)?$/i.test(v))c=!0;else throw new Error("Unrecognized modifier name: "+v)}return l&&(e="Alt-"+e),a&&(e="Ctrl-"+e),d&&(e="Cmd-"+e),c&&(e="Shift-"+e),e}function dg(e){var r={};for(var l in e)if(e.hasOwnProperty(l)){var a=e[l];if(/^(name|fallthrough|(de|at)tach)$/.test(l))continue;if(a=="..."){delete e[l];continue}for(var c=De(l.split(" "),hg),d=0;d<c.length;d++){var m=void 0,v=void 0;d==c.length-1?(v=c.join(" "),m=a):(v=c.slice(0,d+1).join(" "),m="...");var x=r[v];if(!x)r[v]=m;else if(x!=m)throw new Error("Inconsistent bindings for "+v)}delete e[l]}for(var w in r)e[w]=r[w];return e}function ir(e,r,l,a){r=ro(r);var c=r.call?r.call(e,a):r[e];if(c===!1)return"nothing";if(c==="...")return"multi";if(c!=null&&l(c))return"handled";if(r.fallthrough){if(Object.prototype.toString.call(r.fallthrough)!="[object Array]")return ir(e,r.fallthrough,l,a);for(var d=0;d<r.fallthrough.length;d++){var m=ir(e,r.fallthrough[d],l,a);if(m)return m}}}function mu(e){var r=typeof e=="string"?e:li[e.keyCode];return r=="Ctrl"||r=="Alt"||r=="Shift"||r=="Mod"}function vu(e,r,l){var a=e;return r.altKey&&a!="Alt"&&(e="Alt-"+e),(ee?r.metaKey:r.ctrlKey)&&a!="Ctrl"&&(e="Ctrl-"+e),(ee?r.ctrlKey:r.metaKey)&&a!="Mod"&&(e="Cmd-"+e),!l&&r.shiftKey&&a!="Shift"&&(e="Shift-"+e),e}function yu(e,r){if(L&&e.keyCode==34&&e.char)return!1;var l=li[e.keyCode];return l==null||e.altGraphKey?!1:(e.keyCode==3&&e.code&&(l=e.code),vu(l,e,r))}function ro(e){return typeof e=="string"?$n[e]:e}function rr(e,r){for(var l=e.doc.sel.ranges,a=[],c=0;c<l.length;c++){for(var d=r(l[c]);a.length&&k(d.from,fe(a).to)<=0;){var m=a.pop();if(k(m.from,d.from)<0){d.from=m.from;break}}a.push(d)}Jt(e,function(){for(var v=a.length-1;v>=0;v--)tr(e.doc,"",a[v].from,a[v].to,"+delete");Yi(e)})}function Pa(e,r,l){var a=un(e.text,r+l,l);return a<0||a>e.text.length?null:a}function Oa(e,r,l){var a=Pa(e,r.ch,l);return a==null?null:new ae(r.line,a,l<0?"after":"before")}function Aa(e,r,l,a,c){if(e){r.doc.direction=="rtl"&&(c=-c);var d=Y(l,r.doc.direction);if(d){var m=c<0?fe(d):d[0],v=c<0==(m.level==1),x=v?"after":"before",w;if(m.level>0||r.doc.direction=="rtl"){var M=Ki(r,l);w=c<0?l.text.length-1:0;var P=Dn(r,M,w).top;w=C(function(z){return Dn(r,M,z).top==P},c<0==(m.level==1)?m.from:m.to-1,w),x=="before"&&(w=Pa(l,w,1))}else w=c<0?m.to:m.from;return new ae(a,w,x)}}return new ae(a,c<0?l.text.length:0,c<0?"before":"after")}function pg(e,r,l,a){var c=Y(r,e.doc.direction);if(!c)return Oa(r,l,a);l.ch>=r.text.length?(l.ch=r.text.length,l.sticky="before"):l.ch<=0&&(l.ch=0,l.sticky="after");var d=Q(c,l.ch,l.sticky),m=c[d];if(e.doc.direction=="ltr"&&m.level%2==0&&(a>0?m.to>l.ch:m.from<l.ch))return Oa(r,l,a);var v=function(pe,ve){return Pa(r,pe instanceof ae?pe.ch:pe,ve)},x,w=function(pe){return e.options.lineWrapping?(x=x||Ki(e,r),kc(e,r,x,pe)):{begin:0,end:r.text.length}},M=w(l.sticky=="before"?v(l,-1):l.ch);if(e.doc.direction=="rtl"||m.level==1){var P=m.level==1==a<0,z=v(l,P?1:-1);if(z!=null&&(P?z<=m.to&&z<=M.end:z>=m.from&&z>=M.begin)){var H=P?"before":"after";return new ae(l.line,z,H)}}var q=function(pe,ve,ge){for(var xe=function(st,Lt){return Lt?new ae(l.line,v(st,1),"before"):new ae(l.line,st,"after")};pe>=0&&pe<c.length;pe+=ve){var Oe=c[pe],Le=ve>0==(Oe.level!=1),We=Le?ge.begin:v(ge.end,-1);if(Oe.from<=We&&We<Oe.to||(We=Le?Oe.from:v(Oe.to,-1),ge.begin<=We&&We<ge.end))return xe(We,Le)}},ie=q(d+a,a,M);if(ie)return ie;var ue=a>0?M.end:v(M.begin,-1);return ue!=null&&!(a>0&&ue==r.text.length)&&(ie=q(a>0?0:c.length-1,a,w(ue)),ie)?ie:null}var Gr={selectAll:nu,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),Fe)},killLine:function(e){return rr(e,function(r){if(r.empty()){var l=Se(e.doc,r.head.line).text.length;return r.head.ch==l&&r.head.line<e.lastLine()?{from:r.head,to:ae(r.head.line+1,0)}:{from:r.head,to:ae(r.head.line,l)}}else return{from:r.from(),to:r.to()}})},deleteLine:function(e){return rr(e,function(r){return{from:ae(r.from().line,0),to:ye(e.doc,ae(r.to().line+1,0))}})},delLineLeft:function(e){return rr(e,function(r){return{from:ae(r.from().line,0),to:r.from()}})},delWrappedLineLeft:function(e){return rr(e,function(r){var l=e.charCoords(r.head,"div").top+5,a=e.coordsChar({left:0,top:l},"div");return{from:a,to:r.from()}})},delWrappedLineRight:function(e){return rr(e,function(r){var l=e.charCoords(r.head,"div").top+5,a=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:l},"div");return{from:r.from(),to:a}})},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(ae(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(ae(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy(function(r){return bu(e,r.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy(function(r){return xu(e,r.head)},{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy(function(r){return gg(e,r.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy(function(r){var l=e.cursorCoords(r.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:l},"div")},He)},goLineLeft:function(e){return e.extendSelectionsBy(function(r){var l=e.cursorCoords(r.head,"div").top+5;return e.coordsChar({left:0,top:l},"div")},He)},goLineLeftSmart:function(e){return e.extendSelectionsBy(function(r){var l=e.cursorCoords(r.head,"div").top+5,a=e.coordsChar({left:0,top:l},"div");return a.ch<e.getLine(a.line).search(/\S/)?xu(e,r.head):a},He)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"codepoint")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("	")},insertSoftTab:function(e){for(var r=[],l=e.listSelections(),a=e.options.tabSize,c=0;c<l.length;c++){var d=l[c].from(),m=Ae(e.getLine(d.line),d.ch,a);r.push(re(a-m%a))}e.replaceSelections(r)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return Jt(e,function(){for(var r=e.listSelections(),l=[],a=0;a<r.length;a++)if(r[a].empty()){var c=r[a].head,d=Se(e.doc,c.line).text;if(d){if(c.ch==d.length&&(c=new ae(c.line,c.ch-1)),c.ch>0)c=new ae(c.line,c.ch+1),e.replaceRange(d.charAt(c.ch-1)+d.charAt(c.ch-2),ae(c.line,c.ch-2),c,"+transpose");else if(c.line>e.doc.first){var m=Se(e.doc,c.line-1).text;m&&(c=new ae(c.line,1),e.replaceRange(d.charAt(0)+e.doc.lineSeparator()+m.charAt(m.length-1),ae(c.line-1,m.length-1),c,"+transpose"))}}l.push(new Qe(c,c))}e.setSelections(l)})},newlineAndIndent:function(e){return Jt(e,function(){for(var r=e.listSelections(),l=r.length-1;l>=0;l--)e.replaceRange(e.doc.lineSeparator(),r[l].anchor,r[l].head,"+input");r=e.listSelections();for(var a=0;a<r.length;a++)e.indentLine(r[a].from().line,null,!0);Yi(e)})},openLine:function(e){return e.replaceSelection(`
`,"start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function bu(e,r){var l=Se(e.doc,r),a=xn(l);return a!=l&&(r=Je(a)),Aa(!0,e,a,r,1)}function gg(e,r){var l=Se(e.doc,r),a=Jd(l);return a!=l&&(r=Je(a)),Aa(!0,e,l,r,-1)}function xu(e,r){var l=bu(e,r.line),a=Se(e.doc,l.line),c=Y(a,e.doc.direction);if(!c||c[0].level==0){var d=Math.max(l.ch,a.text.search(/\S/)),m=r.line==l.line&&r.ch<=d&&r.ch;return ae(l.line,m?0:d,l.sticky)}return l}function so(e,r,l){if(typeof r=="string"&&(r=Gr[r],!r))return!1;e.display.input.ensurePolled();var a=e.display.shift,c=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),l&&(e.display.shift=!1),c=r(e)!=_e}finally{e.display.shift=a,e.state.suppressEdits=!1}return c}function mg(e,r,l){for(var a=0;a<e.state.keyMaps.length;a++){var c=ir(r,e.state.keyMaps[a],l,e);if(c)return c}return e.options.extraKeys&&ir(r,e.options.extraKeys,l,e)||ir(r,e.options.keyMap,l,e)}var vg=new U;function Yr(e,r,l,a){var c=e.state.keySeq;if(c){if(mu(r))return"handled";if(/\'$/.test(r)?e.state.keySeq=null:vg.set(50,function(){e.state.keySeq==c&&(e.state.keySeq=null,e.display.input.reset())}),_u(e,c+" "+r,l,a))return!0}return _u(e,r,l,a)}function _u(e,r,l,a){var c=mg(e,r,a);return c=="multi"&&(e.state.keySeq=r),c=="handled"&&St(e,"keyHandled",e,r,l),(c=="handled"||c=="multi")&&(At(l),ga(e)),!!c}function wu(e,r){var l=yu(r,!0);return l?r.shiftKey&&!e.state.keySeq?Yr(e,"Shift-"+l,r,function(a){return so(e,a,!0)})||Yr(e,l,r,function(a){if(typeof a=="string"?/^go[A-Z]/.test(a):a.motion)return so(e,a)}):Yr(e,l,r,function(a){return so(e,a)}):!1}function yg(e,r,l){return Yr(e,"'"+l+"'",r,function(a){return so(e,a,!0)})}var Ia=null;function ku(e){var r=this;if(!(e.target&&e.target!=r.display.input.getField())&&(r.curOp.focus=$e(),!ot(r,e))){p&&g<11&&e.keyCode==27&&(e.returnValue=!1);var l=e.keyCode;r.display.shift=l==16||e.shiftKey;var a=wu(r,e);L&&(Ia=a?l:null,!a&&l==88&&!As&&(K?e.metaKey:e.ctrlKey)&&r.replaceSelection("",null,"cut")),o&&!K&&!a&&l==46&&e.shiftKey&&!e.ctrlKey&&document.execCommand&&document.execCommand("cut"),l==18&&!/\bCodeMirror-crosshair\b/.test(r.display.lineDiv.className)&&bg(r)}}function bg(e){var r=e.display.lineDiv;qe(r,"CodeMirror-crosshair");function l(a){(a.keyCode==18||!a.altKey)&&(se(r,"CodeMirror-crosshair"),Be(document,"keyup",l),Be(document,"mouseover",l))}ne(document,"keyup",l),ne(document,"mouseover",l)}function Su(e){e.keyCode==16&&(this.doc.sel.shift=!1),ot(this,e)}function Cu(e){var r=this;if(!(e.target&&e.target!=r.display.input.getField())&&!(Bn(r.display,e)||ot(r,e)||e.ctrlKey&&!e.altKey||K&&e.metaKey)){var l=e.keyCode,a=e.charCode;if(L&&l==Ia){Ia=null,At(e);return}if(!(L&&(!e.which||e.which<10)&&wu(r,e))){var c=String.fromCharCode(a??l);c!="\b"&&(yg(r,e,c)||r.display.input.onKeyPress(e))}}}var xg=400,Ea=function(e,r,l){this.time=e,this.pos=r,this.button=l};Ea.prototype.compare=function(e,r,l){return this.time+xg>e&&k(r,this.pos)==0&&l==this.button};var Zr,Jr;function _g(e,r){var l=+new Date;return Jr&&Jr.compare(l,e,r)?(Zr=Jr=null,"triple"):Zr&&Zr.compare(l,e,r)?(Jr=new Ea(l,e,r),Zr=null,"double"):(Zr=new Ea(l,e,r),Jr=null,"single")}function Tu(e){var r=this,l=r.display;if(!(ot(r,e)||l.activeTouch&&l.input.supportsTouch())){if(l.input.ensurePolled(),l.shift=e.shiftKey,Bn(l,e)){b||(l.scroller.draggable=!1,setTimeout(function(){return l.scroller.draggable=!0},100));return}if(!Ra(r,e)){var a=xi(r,e),c=Ds(e),d=a?_g(a,c):"single";window.focus(),c==1&&r.state.selectingText&&r.state.selectingText(e),!(a&&wg(r,c,a,d,e))&&(c==1?a?Sg(r,a,d,e):Qn(e)==l.scroller&&At(e):c==2?(a&&Qs(r.doc,a),setTimeout(function(){return l.input.focus()},20)):c==3&&(de?r.display.input.onContextMenu(e):ma(r)))}}}function wg(e,r,l,a,c){var d="Click";return a=="double"?d="Double"+d:a=="triple"&&(d="Triple"+d),d=(r==1?"Left":r==2?"Middle":"Right")+d,Yr(e,vu(d,c),c,function(m){if(typeof m=="string"&&(m=Gr[m]),!m)return!1;var v=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),v=m(e,l)!=_e}finally{e.state.suppressEdits=!1}return v})}function kg(e,r,l){var a=e.getOption("configureMouse"),c=a?a(e,r,l):{};if(c.unit==null){var d=X?l.shiftKey&&l.metaKey:l.altKey;c.unit=d?"rectangle":r=="single"?"char":r=="double"?"word":"line"}return(c.extend==null||e.doc.extend)&&(c.extend=e.doc.extend||l.shiftKey),c.addNew==null&&(c.addNew=K?l.metaKey:l.ctrlKey),c.moveOnDrag==null&&(c.moveOnDrag=!(K?l.altKey:l.ctrlKey)),c}function Sg(e,r,l,a){p?setTimeout(ke(Lc,e),0):e.curOp.focus=$e();var c=kg(e,l,a),d=e.doc.sel,m;e.options.dragDrop&&br&&!e.isReadOnly()&&l=="single"&&(m=d.contains(r))>-1&&(k((m=d.ranges[m]).from(),r)<0||r.xRel>0)&&(k(m.to(),r)>0||r.xRel<0)?Cg(e,a,r,c):Tg(e,a,r,c)}function Cg(e,r,l,a){var c=e.display,d=!1,m=Ct(e,function(w){b&&(c.scroller.draggable=!1),e.state.draggingText=!1,e.state.delayingBlurEvent&&(e.hasFocus()?e.state.delayingBlurEvent=!1:ma(e)),Be(c.wrapper.ownerDocument,"mouseup",m),Be(c.wrapper.ownerDocument,"mousemove",v),Be(c.scroller,"dragstart",x),Be(c.scroller,"drop",m),d||(At(w),a.addNew||Qs(e.doc,l,null,null,a.extend),b&&!D||p&&g==9?setTimeout(function(){c.wrapper.ownerDocument.body.focus({preventScroll:!0}),c.input.focus()},20):c.input.focus())}),v=function(w){d=d||Math.abs(r.clientX-w.clientX)+Math.abs(r.clientY-w.clientY)>=10},x=function(){return d=!0};b&&(c.scroller.draggable=!0),e.state.draggingText=m,m.copy=!a.moveOnDrag,ne(c.wrapper.ownerDocument,"mouseup",m),ne(c.wrapper.ownerDocument,"mousemove",v),ne(c.scroller,"dragstart",x),ne(c.scroller,"drop",m),e.state.delayingBlurEvent=!0,setTimeout(function(){return c.input.focus()},20),c.scroller.dragDrop&&c.scroller.dragDrop()}function Lu(e,r,l){if(l=="char")return new Qe(r,r);if(l=="word")return e.findWordAt(r);if(l=="line")return new Qe(ae(r.line,0),ye(e.doc,ae(r.line+1,0)));var a=l(e,r);return new Qe(a.from,a.to)}function Tg(e,r,l,a){p&&ma(e);var c=e.display,d=e.doc;At(r);var m,v,x=d.sel,w=x.ranges;if(a.addNew&&!a.extend?(v=d.sel.contains(l),v>-1?m=w[v]:m=new Qe(l,l)):(m=d.sel.primary(),v=d.sel.primIndex),a.unit=="rectangle")a.addNew||(m=new Qe(l,l)),l=xi(e,r,!0,!0),v=-1;else{var M=Lu(e,l,a.unit);a.extend?m=Ma(m,M.anchor,M.head,a.extend):m=M}a.addNew?v==-1?(v=w.length,Et(d,wn(e,w.concat([m]),v),{scroll:!1,origin:"*mouse"})):w.length>1&&w[v].empty()&&a.unit=="char"&&!a.extend?(Et(d,wn(e,w.slice(0,v).concat(w.slice(v+1)),0),{scroll:!1,origin:"*mouse"}),x=d.sel):Da(d,v,m,$t):(v=0,Et(d,new cn([m],0),$t),x=d.sel);var P=l;function z(ge){if(k(P,ge)!=0)if(P=ge,a.unit=="rectangle"){for(var xe=[],Oe=e.options.tabSize,Le=Ae(Se(d,l.line).text,l.ch,Oe),We=Ae(Se(d,ge.line).text,ge.ch,Oe),st=Math.min(Le,We),Lt=Math.max(Le,We),ft=Math.min(l.line,ge.line),Qt=Math.min(e.lastLine(),Math.max(l.line,ge.line));ft<=Qt;ft++){var Xt=Se(d,ft).text,yt=at(Xt,st,Oe);st==Lt?xe.push(new Qe(ae(ft,yt),ae(ft,yt))):Xt.length>yt&&xe.push(new Qe(ae(ft,yt),ae(ft,at(Xt,Lt,Oe))))}xe.length||xe.push(new Qe(l,l)),Et(d,wn(e,x.ranges.slice(0,v).concat(xe),v),{origin:"*mouse",scroll:!1}),e.scrollIntoView(ge)}else{var qt=m,Mt=Lu(e,ge,a.unit),kt=qt.anchor,bt;k(Mt.anchor,kt)>0?(bt=Mt.head,kt=Re(qt.from(),Mt.anchor)):(bt=Mt.anchor,kt=ce(qt.to(),Mt.head));var dt=x.ranges.slice(0);dt[v]=Lg(e,new Qe(ye(d,kt),bt)),Et(d,wn(e,dt,v),$t)}}var H=c.wrapper.getBoundingClientRect(),q=0;function ie(ge){var xe=++q,Oe=xi(e,ge,!0,a.unit=="rectangle");if(Oe)if(k(Oe,P)!=0){e.curOp.focus=$e(),z(Oe);var Le=Xs(c,d);(Oe.line>=Le.to||Oe.line<Le.from)&&setTimeout(Ct(e,function(){q==xe&&ie(ge)}),150)}else{var We=ge.clientY<H.top?-20:ge.clientY>H.bottom?20:0;We&&setTimeout(Ct(e,function(){q==xe&&(c.scroller.scrollTop+=We,ie(ge))}),50)}}function ue(ge){e.state.selectingText=!1,q=1/0,ge&&(At(ge),c.input.focus()),Be(c.wrapper.ownerDocument,"mousemove",pe),Be(c.wrapper.ownerDocument,"mouseup",ve),d.history.lastSelOrigin=null}var pe=Ct(e,function(ge){ge.buttons===0||!Ds(ge)?ue(ge):ie(ge)}),ve=Ct(e,ue);e.state.selectingText=ve,ne(c.wrapper.ownerDocument,"mousemove",pe),ne(c.wrapper.ownerDocument,"mouseup",ve)}function Lg(e,r){var l=r.anchor,a=r.head,c=Se(e.doc,l.line);if(k(l,a)==0&&l.sticky==a.sticky)return r;var d=Y(c);if(!d)return r;var m=Q(d,l.ch,l.sticky),v=d[m];if(v.from!=l.ch&&v.to!=l.ch)return r;var x=m+(v.from==l.ch==(v.level!=1)?0:1);if(x==0||x==d.length)return r;var w;if(a.line!=l.line)w=(a.line-l.line)*(e.doc.direction=="ltr"?1:-1)>0;else{var M=Q(d,a.ch,a.sticky),P=M-m||(a.ch-l.ch)*(v.level==1?-1:1);M==x-1||M==x?w=P<0:w=P>0}var z=d[x+(w?-1:0)],H=w==(z.level==1),q=H?z.from:z.to,ie=H?"after":"before";return l.ch==q&&l.sticky==ie?r:new Qe(new ae(l.line,q,ie),a)}function Nu(e,r,l,a){var c,d;if(r.touches)c=r.touches[0].clientX,d=r.touches[0].clientY;else try{c=r.clientX,d=r.clientY}catch{return!1}if(c>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;a&&At(r);var m=e.display,v=m.lineDiv.getBoundingClientRect();if(d>v.bottom||!et(e,l))return sn(r);d-=v.top-m.viewOffset;for(var x=0;x<e.display.gutterSpecs.length;++x){var w=m.gutters.childNodes[x];if(w&&w.getBoundingClientRect().right>=c){var M=Ln(e.doc,d),P=e.display.gutterSpecs[x];return Pe(e,l,e,M,P.className,r),sn(r)}}}function Ra(e,r){return Nu(e,r,"gutterClick",!0)}function Mu(e,r){Bn(e.display,r)||Ng(e,r)||ot(e,r,"contextmenu")||de||e.display.input.onContextMenu(r)}function Ng(e,r){return et(e,"gutterContextMenu")?Nu(e,r,"gutterContextMenu",!1):!1}function Du(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Or(e)}var sr={toString:function(){return"CodeMirror.Init"}},Pu={},oo={};function Mg(e){var r=e.optionHandlers;function l(a,c,d,m){e.defaults[a]=c,d&&(r[a]=m?function(v,x,w){w!=sr&&d(v,x,w)}:d)}e.defineOption=l,e.Init=sr,l("value","",function(a,c){return a.setValue(c)},!0),l("mode",null,function(a,c){a.doc.modeOption=c,Ta(a)},!0),l("indentUnit",2,Ta,!0),l("indentWithTabs",!1),l("smartIndent",!0),l("tabSize",4,function(a){zr(a),Or(a),Vt(a)},!0),l("lineSeparator",null,function(a,c){if(a.doc.lineSep=c,!!c){var d=[],m=a.doc.first;a.doc.iter(function(x){for(var w=0;;){var M=x.text.indexOf(c,w);if(M==-1)break;w=M+c.length,d.push(ae(m,M))}m++});for(var v=d.length-1;v>=0;v--)tr(a.doc,c,d[v],ae(d[v].line,d[v].ch+c.length))}}),l("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(a,c,d){a.state.specialChars=new RegExp(c.source+(c.test("	")?"":"|	"),"g"),d!=sr&&a.refresh()}),l("specialCharPlaceholder",rp,function(a){return a.refresh()},!0),l("electricChars",!0),l("inputStyle",j?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),l("spellcheck",!1,function(a,c){return a.getInputField().spellcheck=c},!0),l("autocorrect",!1,function(a,c){return a.getInputField().autocorrect=c},!0),l("autocapitalize",!1,function(a,c){return a.getInputField().autocapitalize=c},!0),l("rtlMoveVisually",!V),l("wholeLineUpdateBefore",!0),l("theme","default",function(a){Du(a),Wr(a)},!0),l("keyMap","default",function(a,c,d){var m=ro(c),v=d!=sr&&ro(d);v&&v.detach&&v.detach(a,m),m.attach&&m.attach(a,v||null)}),l("extraKeys",null),l("configureMouse",null),l("lineWrapping",!1,Pg,!0),l("gutters",[],function(a,c){a.display.gutterSpecs=Sa(c,a.options.lineNumbers),Wr(a)},!0),l("fixedGutter",!0,function(a,c){a.display.gutters.style.left=c?ha(a.display)+"px":"0",a.refresh()},!0),l("coverGutterNextToScrollbar",!1,function(a){return Zi(a)},!0),l("scrollbarStyle","native",function(a){Ac(a),Zi(a),a.display.scrollbars.setScrollTop(a.doc.scrollTop),a.display.scrollbars.setScrollLeft(a.doc.scrollLeft)},!0),l("lineNumbers",!1,function(a,c){a.display.gutterSpecs=Sa(a.options.gutters,c),Wr(a)},!0),l("firstLineNumber",1,Wr,!0),l("lineNumberFormatter",function(a){return a},Wr,!0),l("showCursorWhenSelecting",!1,Ar,!0),l("resetSelectionOnContextMenu",!0),l("lineWiseCopyCut",!0),l("pasteLinesPerSelection",!0),l("selectionsMayTouch",!1),l("readOnly",!1,function(a,c){c=="nocursor"&&(Gi(a),a.display.input.blur()),a.display.input.readOnlyChanged(c)}),l("screenReaderLabel",null,function(a,c){c=c===""?null:c,a.display.input.screenReaderLabelChanged(c)}),l("disableInput",!1,function(a,c){c||a.display.input.reset()},!0),l("dragDrop",!0,Dg),l("allowDropFileTypes",null),l("cursorBlinkRate",530),l("cursorScrollMargin",0),l("cursorHeight",1,Ar,!0),l("singleCursorHeightPerLine",!0,Ar,!0),l("workTime",100),l("workDelay",100),l("flattenSpans",!0,zr,!0),l("addModeClass",!1,zr,!0),l("pollInterval",100),l("undoDepth",200,function(a,c){return a.doc.history.undoDepth=c}),l("historyEventDelay",1250),l("viewportMargin",10,function(a){return a.refresh()},!0),l("maxHighlightLength",1e4,zr,!0),l("moveInputWithCursor",!0,function(a,c){c||a.display.input.resetPosition()}),l("tabindex",null,function(a,c){return a.display.input.getField().tabIndex=c||""}),l("autofocus",null),l("direction","ltr",function(a,c){return a.doc.setDirection(c)},!0),l("phrases",null)}function Dg(e,r,l){var a=l&&l!=sr;if(!r!=!a){var c=e.display.dragFunctions,d=r?ne:Be;d(e.display.scroller,"dragstart",c.start),d(e.display.scroller,"dragenter",c.enter),d(e.display.scroller,"dragover",c.over),d(e.display.scroller,"dragleave",c.leave),d(e.display.scroller,"drop",c.drop)}}function Pg(e){e.options.lineWrapping?(qe(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(se(e.display.wrapper,"CodeMirror-wrap"),na(e)),da(e),Vt(e),Or(e),setTimeout(function(){return Zi(e)},100)}function lt(e,r){var l=this;if(!(this instanceof lt))return new lt(e,r);this.options=r=r?Te(r):{},Te(Pu,r,!1);var a=r.value;typeof a=="string"?a=new Kt(a,r.mode,null,r.lineSeparator,r.direction):r.mode&&(a.modeOption=r.mode),this.doc=a;var c=new lt.inputStyles[r.inputStyle](this),d=this.display=new jp(e,a,c,r);d.wrapper.CodeMirror=this,Du(this),r.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Ac(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new U,keySeq:null,specialChars:null},r.autofocus&&!j&&d.input.focus(),p&&g<11&&setTimeout(function(){return l.display.input.reset(!0)},20),Og(this),cg(),Si(this),this.curOp.forceUpdate=!0,$c(this,a),r.autofocus&&!j||this.hasFocus()?setTimeout(function(){l.hasFocus()&&!l.state.focused&&va(l)},20):Gi(this);for(var m in oo)oo.hasOwnProperty(m)&&oo[m](this,r[m],sr);Rc(this),r.finishInit&&r.finishInit(this);for(var v=0;v<Fa.length;++v)Fa[v](this);Ci(this),b&&r.lineWrapping&&getComputedStyle(d.lineDiv).textRendering=="optimizelegibility"&&(d.lineDiv.style.textRendering="auto")}lt.defaults=Pu,lt.optionHandlers=oo;function Og(e){var r=e.display;ne(r.scroller,"mousedown",Ct(e,Tu)),p&&g<11?ne(r.scroller,"dblclick",Ct(e,function(x){if(!ot(e,x)){var w=xi(e,x);if(!(!w||Ra(e,x)||Bn(e.display,x))){At(x);var M=e.findWordAt(w);Qs(e.doc,M.anchor,M.head)}}})):ne(r.scroller,"dblclick",function(x){return ot(e,x)||At(x)}),ne(r.scroller,"contextmenu",function(x){return Mu(e,x)}),ne(r.input.getField(),"contextmenu",function(x){r.scroller.contains(x.target)||Mu(e,x)});var l,a={end:0};function c(){r.activeTouch&&(l=setTimeout(function(){return r.activeTouch=null},1e3),a=r.activeTouch,a.end=+new Date)}function d(x){if(x.touches.length!=1)return!1;var w=x.touches[0];return w.radiusX<=1&&w.radiusY<=1}function m(x,w){if(w.left==null)return!0;var M=w.left-x.left,P=w.top-x.top;return M*M+P*P>20*20}ne(r.scroller,"touchstart",function(x){if(!ot(e,x)&&!d(x)&&!Ra(e,x)){r.input.ensurePolled(),clearTimeout(l);var w=+new Date;r.activeTouch={start:w,moved:!1,prev:w-a.end<=300?a:null},x.touches.length==1&&(r.activeTouch.left=x.touches[0].pageX,r.activeTouch.top=x.touches[0].pageY)}}),ne(r.scroller,"touchmove",function(){r.activeTouch&&(r.activeTouch.moved=!0)}),ne(r.scroller,"touchend",function(x){var w=r.activeTouch;if(w&&!Bn(r,x)&&w.left!=null&&!w.moved&&new Date-w.start<300){var M=e.coordsChar(r.activeTouch,"page"),P;!w.prev||m(w,w.prev)?P=new Qe(M,M):!w.prev.prev||m(w,w.prev.prev)?P=e.findWordAt(M):P=new Qe(ae(M.line,0),ye(e.doc,ae(M.line+1,0))),e.setSelection(P.anchor,P.head),e.focus(),At(x)}c()}),ne(r.scroller,"touchcancel",c),ne(r.scroller,"scroll",function(){r.scroller.clientHeight&&(Er(e,r.scroller.scrollTop),wi(e,r.scroller.scrollLeft,!0),Pe(e,"scroll",e))}),ne(r.scroller,"mousewheel",function(x){return Wc(e,x)}),ne(r.scroller,"DOMMouseScroll",function(x){return Wc(e,x)}),ne(r.wrapper,"scroll",function(){return r.wrapper.scrollTop=r.wrapper.scrollLeft=0}),r.dragFunctions={enter:function(x){ot(e,x)||mi(x)},over:function(x){ot(e,x)||(lg(e,x),mi(x))},start:function(x){return ag(e,x)},drop:Ct(e,og),leave:function(x){ot(e,x)||du(e)}};var v=r.input.getField();ne(v,"keyup",function(x){return Su.call(e,x)}),ne(v,"keydown",Ct(e,ku)),ne(v,"keypress",Ct(e,Cu)),ne(v,"focus",function(x){return va(e,x)}),ne(v,"blur",function(x){return Gi(e,x)})}var Fa=[];lt.defineInitHook=function(e){return Fa.push(e)};function Qr(e,r,l,a){var c=e.doc,d;l==null&&(l="add"),l=="smart"&&(c.mode.indent?d=Lr(e,r).state:l="prev");var m=e.options.tabSize,v=Se(c,r),x=Ae(v.text,null,m);v.stateAfter&&(v.stateAfter=null);var w=v.text.match(/^\s*/)[0],M;if(!a&&!/\S/.test(v.text))M=0,l="not";else if(l=="smart"&&(M=c.mode.indent(d,v.text.slice(w.length),v.text),M==_e||M>150)){if(!a)return;l="prev"}l=="prev"?r>c.first?M=Ae(Se(c,r-1).text,null,m):M=0:l=="add"?M=x+e.options.indentUnit:l=="subtract"?M=x-e.options.indentUnit:typeof l=="number"&&(M=x+l),M=Math.max(0,M);var P="",z=0;if(e.options.indentWithTabs)for(var H=Math.floor(M/m);H;--H)z+=m,P+="	";if(z<M&&(P+=re(M-z)),P!=w)return tr(c,P,ae(r,0),ae(r,w.length),"+input"),v.stateAfter=null,!0;for(var q=0;q<c.sel.ranges.length;q++){var ie=c.sel.ranges[q];if(ie.head.line==r&&ie.head.ch<w.length){var ue=ae(r,w.length);Da(c,q,new Qe(ue,ue));break}}}var kn=null;function ao(e){kn=e}function Ha(e,r,l,a,c){var d=e.doc;e.display.shift=!1,a||(a=d.sel);var m=+new Date-200,v=c=="paste"||e.state.pasteIncoming>m,x=_r(r),w=null;if(v&&a.ranges.length>1)if(kn&&kn.text.join(`
`)==r){if(a.ranges.length%kn.text.length==0){w=[];for(var M=0;M<kn.text.length;M++)w.push(d.splitLines(kn.text[M]))}}else x.length==a.ranges.length&&e.options.pasteLinesPerSelection&&(w=De(x,function(pe){return[pe]}));for(var P=e.curOp.updateInput,z=a.ranges.length-1;z>=0;z--){var H=a.ranges[z],q=H.from(),ie=H.to();H.empty()&&(l&&l>0?q=ae(q.line,q.ch-l):e.state.overwrite&&!v?ie=ae(ie.line,Math.min(Se(d,ie.line).text.length,ie.ch+fe(x).length)):v&&kn&&kn.lineWise&&kn.text.join(`
`)==x.join(`
`)&&(q=ie=ae(q.line,0)));var ue={from:q,to:ie,text:w?w[z%w.length]:x,origin:c||(v?"paste":e.state.cutIncoming>m?"cut":"+input")};er(e.doc,ue),St(e,"inputRead",e,ue)}r&&!v&&Au(e,r),Yi(e),e.curOp.updateInput<2&&(e.curOp.updateInput=P),e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=-1}function Ou(e,r){var l=e.clipboardData&&e.clipboardData.getData("Text");if(l)return e.preventDefault(),!r.isReadOnly()&&!r.options.disableInput&&Jt(r,function(){return Ha(r,l,0,null,"paste")}),!0}function Au(e,r){if(!(!e.options.electricChars||!e.options.smartIndent))for(var l=e.doc.sel,a=l.ranges.length-1;a>=0;a--){var c=l.ranges[a];if(!(c.head.ch>100||a&&l.ranges[a-1].head.line==c.head.line)){var d=e.getModeAt(c.head),m=!1;if(d.electricChars){for(var v=0;v<d.electricChars.length;v++)if(r.indexOf(d.electricChars.charAt(v))>-1){m=Qr(e,c.head.line,"smart");break}}else d.electricInput&&d.electricInput.test(Se(e.doc,c.head.line).text.slice(0,c.head.ch))&&(m=Qr(e,c.head.line,"smart"));m&&St(e,"electricInput",e,c.head.line)}}}function Iu(e){for(var r=[],l=[],a=0;a<e.doc.sel.ranges.length;a++){var c=e.doc.sel.ranges[a].head.line,d={anchor:ae(c,0),head:ae(c+1,0)};l.push(d),r.push(e.getRange(d.anchor,d.head))}return{text:r,ranges:l}}function Eu(e,r,l,a){e.setAttribute("autocorrect",l?"":"off"),e.setAttribute("autocapitalize",a?"":"off"),e.setAttribute("spellcheck",!!r)}function Ru(){var e=F("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),r=F("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return b?e.style.width="1000px":e.setAttribute("wrap","off"),E&&(e.style.border="1px solid black"),Eu(e),r}function Ag(e){var r=e.optionHandlers,l=e.helpers={};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(a,c){var d=this.options,m=d[a];d[a]==c&&a!="mode"||(d[a]=c,r.hasOwnProperty(a)&&Ct(this,r[a])(this,c,m),Pe(this,"optionChange",this,a))},getOption:function(a){return this.options[a]},getDoc:function(){return this.doc},addKeyMap:function(a,c){this.state.keyMaps[c?"push":"unshift"](ro(a))},removeKeyMap:function(a){for(var c=this.state.keyMaps,d=0;d<c.length;++d)if(c[d]==a||c[d].name==a)return c.splice(d,1),!0},addOverlay:Wt(function(a,c){var d=a.token?a:e.getMode(this.options,a);if(d.startState)throw new Error("Overlays may not be stateful.");Ee(this.state.overlays,{mode:d,modeSpec:a,opaque:c&&c.opaque,priority:c&&c.priority||0},function(m){return m.priority}),this.state.modeGen++,Vt(this)}),removeOverlay:Wt(function(a){for(var c=this.state.overlays,d=0;d<c.length;++d){var m=c[d].modeSpec;if(m==a||typeof a=="string"&&m.name==a){c.splice(d,1),this.state.modeGen++,Vt(this);return}}}),indentLine:Wt(function(a,c,d){typeof c!="string"&&typeof c!="number"&&(c==null?c=this.options.smartIndent?"smart":"prev":c=c?"add":"subtract"),vi(this.doc,a)&&Qr(this,a,c,d)}),indentSelection:Wt(function(a){for(var c=this.doc.sel.ranges,d=-1,m=0;m<c.length;m++){var v=c[m];if(v.empty())v.head.line>d&&(Qr(this,v.head.line,a,!0),d=v.head.line,m==this.doc.sel.primIndex&&Yi(this));else{var x=v.from(),w=v.to(),M=Math.max(d,x.line);d=Math.min(this.lastLine(),w.line-(w.ch?0:1))+1;for(var P=M;P<d;++P)Qr(this,P,a);var z=this.doc.sel.ranges;x.ch==0&&c.length==z.length&&z[m].from().ch>0&&Da(this.doc,m,new Qe(x,z[m].to()),Fe)}}}),getTokenAt:function(a,c){return Vl(this,a,c)},getLineTokens:function(a,c){return Vl(this,ae(a),c,!0)},getTokenTypeAt:function(a){a=ye(this.doc,a);var c=Ul(this,Se(this.doc,a.line)),d=0,m=(c.length-1)/2,v=a.ch,x;if(v==0)x=c[2];else for(;;){var w=d+m>>1;if((w?c[w*2-1]:0)>=v)m=w;else if(c[w*2+1]<v)d=w+1;else{x=c[w*2+2];break}}var M=x?x.indexOf("overlay "):-1;return M<0?x:M==0?null:x.slice(0,M-1)},getModeAt:function(a){var c=this.doc.mode;return c.innerMode?e.innerMode(c,this.getTokenAt(a).state).mode:c},getHelper:function(a,c){return this.getHelpers(a,c)[0]},getHelpers:function(a,c){var d=[];if(!l.hasOwnProperty(c))return d;var m=l[c],v=this.getModeAt(a);if(typeof v[c]=="string")m[v[c]]&&d.push(m[v[c]]);else if(v[c])for(var x=0;x<v[c].length;x++){var w=m[v[c][x]];w&&d.push(w)}else v.helperType&&m[v.helperType]?d.push(m[v.helperType]):m[v.name]&&d.push(m[v.name]);for(var M=0;M<m._global.length;M++){var P=m._global[M];P.pred(v,this)&&Z(d,P.val)==-1&&d.push(P.val)}return d},getStateAfter:function(a,c){var d=this.doc;return a=Xe(d,a??d.first+d.size-1),Lr(this,a+1,c).state},cursorCoords:function(a,c){var d,m=this.doc.sel.primary();return a==null?d=m.head:typeof a=="object"?d=ye(this.doc,a):d=a?m.from():m.to(),_n(this,d,c||"page")},charCoords:function(a,c){return $s(this,ye(this.doc,a),c||"page")},coordsChar:function(a,c){return a=xc(this,a,c||"page"),ca(this,a.left,a.top)},lineAtHeight:function(a,c){return a=xc(this,{top:a,left:0},c||"page").top,Ln(this.doc,a+this.display.viewOffset)},heightAtLine:function(a,c,d){var m=!1,v;if(typeof a=="number"){var x=this.doc.first+this.doc.size-1;a<this.doc.first?a=this.doc.first:a>x&&(a=x,m=!0),v=Se(this.doc,a)}else v=a;return Us(this,v,{top:0,left:0},c||"page",d||m).top+(m?this.doc.height-zn(v):0)},defaultTextHeight:function(){return Xi(this.display)},defaultCharWidth:function(){return qi(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(a,c,d,m,v){var x=this.display;a=_n(this,ye(this.doc,a));var w=a.bottom,M=a.left;if(c.style.position="absolute",c.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(c),x.sizer.appendChild(c),m=="over")w=a.top;else if(m=="above"||m=="near"){var P=Math.max(x.wrapper.clientHeight,this.doc.height),z=Math.max(x.sizer.clientWidth,x.lineSpace.clientWidth);(m=="above"||a.bottom+c.offsetHeight>P)&&a.top>c.offsetHeight?w=a.top-c.offsetHeight:a.bottom+c.offsetHeight<=P&&(w=a.bottom),M+c.offsetWidth>z&&(M=z-c.offsetWidth)}c.style.top=w+"px",c.style.left=c.style.right="",v=="right"?(M=x.sizer.clientWidth-c.offsetWidth,c.style.right="0px"):(v=="left"?M=0:v=="middle"&&(M=(x.sizer.clientWidth-c.offsetWidth)/2),c.style.left=M+"px"),d&&Dp(this,{left:M,top:w,right:M+c.offsetWidth,bottom:w+c.offsetHeight})},triggerOnKeyDown:Wt(ku),triggerOnKeyPress:Wt(Cu),triggerOnKeyUp:Su,triggerOnMouseDown:Wt(Tu),execCommand:function(a){if(Gr.hasOwnProperty(a))return Gr[a].call(null,this)},triggerElectric:Wt(function(a){Au(this,a)}),findPosH:function(a,c,d,m){var v=1;c<0&&(v=-1,c=-c);for(var x=ye(this.doc,a),w=0;w<c&&(x=Wa(this.doc,x,v,d,m),!x.hitSide);++w);return x},moveH:Wt(function(a,c){var d=this;this.extendSelectionsBy(function(m){return d.display.shift||d.doc.extend||m.empty()?Wa(d.doc,m.head,a,c,d.options.rtlMoveVisually):a<0?m.from():m.to()},He)}),deleteH:Wt(function(a,c){var d=this.doc.sel,m=this.doc;d.somethingSelected()?m.replaceSelection("",null,"+delete"):rr(this,function(v){var x=Wa(m,v.head,a,c,!1);return a<0?{from:x,to:v.head}:{from:v.head,to:x}})}),findPosV:function(a,c,d,m){var v=1,x=m;c<0&&(v=-1,c=-c);for(var w=ye(this.doc,a),M=0;M<c;++M){var P=_n(this,w,"div");if(x==null?x=P.left:P.left=x,w=Fu(this,P,v,d),w.hitSide)break}return w},moveV:Wt(function(a,c){var d=this,m=this.doc,v=[],x=!this.display.shift&&!m.extend&&m.sel.somethingSelected();if(m.extendSelectionsBy(function(M){if(x)return a<0?M.from():M.to();var P=_n(d,M.head,"div");M.goalColumn!=null&&(P.left=M.goalColumn),v.push(P.left);var z=Fu(d,P,a,c);return c=="page"&&M==m.sel.primary()&&ba(d,$s(d,z,"div").top-P.top),z},He),v.length)for(var w=0;w<m.sel.ranges.length;w++)m.sel.ranges[w].goalColumn=v[w]}),findWordAt:function(a){var c=this.doc,d=Se(c,a.line).text,m=a.ch,v=a.ch;if(d){var x=this.getHelper(a,"wordChars");(a.sticky=="before"||v==d.length)&&m?--m:++v;for(var w=d.charAt(m),M=wt(w,x)?function(P){return wt(P,x)}:/\s/.test(w)?function(P){return/\s/.test(P)}:function(P){return!/\s/.test(P)&&!wt(P)};m>0&&M(d.charAt(m-1));)--m;for(;v<d.length&&M(d.charAt(v));)++v}return new Qe(ae(a.line,m),ae(a.line,v))},toggleOverwrite:function(a){a!=null&&a==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?qe(this.display.cursorDiv,"CodeMirror-overwrite"):se(this.display.cursorDiv,"CodeMirror-overwrite"),Pe(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==$e()},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:Wt(function(a,c){Ir(this,a,c)}),getScrollInfo:function(){var a=this.display.scroller;return{left:a.scrollLeft,top:a.scrollTop,height:a.scrollHeight-Mn(this)-this.display.barHeight,width:a.scrollWidth-Mn(this)-this.display.barWidth,clientHeight:sa(this),clientWidth:yi(this)}},scrollIntoView:Wt(function(a,c){a==null?(a={from:this.doc.sel.primary().head,to:null},c==null&&(c=this.options.cursorScrollMargin)):typeof a=="number"?a={from:ae(a,0),to:null}:a.from==null&&(a={from:a,to:null}),a.to||(a.to=a.from),a.margin=c||0,a.from.line!=null?Pp(this,a):Mc(this,a.from,a.to,a.margin)}),setSize:Wt(function(a,c){var d=this,m=function(x){return typeof x=="number"||/^\d+$/.test(String(x))?x+"px":x};a!=null&&(this.display.wrapper.style.width=m(a)),c!=null&&(this.display.wrapper.style.height=m(c)),this.options.lineWrapping&&vc(this);var v=this.display.viewFrom;this.doc.iter(v,this.display.viewTo,function(x){if(x.widgets){for(var w=0;w<x.widgets.length;w++)if(x.widgets[w].noHScroll){ni(d,v,"widget");break}}++v}),this.curOp.forceUpdate=!0,Pe(this,"refresh",this)}),operation:function(a){return Jt(this,a)},startOperation:function(){return Si(this)},endOperation:function(){return Ci(this)},refresh:Wt(function(){var a=this.display.cachedTextHeight;Vt(this),this.curOp.forceUpdate=!0,Or(this),Ir(this,this.doc.scrollLeft,this.doc.scrollTop),wa(this.display),(a==null||Math.abs(a-Xi(this.display))>.5||this.options.lineWrapping)&&da(this),Pe(this,"refresh",this)}),swapDoc:Wt(function(a){var c=this.doc;return c.cm=null,this.state.selectingText&&this.state.selectingText(),$c(this,a),Or(this),this.display.input.reset(),Ir(this,a.scrollLeft,a.scrollTop),this.curOp.forceScroll=!0,St(this,"swapDoc",this,c),c}),phrase:function(a){var c=this.options.phrases;return c&&Object.prototype.hasOwnProperty.call(c,a)?c[a]:a},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},rn(e),e.registerHelper=function(a,c,d){l.hasOwnProperty(a)||(l[a]=e[a]={_global:[]}),l[a][c]=d},e.registerGlobalHelper=function(a,c,d,m){e.registerHelper(a,c,m),l[a]._global.push({pred:d,val:m})}}function Wa(e,r,l,a,c){var d=r,m=l,v=Se(e,r.line),x=c&&e.direction=="rtl"?-l:l;function w(){var ve=r.line+x;return ve<e.first||ve>=e.first+e.size?!1:(r=new ae(ve,r.ch,r.sticky),v=Se(e,ve))}function M(ve){var ge;if(a=="codepoint"){var xe=v.text.charCodeAt(r.ch+(l>0?0:-1));if(isNaN(xe))ge=null;else{var Oe=l>0?xe>=55296&&xe<56320:xe>=56320&&xe<57343;ge=new ae(r.line,Math.max(0,Math.min(v.text.length,r.ch+l*(Oe?2:1))),-l)}}else c?ge=pg(e.cm,v,r,l):ge=Oa(v,r,l);if(ge==null)if(!ve&&w())r=Aa(c,e.cm,v,r.line,x);else return!1;else r=ge;return!0}if(a=="char"||a=="codepoint")M();else if(a=="column")M(!0);else if(a=="word"||a=="group")for(var P=null,z=a=="group",H=e.cm&&e.cm.getHelper(r,"wordChars"),q=!0;!(l<0&&!M(!q));q=!1){var ie=v.text.charAt(r.ch)||`
`,ue=wt(ie,H)?"w":z&&ie==`
`?"n":!z||/\s/.test(ie)?null:"p";if(z&&!q&&!ue&&(ue="s"),P&&P!=ue){l<0&&(l=1,M(),r.sticky="after");break}if(ue&&(P=ue),l>0&&!M(!q))break}var pe=to(e,r,d,m,!0);return A(d,pe)&&(pe.hitSide=!0),pe}function Fu(e,r,l,a){var c=e.doc,d=r.left,m;if(a=="page"){var v=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),x=Math.max(v-.5*Xi(e.display),3);m=(l>0?r.bottom:r.top)+l*x}else a=="line"&&(m=l>0?r.bottom+3:r.top-3);for(var w;w=ca(e,d,m),!!w.outside;){if(l<0?m<=0:m>=c.height){w.hitSide=!0;break}m+=l*5}return w}var nt=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new U,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};nt.prototype.init=function(e){var r=this,l=this,a=l.cm,c=l.div=e.lineDiv;c.contentEditable=!0,Eu(c,a.options.spellcheck,a.options.autocorrect,a.options.autocapitalize);function d(v){for(var x=v.target;x;x=x.parentNode){if(x==c)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(x.className))break}return!1}ne(c,"paste",function(v){!d(v)||ot(a,v)||Ou(v,a)||g<=11&&setTimeout(Ct(a,function(){return r.updateFromDOM()}),20)}),ne(c,"compositionstart",function(v){r.composing={data:v.data,done:!1}}),ne(c,"compositionupdate",function(v){r.composing||(r.composing={data:v.data,done:!1})}),ne(c,"compositionend",function(v){r.composing&&(v.data!=r.composing.data&&r.readFromDOMSoon(),r.composing.done=!0)}),ne(c,"touchstart",function(){return l.forceCompositionEnd()}),ne(c,"input",function(){r.composing||r.readFromDOMSoon()});function m(v){if(!(!d(v)||ot(a,v))){if(a.somethingSelected())ao({lineWise:!1,text:a.getSelections()}),v.type=="cut"&&a.replaceSelection("",null,"cut");else if(a.options.lineWiseCopyCut){var x=Iu(a);ao({lineWise:!0,text:x.text}),v.type=="cut"&&a.operation(function(){a.setSelections(x.ranges,0,Fe),a.replaceSelection("",null,"cut")})}else return;if(v.clipboardData){v.clipboardData.clearData();var w=kn.text.join(`
`);if(v.clipboardData.setData("Text",w),v.clipboardData.getData("Text")==w){v.preventDefault();return}}var M=Ru(),P=M.firstChild;a.display.lineSpace.insertBefore(M,a.display.lineSpace.firstChild),P.value=kn.text.join(`
`);var z=$e();we(P),setTimeout(function(){a.display.lineSpace.removeChild(M),z.focus(),z==c&&l.showPrimarySelection()},50)}}ne(c,"copy",m),ne(c,"cut",m)},nt.prototype.screenReaderLabelChanged=function(e){e?this.div.setAttribute("aria-label",e):this.div.removeAttribute("aria-label")},nt.prototype.prepareSelection=function(){var e=Tc(this.cm,!1);return e.focus=$e()==this.div,e},nt.prototype.showSelection=function(e,r){!e||!this.cm.display.view.length||((e.focus||r)&&this.showPrimarySelection(),this.showMultipleSelections(e))},nt.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},nt.prototype.showPrimarySelection=function(){var e=this.getSelection(),r=this.cm,l=r.doc.sel.primary(),a=l.from(),c=l.to();if(r.display.viewTo==r.display.viewFrom||a.line>=r.display.viewTo||c.line<r.display.viewFrom){e.removeAllRanges();return}var d=lo(r,e.anchorNode,e.anchorOffset),m=lo(r,e.focusNode,e.focusOffset);if(!(d&&!d.bad&&m&&!m.bad&&k(Re(d,m),a)==0&&k(ce(d,m),c)==0)){var v=r.display.view,x=a.line>=r.display.viewFrom&&Hu(r,a)||{node:v[0].measure.map[2],offset:0},w=c.line<r.display.viewTo&&Hu(r,c);if(!w){var M=v[v.length-1].measure,P=M.maps?M.maps[M.maps.length-1]:M.map;w={node:P[P.length-1],offset:P[P.length-2]-P[P.length-3]}}if(!x||!w){e.removeAllRanges();return}var z=e.rangeCount&&e.getRangeAt(0),H;try{H=me(x.node,x.offset,w.offset,w.node)}catch{}H&&(!o&&r.state.focused?(e.collapse(x.node,x.offset),H.collapsed||(e.removeAllRanges(),e.addRange(H))):(e.removeAllRanges(),e.addRange(H)),z&&e.anchorNode==null?e.addRange(z):o&&this.startGracePeriod()),this.rememberSelection()}},nt.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){return e.cm.curOp.selectionChanged=!0})},20)},nt.prototype.showMultipleSelections=function(e){R(this.cm.display.cursorDiv,e.cursors),R(this.cm.display.selectionDiv,e.selection)},nt.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},nt.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var r=e.getRangeAt(0).commonAncestorContainer;return Me(this.div,r)},nt.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||$e()!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},nt.prototype.blur=function(){this.div.blur()},nt.prototype.getField=function(){return this.div},nt.prototype.supportsTouch=function(){return!0},nt.prototype.receivedFocus=function(){var e=this,r=this;this.selectionInEditor()?setTimeout(function(){return e.pollSelection()},20):Jt(this.cm,function(){return r.cm.curOp.selectionChanged=!0});function l(){r.cm.state.focused&&(r.pollSelection(),r.polling.set(r.cm.options.pollInterval,l))}this.polling.set(this.cm.options.pollInterval,l)},nt.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},nt.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var e=this.getSelection(),r=this.cm;if(I&&T&&this.cm.display.gutterSpecs.length&&Ig(e.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var l=lo(r,e.anchorNode,e.anchorOffset),a=lo(r,e.focusNode,e.focusOffset);l&&a&&Jt(r,function(){Et(r.doc,ri(l,a),Fe),(l.bad||a.bad)&&(r.curOp.selectionChanged=!0)})}}},nt.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e=this.cm,r=e.display,l=e.doc.sel.primary(),a=l.from(),c=l.to();if(a.ch==0&&a.line>e.firstLine()&&(a=ae(a.line-1,Se(e.doc,a.line-1).length)),c.ch==Se(e.doc,c.line).text.length&&c.line<e.lastLine()&&(c=ae(c.line+1,0)),a.line<r.viewFrom||c.line>r.viewTo-1)return!1;var d,m,v;a.line==r.viewFrom||(d=_i(e,a.line))==0?(m=Je(r.view[0].line),v=r.view[0].node):(m=Je(r.view[d].line),v=r.view[d-1].node.nextSibling);var x=_i(e,c.line),w,M;if(x==r.view.length-1?(w=r.viewTo-1,M=r.lineDiv.lastChild):(w=Je(r.view[x+1].line)-1,M=r.view[x+1].node.previousSibling),!v)return!1;for(var P=e.doc.splitLines(Eg(e,v,M,m,w)),z=Tn(e.doc,ae(m,0),ae(w,Se(e.doc,w).text.length));P.length>1&&z.length>1;)if(fe(P)==fe(z))P.pop(),z.pop(),w--;else if(P[0]==z[0])P.shift(),z.shift(),m++;else break;for(var H=0,q=0,ie=P[0],ue=z[0],pe=Math.min(ie.length,ue.length);H<pe&&ie.charCodeAt(H)==ue.charCodeAt(H);)++H;for(var ve=fe(P),ge=fe(z),xe=Math.min(ve.length-(P.length==1?H:0),ge.length-(z.length==1?H:0));q<xe&&ve.charCodeAt(ve.length-q-1)==ge.charCodeAt(ge.length-q-1);)++q;if(P.length==1&&z.length==1&&m==a.line)for(;H&&H>a.ch&&ve.charCodeAt(ve.length-q-1)==ge.charCodeAt(ge.length-q-1);)H--,q++;P[P.length-1]=ve.slice(0,ve.length-q).replace(/^\u200b+/,""),P[0]=P[0].slice(H).replace(/\u200b+$/,"");var Oe=ae(m,H),Le=ae(w,z.length?fe(z).length-q:0);if(P.length>1||P[0]||k(Oe,Le))return tr(e.doc,P,Oe,Le,"+input"),!0},nt.prototype.ensurePolled=function(){this.forceCompositionEnd()},nt.prototype.reset=function(){this.forceCompositionEnd()},nt.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},nt.prototype.readFromDOMSoon=function(){var e=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(e.readDOMTimeout=null,e.composing)if(e.composing.done)e.composing=null;else return;e.updateFromDOM()},80))},nt.prototype.updateFromDOM=function(){var e=this;(this.cm.isReadOnly()||!this.pollContent())&&Jt(this.cm,function(){return Vt(e.cm)})},nt.prototype.setUneditable=function(e){e.contentEditable="false"},nt.prototype.onKeyPress=function(e){e.charCode==0||this.composing||(e.preventDefault(),this.cm.isReadOnly()||Ct(this.cm,Ha)(this.cm,String.fromCharCode(e.charCode==null?e.keyCode:e.charCode),0))},nt.prototype.readOnlyChanged=function(e){this.div.contentEditable=String(e!="nocursor")},nt.prototype.onContextMenu=function(){},nt.prototype.resetPosition=function(){},nt.prototype.needsContentAttribute=!0;function Hu(e,r){var l=oa(e,r.line);if(!l||l.hidden)return null;var a=Se(e.doc,r.line),c=hc(l,a,r.line),d=Y(a,e.doc.direction),m="left";if(d){var v=Q(d,r.ch);m=v%2?"right":"left"}var x=gc(c.map,r.ch,m);return x.offset=x.collapse=="right"?x.end:x.start,x}function Ig(e){for(var r=e;r;r=r.parentNode)if(/CodeMirror-gutter-wrapper/.test(r.className))return!0;return!1}function or(e,r){return r&&(e.bad=!0),e}function Eg(e,r,l,a,c){var d="",m=!1,v=e.doc.lineSeparator(),x=!1;function w(H){return function(q){return q.id==H}}function M(){m&&(d+=v,x&&(d+=v),m=x=!1)}function P(H){H&&(M(),d+=H)}function z(H){if(H.nodeType==1){var q=H.getAttribute("cm-text");if(q){P(q);return}var ie=H.getAttribute("cm-marker"),ue;if(ie){var pe=e.findMarks(ae(a,0),ae(c+1,0),w(+ie));pe.length&&(ue=pe[0].find(0))&&P(Tn(e.doc,ue.from,ue.to).join(v));return}if(H.getAttribute("contenteditable")=="false")return;var ve=/^(pre|div|p|li|table|br)$/i.test(H.nodeName);if(!/^br$/i.test(H.nodeName)&&H.textContent.length==0)return;ve&&M();for(var ge=0;ge<H.childNodes.length;ge++)z(H.childNodes[ge]);/^(pre|p)$/i.test(H.nodeName)&&(x=!0),ve&&(m=!0)}else H.nodeType==3&&P(H.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;z(r),r!=l;)r=r.nextSibling,x=!1;return d}function lo(e,r,l){var a;if(r==e.display.lineDiv){if(a=e.display.lineDiv.childNodes[l],!a)return or(e.clipPos(ae(e.display.viewTo-1)),!0);r=null,l=0}else for(a=r;;a=a.parentNode){if(!a||a==e.display.lineDiv)return null;if(a.parentNode&&a.parentNode==e.display.lineDiv)break}for(var c=0;c<e.display.view.length;c++){var d=e.display.view[c];if(d.node==a)return Rg(d,r,l)}}function Rg(e,r,l){var a=e.text.firstChild,c=!1;if(!r||!Me(a,r))return or(ae(Je(e.line),0),!0);if(r==a&&(c=!0,r=a.childNodes[l],l=0,!r)){var d=e.rest?fe(e.rest):e.line;return or(ae(Je(d),d.text.length),c)}var m=r.nodeType==3?r:null,v=r;for(!m&&r.childNodes.length==1&&r.firstChild.nodeType==3&&(m=r.firstChild,l&&(l=m.nodeValue.length));v.parentNode!=a;)v=v.parentNode;var x=e.measure,w=x.maps;function M(ue,pe,ve){for(var ge=-1;ge<(w?w.length:0);ge++)for(var xe=ge<0?x.map:w[ge],Oe=0;Oe<xe.length;Oe+=3){var Le=xe[Oe+2];if(Le==ue||Le==pe){var We=Je(ge<0?e.line:e.rest[ge]),st=xe[Oe]+ve;return(ve<0||Le!=ue)&&(st=xe[Oe+(ve?1:0)]),ae(We,st)}}}var P=M(m,v,l);if(P)return or(P,c);for(var z=v.nextSibling,H=m?m.nodeValue.length-l:0;z;z=z.nextSibling){if(P=M(z,z.firstChild,0),P)return or(ae(P.line,P.ch-H),c);H+=z.textContent.length}for(var q=v.previousSibling,ie=l;q;q=q.previousSibling){if(P=M(q,q.firstChild,-1),P)return or(ae(P.line,P.ch+ie),c);ie+=q.textContent.length}}var mt=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new U,this.hasSelection=!1,this.composing=null};mt.prototype.init=function(e){var r=this,l=this,a=this.cm;this.createField(e);var c=this.textarea;e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),E&&(c.style.width="0px"),ne(c,"input",function(){p&&g>=9&&r.hasSelection&&(r.hasSelection=null),l.poll()}),ne(c,"paste",function(m){ot(a,m)||Ou(m,a)||(a.state.pasteIncoming=+new Date,l.fastPoll())});function d(m){if(!ot(a,m)){if(a.somethingSelected())ao({lineWise:!1,text:a.getSelections()});else if(a.options.lineWiseCopyCut){var v=Iu(a);ao({lineWise:!0,text:v.text}),m.type=="cut"?a.setSelections(v.ranges,null,Fe):(l.prevInput="",c.value=v.text.join(`
`),we(c))}else return;m.type=="cut"&&(a.state.cutIncoming=+new Date)}}ne(c,"cut",d),ne(c,"copy",d),ne(e.scroller,"paste",function(m){if(!(Bn(e,m)||ot(a,m))){if(!c.dispatchEvent){a.state.pasteIncoming=+new Date,l.focus();return}var v=new Event("paste");v.clipboardData=m.clipboardData,c.dispatchEvent(v)}}),ne(e.lineSpace,"selectstart",function(m){Bn(e,m)||At(m)}),ne(c,"compositionstart",function(){var m=a.getCursor("from");l.composing&&l.composing.range.clear(),l.composing={start:m,range:a.markText(m,a.getCursor("to"),{className:"CodeMirror-composing"})}}),ne(c,"compositionend",function(){l.composing&&(l.poll(),l.composing.range.clear(),l.composing=null)})},mt.prototype.createField=function(e){this.wrapper=Ru(),this.textarea=this.wrapper.firstChild},mt.prototype.screenReaderLabelChanged=function(e){e?this.textarea.setAttribute("aria-label",e):this.textarea.removeAttribute("aria-label")},mt.prototype.prepareSelection=function(){var e=this.cm,r=e.display,l=e.doc,a=Tc(e);if(e.options.moveInputWithCursor){var c=_n(e,l.sel.primary().head,"div"),d=r.wrapper.getBoundingClientRect(),m=r.lineDiv.getBoundingClientRect();a.teTop=Math.max(0,Math.min(r.wrapper.clientHeight-10,c.top+m.top-d.top)),a.teLeft=Math.max(0,Math.min(r.wrapper.clientWidth-10,c.left+m.left-d.left))}return a},mt.prototype.showSelection=function(e){var r=this.cm,l=r.display;R(l.cursorDiv,e.cursors),R(l.selectionDiv,e.selection),e.teTop!=null&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},mt.prototype.reset=function(e){if(!(this.contextMenuPending||this.composing)){var r=this.cm;if(r.somethingSelected()){this.prevInput="";var l=r.getSelection();this.textarea.value=l,r.state.focused&&we(this.textarea),p&&g>=9&&(this.hasSelection=l)}else e||(this.prevInput=this.textarea.value="",p&&g>=9&&(this.hasSelection=null))}},mt.prototype.getField=function(){return this.textarea},mt.prototype.supportsTouch=function(){return!1},mt.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!j||$e()!=this.textarea))try{this.textarea.focus()}catch{}},mt.prototype.blur=function(){this.textarea.blur()},mt.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},mt.prototype.receivedFocus=function(){this.slowPoll()},mt.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},mt.prototype.fastPoll=function(){var e=!1,r=this;r.pollingFast=!0;function l(){var a=r.poll();!a&&!e?(e=!0,r.polling.set(60,l)):(r.pollingFast=!1,r.slowPoll())}r.polling.set(20,l)},mt.prototype.poll=function(){var e=this,r=this.cm,l=this.textarea,a=this.prevInput;if(this.contextMenuPending||!r.state.focused||Os(l)&&!a&&!this.composing||r.isReadOnly()||r.options.disableInput||r.state.keySeq)return!1;var c=l.value;if(c==a&&!r.somethingSelected())return!1;if(p&&g>=9&&this.hasSelection===c||K&&/[\uf700-\uf7ff]/.test(c))return r.display.input.reset(),!1;if(r.doc.sel==r.display.selForContextMenu){var d=c.charCodeAt(0);if(d==8203&&!a&&(a="â€‹"),d==8666)return this.reset(),this.cm.execCommand("undo")}for(var m=0,v=Math.min(a.length,c.length);m<v&&a.charCodeAt(m)==c.charCodeAt(m);)++m;return Jt(r,function(){Ha(r,c.slice(m),a.length-m,null,e.composing?"*compose":null),c.length>1e3||c.indexOf(`
`)>-1?l.value=e.prevInput="":e.prevInput=c,e.composing&&(e.composing.range.clear(),e.composing.range=r.markText(e.composing.start,r.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},mt.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},mt.prototype.onKeyPress=function(){p&&g>=9&&(this.hasSelection=null),this.fastPoll()},mt.prototype.onContextMenu=function(e){var r=this,l=r.cm,a=l.display,c=r.textarea;r.contextMenuPending&&r.contextMenuPending();var d=xi(l,e),m=a.scroller.scrollTop;if(!d||L)return;var v=l.options.resetSelectionOnContextMenu;v&&l.doc.sel.contains(d)==-1&&Ct(l,Et)(l.doc,ri(d),Fe);var x=c.style.cssText,w=r.wrapper.style.cssText,M=r.wrapper.offsetParent.getBoundingClientRect();r.wrapper.style.cssText="position: static",c.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(e.clientY-M.top-5)+"px; left: "+(e.clientX-M.left-5)+`px;
      z-index: 1000; background: `+(p?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var P;b&&(P=window.scrollY),a.input.focus(),b&&window.scrollTo(null,P),a.input.reset(),l.somethingSelected()||(c.value=r.prevInput=" "),r.contextMenuPending=H,a.selForContextMenu=l.doc.sel,clearTimeout(a.detectingSelectAll);function z(){if(c.selectionStart!=null){var ie=l.somethingSelected(),ue="â€‹"+(ie?c.value:"");c.value="â‡š",c.value=ue,r.prevInput=ie?"":"â€‹",c.selectionStart=1,c.selectionEnd=ue.length,a.selForContextMenu=l.doc.sel}}function H(){if(r.contextMenuPending==H&&(r.contextMenuPending=!1,r.wrapper.style.cssText=w,c.style.cssText=x,p&&g<9&&a.scrollbars.setScrollTop(a.scroller.scrollTop=m),c.selectionStart!=null)){(!p||p&&g<9)&&z();var ie=0,ue=function(){a.selForContextMenu==l.doc.sel&&c.selectionStart==0&&c.selectionEnd>0&&r.prevInput=="â€‹"?Ct(l,nu)(l):ie++<10?a.detectingSelectAll=setTimeout(ue,500):(a.selForContextMenu=null,a.input.reset())};a.detectingSelectAll=setTimeout(ue,200)}}if(p&&g>=9&&z(),de){mi(e);var q=function(){Be(window,"mouseup",q),setTimeout(H,20)};ne(window,"mouseup",q)}else setTimeout(H,50)},mt.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled=e=="nocursor",this.textarea.readOnly=!!e},mt.prototype.setUneditable=function(){},mt.prototype.needsContentAttribute=!1;function Fg(e,r){if(r=r?Te(r):{},r.value=e.value,!r.tabindex&&e.tabIndex&&(r.tabindex=e.tabIndex),!r.placeholder&&e.placeholder&&(r.placeholder=e.placeholder),r.autofocus==null){var l=$e();r.autofocus=l==e||e.getAttribute("autofocus")!=null&&l==document.body}function a(){e.value=v.getValue()}var c;if(e.form&&(ne(e.form,"submit",a),!r.leaveSubmitMethodAlone)){var d=e.form;c=d.submit;try{var m=d.submit=function(){a(),d.submit=c,d.submit(),d.submit=m}}catch{}}r.finishInit=function(x){x.save=a,x.getTextArea=function(){return e},x.toTextArea=function(){x.toTextArea=isNaN,a(),e.parentNode.removeChild(x.getWrapperElement()),e.style.display="",e.form&&(Be(e.form,"submit",a),!r.leaveSubmitMethodAlone&&typeof e.form.submit=="function"&&(e.form.submit=c))}},e.style.display="none";var v=lt(function(x){return e.parentNode.insertBefore(x,e.nextSibling)},r);return v}function Hg(e){e.off=Be,e.on=ne,e.wheelEventPixels=Vp,e.Doc=Kt,e.splitLines=_r,e.countColumn=Ae,e.findColumn=at,e.isWordChar=Ke,e.Pass=_e,e.signal=Pe,e.Line=ji,e.changeEnd=si,e.scrollbarModel=Oc,e.Pos=ae,e.cmpPos=k,e.modes=fn,e.mimeModes=on,e.resolveMode=Bi,e.getMode=Ui,e.modeExtensions=yn,e.extendMode=bn,e.copyState=an,e.startState=Sr,e.innerMode=kr,e.commands=Gr,e.keyMap=$n,e.keyName=yu,e.isModifierKey=mu,e.lookupKey=ir,e.normalizeKeyMap=dg,e.StringStream=ht,e.SharedTextMarker=Kr,e.TextMarker=ai,e.LineWidget=Vr,e.e_preventDefault=At,e.e_stopPropagation=zi,e.e_stop=mi,e.addClass=qe,e.contains=Me,e.rmClass=se,e.keyNames=li}Mg(lt),Ag(lt);var Wg="iter insert remove copy getEditor constructor".split(" ");for(var co in Kt.prototype)Kt.prototype.hasOwnProperty(co)&&Z(Wg,co)<0&&(lt.prototype[co]=function(e){return function(){return e.apply(this.doc,arguments)}}(Kt.prototype[co]));return rn(Kt),lt.inputStyles={textarea:mt,contenteditable:nt},lt.defineMode=function(e){!lt.defaults.mode&&e!="null"&&(lt.defaults.mode=e),Is.apply(this,arguments)},lt.defineMIME=Hn,lt.defineMode("null",function(){return{token:function(e){return e.skipToEnd()}}}),lt.defineMIME("text/plain","null"),lt.defineExtension=function(e,r){lt.prototype[e]=r},lt.defineDocExtension=function(e,r){Kt.prototype[e]=r},lt.fromTextArea=Fg,Hg(lt),lt.version="5.65.2",lt})}(Lo)),Lo.exports}var pm=Vo();const Ls=hm(pm);var Ju={exports:{}},Qu;function gm(){return Qu||(Qu=1,function(i,t){(function(n){n(Vo())})(function(n){n.defineMode("javascript",function(s,o){var u=s.indentUnit,f=o.statementIndent,h=o.jsonld,p=o.json||h,g=o.trackScope!==!1,b=o.typescript,_=o.wordCharacters||/[\w$\xa1-\uffff]/,T=function(){function k(It){return{type:It,style:"keyword"}}var A=k("keyword a"),J=k("keyword b"),ce=k("keyword c"),Re=k("keyword d"),Xe=k("operator"),ye={type:"atom",style:"atom"};return{if:k("if"),while:A,with:A,else:J,do:J,try:J,finally:J,return:Re,break:Re,continue:Re,new:k("new"),delete:ce,void:ce,throw:ce,debugger:k("debugger"),var:k("var"),const:k("var"),let:k("var"),function:k("function"),catch:k("catch"),for:k("for"),switch:k("switch"),case:k("case"),default:k("default"),in:Xe,typeof:Xe,instanceof:Xe,true:ye,false:ye,null:ye,undefined:ye,NaN:ye,Infinity:ye,this:k("this"),class:k("class"),super:k("atom"),yield:ce,export:k("export"),import:k("import"),extends:ce,await:ce}}(),L=/[+\-*&%=<>!?|~^@]/,D=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function O(k){for(var A=!1,J,ce=!1;(J=k.next())!=null;){if(!A){if(J=="/"&&!ce)return;J=="["?ce=!0:ce&&J=="]"&&(ce=!1)}A=!A&&J=="\\"}}var N,E;function I(k,A,J){return N=k,E=J,A}function j(k,A){var J=k.next();if(J=='"'||J=="'")return A.tokenize=K(J),A.tokenize(k,A);if(J=="."&&k.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return I("number","number");if(J=="."&&k.match(".."))return I("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(J))return I(J);if(J=="="&&k.eat(">"))return I("=>","operator");if(J=="0"&&k.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return I("number","number");if(/\d/.test(J))return k.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),I("number","number");if(J=="/")return k.eat("*")?(A.tokenize=X,X(k,A)):k.eat("/")?(k.skipToEnd(),I("comment","comment")):ae(k,A,1)?(O(k),k.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),I("regexp","string-2")):(k.eat("="),I("operator","operator",k.current()));if(J=="`")return A.tokenize=V,V(k,A);if(J=="#"&&k.peek()=="!")return k.skipToEnd(),I("meta","meta");if(J=="#"&&k.eatWhile(_))return I("variable","property");if(J=="<"&&k.match("!--")||J=="-"&&k.match("->")&&!/\S/.test(k.string.slice(0,k.start)))return k.skipToEnd(),I("comment","comment");if(L.test(J))return(J!=">"||!A.lexical||A.lexical.type!=">")&&(k.eat("=")?(J=="!"||J=="=")&&k.eat("="):/[<>*+\-|&?]/.test(J)&&(k.eat(J),J==">"&&k.eat(J))),J=="?"&&k.eat(".")?I("."):I("operator","operator",k.current());if(_.test(J)){k.eatWhile(_);var ce=k.current();if(A.lastType!="."){if(T.propertyIsEnumerable(ce)){var Re=T[ce];return I(Re.type,Re.style,ce)}if(ce=="async"&&k.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return I("async","keyword",ce)}return I("variable","variable",ce)}}function K(k){return function(A,J){var ce=!1,Re;if(h&&A.peek()=="@"&&A.match(D))return J.tokenize=j,I("jsonld-keyword","meta");for(;(Re=A.next())!=null&&!(Re==k&&!ce);)ce=!ce&&Re=="\\";return ce||(J.tokenize=j),I("string","string")}}function X(k,A){for(var J=!1,ce;ce=k.next();){if(ce=="/"&&J){A.tokenize=j;break}J=ce=="*"}return I("comment","comment")}function V(k,A){for(var J=!1,ce;(ce=k.next())!=null;){if(!J&&(ce=="`"||ce=="$"&&k.eat("{"))){A.tokenize=j;break}J=!J&&ce=="\\"}return I("quasi","string-2",k.current())}var G="([{}])";function ee(k,A){A.fatArrowAt&&(A.fatArrowAt=null);var J=k.string.indexOf("=>",k.start);if(!(J<0)){if(b){var ce=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(k.string.slice(k.start,J));ce&&(J=ce.index)}for(var Re=0,Xe=!1,ye=J-1;ye>=0;--ye){var It=k.string.charAt(ye),ln=G.indexOf(It);if(ln>=0&&ln<3){if(!Re){++ye;break}if(--Re==0){It=="("&&(Xe=!0);break}}else if(ln>=3&&ln<6)++Re;else if(_.test(It))Xe=!0;else if(/["'\/`]/.test(It))for(;;--ye){if(ye==0)return;var $i=k.string.charAt(ye-1);if($i==It&&k.string.charAt(ye-2)!="\\"){ye--;break}}else if(Xe&&!Re){++ye;break}}Xe&&!Re&&(A.fatArrowAt=ye)}}var de={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function he(k,A,J,ce,Re,Xe){this.indented=k,this.column=A,this.type=J,this.prev=Re,this.info=Xe,ce!=null&&(this.align=ce)}function se(k,A){if(!g)return!1;for(var J=k.localVars;J;J=J.next)if(J.name==A)return!0;for(var ce=k.context;ce;ce=ce.prev)for(var J=ce.vars;J;J=J.next)if(J.name==A)return!0}function le(k,A,J,ce,Re){var Xe=k.cc;for(R.state=k,R.stream=Re,R.marked=null,R.cc=Xe,R.style=A,k.lexical.hasOwnProperty("align")||(k.lexical.align=!0);;){var ye=Xe.length?Xe.pop():p?He:Fe;if(ye(J,ce)){for(;Xe.length&&Xe[Xe.length-1].lex;)Xe.pop()();return R.marked?R.marked:J=="variable"&&se(k,ce)?"variable-2":A}}}var R={state:null,column:null,marked:null,cc:null};function F(){for(var k=arguments.length-1;k>=0;k--)R.cc.push(arguments[k])}function S(){return F.apply(null,arguments),!0}function me(k,A){for(var J=A;J;J=J.next)if(J.name==k)return!0;return!1}function Me(k){var A=R.state;if(R.marked="def",!!g){if(A.context){if(A.lexical.info=="var"&&A.context&&A.context.block){var J=$e(k,A.context);if(J!=null){A.context=J;return}}else if(!me(k,A.localVars)){A.localVars=new we(k,A.localVars);return}}o.globalVars&&!me(k,A.globalVars)&&(A.globalVars=new we(k,A.globalVars))}}function $e(k,A){if(A)if(A.block){var J=$e(k,A.prev);return J?J==A.prev?A:new Ve(J,A.vars,!0):null}else return me(k,A.vars)?A:new Ve(A.prev,new we(k,A.vars),!1);else return null}function qe(k){return k=="public"||k=="private"||k=="protected"||k=="abstract"||k=="readonly"}function Ve(k,A,J){this.prev=k,this.vars=A,this.block=J}function we(k,A){this.name=k,this.next=A}var ke=new we("this",new we("arguments",null));function Te(){R.state.context=new Ve(R.state.context,R.state.localVars,!1),R.state.localVars=ke}function Ae(){R.state.context=new Ve(R.state.context,R.state.localVars,!0),R.state.localVars=null}Te.lex=Ae.lex=!0;function U(){R.state.localVars=R.state.context.vars,R.state.context=R.state.context.prev}U.lex=!0;function Z(k,A){var J=function(){var ce=R.state,Re=ce.indented;if(ce.lexical.type=="stat")Re=ce.lexical.indented;else for(var Xe=ce.lexical;Xe&&Xe.type==")"&&Xe.align;Xe=Xe.prev)Re=Xe.indented;ce.lexical=new he(Re,R.stream.column(),k,null,ce.lexical,A)};return J.lex=!0,J}function te(){var k=R.state;k.lexical.prev&&(k.lexical.type==")"&&(k.indented=k.lexical.indented),k.lexical=k.lexical.prev)}te.lex=!0;function _e(k){function A(J){return J==k?S():k==";"||J=="}"||J==")"||J=="]"?F():S(A)}return A}function Fe(k,A){return k=="var"?S(Z("vardef",A),br,_e(";"),te):k=="keyword a"?S(Z("form"),Ft,Fe,te):k=="keyword b"?S(Z("form"),Fe,te):k=="keyword d"?R.stream.match(/^\s*$/,!1)?S():S(Z("stat"),fe,_e(";"),te):k=="debugger"?S(_e(";")):k=="{"?S(Z("}"),Ae,Y,te,U):k==";"?S():k=="if"?(R.state.lexical.info=="else"&&R.state.cc[R.state.cc.length-1]==te&&R.state.cc.pop()(),S(Z("form"),Ft,Fe,te,Os)):k=="function"?S(fn):k=="for"?S(Z("form"),Ae,As,Fe,U,te):k=="class"||b&&A=="interface"?(R.marked="keyword",S(Z("form",k=="class"?k:A),Ui,te)):k=="variable"?b&&A=="declare"?(R.marked="keyword",S(Fe)):b&&(A=="module"||A=="enum"||A=="type")&&R.stream.match(/^\s*\w/,!1)?(R.marked="keyword",A=="enum"?S(Ln):A=="type"?S(Is,_e("operator"),Pe,_e(";")):S(Z("form"),jt,_e("{"),Z("}"),Y,te,te)):b&&A=="namespace"?(R.marked="keyword",S(Z("form"),He,Fe,te)):b&&A=="abstract"?(R.marked="keyword",S(Fe)):S(Z("stat"),vn):k=="switch"?S(Z("form"),Ft,_e("{"),Z("}","switch"),Ae,Y,te,te,U):k=="case"?S(He,_e(":")):k=="default"?S(_e(":")):k=="catch"?S(Z("form"),Te,$t,Fe,te,U):k=="export"?S(Z("stat"),kr,te):k=="import"?S(Z("stat"),ht,te):k=="async"?S(Fe):A=="@"?S(He,Fe):F(Z("stat"),He,_e(";"),te)}function $t(k){if(k=="(")return S(Hn,_e(")"))}function He(k,A){return re(k,A,!1)}function at(k,A){return re(k,A,!0)}function Ft(k){return k!="("?F():S(Z(")"),fe,_e(")"),te)}function re(k,A,J){if(R.state.fatArrowAt==R.stream.start){var ce=J?Ke:Ze;if(k=="(")return S(Te,Z(")"),Q(Hn,")"),te,_e("=>"),ce,U);if(k=="variable")return F(Te,jt,_e("=>"),ce,U)}var Re=J?Ee:De;return de.hasOwnProperty(k)?S(Re):k=="function"?S(fn,Re):k=="class"||b&&A=="interface"?(R.marked="keyword",S(Z("form"),Bi,te)):k=="keyword c"||k=="async"?S(J?at:He):k=="("?S(Z(")"),fe,_e(")"),te,Re):k=="operator"||k=="spread"?S(J?at:He):k=="["?S(Z("]"),Je,te,Re):k=="{"?B(C,"}",null,Re):k=="quasi"?F(ze,Re):k=="new"?S(wt(J)):S()}function fe(k){return k.match(/[;\}\)\],]/)?F():F(He)}function De(k,A){return k==","?S(fe):Ee(k,A,!1)}function Ee(k,A,J){var ce=J==!1?De:Ee,Re=J==!1?He:at;if(k=="=>")return S(Te,J?Ke:Ze,U);if(k=="operator")return/\+\+|--/.test(A)||b&&A=="!"?S(ce):b&&A=="<"&&R.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?S(Z(">"),Q(Pe,">"),te,ce):A=="?"?S(He,_e(":"),Re):S(Re);if(k=="quasi")return F(ze,ce);if(k!=";"){if(k=="(")return B(at,")","call",ce);if(k==".")return S(un,ce);if(k=="[")return S(Z("]"),fe,_e("]"),te,ce);if(b&&A=="as")return R.marked="keyword",S(Pe,ce);if(k=="regexp")return R.state.lastType=R.marked="operator",R.stream.backUp(R.stream.pos-R.stream.start-1),S(Re)}}function ze(k,A){return k!="quasi"?F():A.slice(A.length-2)!="${"?S(ze):S(fe,Ie)}function Ie(k){if(k=="}")return R.marked="string-2",R.state.tokenize=V,S(ze)}function Ze(k){return ee(R.stream,R.state),F(k=="{"?Fe:He)}function Ke(k){return ee(R.stream,R.state),F(k=="{"?Fe:at)}function wt(k){return function(A){return A=="."?S(k?Fn:Ht):A=="variable"&&b?S(mi,k?Ee:De):F(k?at:He)}}function Ht(k,A){if(A=="target")return R.marked="keyword",S(De)}function Fn(k,A){if(A=="target")return R.marked="keyword",S(Ee)}function vn(k){return k==":"?S(te,Fe):F(De,_e(";"),te)}function un(k){if(k=="variable")return R.marked="property",S()}function C(k,A){if(k=="async")return R.marked="property",S(C);if(k=="variable"||R.style=="keyword"){if(R.marked="property",A=="get"||A=="set")return S(W);var J;return b&&R.state.fatArrowAt==R.stream.start&&(J=R.stream.match(/^\s*:\s*/,!1))&&(R.state.fatArrowAt=R.stream.pos+J[0].length),S($)}else{if(k=="number"||k=="string")return R.marked=h?"property":R.style+" property",S($);if(k=="jsonld-keyword")return S($);if(b&&qe(A))return R.marked="keyword",S(C);if(k=="[")return S(He,be,_e("]"),$);if(k=="spread")return S(at,$);if(A=="*")return R.marked="keyword",S(C);if(k==":")return F($)}}function W(k){return k!="variable"?F($):(R.marked="property",S(fn))}function $(k){if(k==":")return S(at);if(k=="(")return F(fn)}function Q(k,A,J){function ce(Re,Xe){if(J?J.indexOf(Re)>-1:Re==","){var ye=R.state.lexical;return ye.info=="call"&&(ye.pos=(ye.pos||0)+1),S(function(It,ln){return It==A||ln==A?F():F(k)},ce)}return Re==A||Xe==A?S():J&&J.indexOf(";")>-1?F(k):S(_e(A))}return function(Re,Xe){return Re==A||Xe==A?S():F(k,ce)}}function B(k,A,J){for(var ce=3;ce<arguments.length;ce++)R.cc.push(arguments[ce]);return S(Z(A,J),Q(k,A),te)}function Y(k){return k=="}"?S():F(Fe,Y)}function be(k,A){if(b){if(k==":")return S(Pe);if(A=="?")return S(be)}}function ne(k,A){if(b&&(k==":"||A=="in"))return S(Pe)}function Ge(k){if(b&&k==":")return R.stream.match(/^\s*\w+\s+is\b/,!1)?S(He,Be,Pe):S(Pe)}function Be(k,A){if(A=="is")return R.marked="keyword",S()}function Pe(k,A){if(A=="keyof"||A=="typeof"||A=="infer"||A=="readonly")return R.marked="keyword",S(A=="typeof"?at:Pe);if(k=="variable"||A=="void")return R.marked="type",S(sn);if(A=="|"||A=="&")return S(Pe);if(k=="string"||k=="number"||k=="atom")return S(sn);if(k=="[")return S(Z("]"),Q(Pe,"]",","),te,sn);if(k=="{")return S(Z("}"),Yt,te,sn);if(k=="(")return S(Q(zi,")"),ot,sn);if(k=="<")return S(Q(Pe,">"),Pe);if(k=="quasi")return F(rn,sn)}function ot(k){if(k=="=>")return S(Pe)}function Yt(k){return k.match(/[\}\)\]]/)?S():k==","||k==";"?S(Yt):F(et,Yt)}function et(k,A){if(k=="variable"||R.style=="keyword")return R.marked="property",S(et);if(A=="?"||k=="number"||k=="string")return S(et);if(k==":")return S(Pe);if(k=="[")return S(_e("variable"),ne,_e("]"),et);if(k=="(")return F(on,et);if(!k.match(/[;\}\)\],]/))return S()}function rn(k,A){return k!="quasi"?F():A.slice(A.length-2)!="${"?S(rn):S(Pe,At)}function At(k){if(k=="}")return R.marked="string-2",R.state.tokenize=V,S(rn)}function zi(k,A){return k=="variable"&&R.stream.match(/^\s*[?:]/,!1)||A=="?"?S(zi):k==":"?S(Pe):k=="spread"?S(zi):F(Pe)}function sn(k,A){if(A=="<")return S(Z(">"),Q(Pe,">"),te,sn);if(A=="|"||k=="."||A=="&")return S(Pe);if(k=="[")return S(Pe,_e("]"),sn);if(A=="extends"||A=="implements")return R.marked="keyword",S(Pe);if(A=="?")return S(Pe,_e(":"),Pe)}function mi(k,A){if(A=="<")return S(Z(">"),Q(Pe,">"),te,sn)}function Qn(){return F(Pe,Ds)}function Ds(k,A){if(A=="=")return S(Pe)}function br(k,A){return A=="enum"?(R.marked="keyword",S(Ln)):F(jt,be,Cn,_r)}function jt(k,A){if(b&&qe(A))return R.marked="keyword",S(jt);if(k=="variable")return Me(A),S();if(k=="spread")return S(jt);if(k=="[")return B(xr,"]");if(k=="{")return B(Ps,"}")}function Ps(k,A){return k=="variable"&&!R.stream.match(/^\s*:/,!1)?(Me(A),S(Cn)):(k=="variable"&&(R.marked="property"),k=="spread"?S(jt):k=="}"?F():k=="["?S(He,_e("]"),_e(":"),Ps):S(_e(":"),jt,Cn))}function xr(){return F(jt,Cn)}function Cn(k,A){if(A=="=")return S(at)}function _r(k){if(k==",")return S(br)}function Os(k,A){if(k=="keyword b"&&A=="else")return S(Z("form","else"),Fe,te)}function As(k,A){if(A=="await")return S(As);if(k=="(")return S(Z(")"),wr,te)}function wr(k){return k=="var"?S(br,ei):k=="variable"?S(ei):F(ei)}function ei(k,A){return k==")"?S():k==";"?S(ei):A=="in"||A=="of"?(R.marked="keyword",S(He,ei)):F(He,ei)}function fn(k,A){if(A=="*")return R.marked="keyword",S(fn);if(k=="variable")return Me(A),S(fn);if(k=="(")return S(Te,Z(")"),Q(Hn,")"),te,Ge,Fe,U);if(b&&A=="<")return S(Z(">"),Q(Qn,">"),te,fn)}function on(k,A){if(A=="*")return R.marked="keyword",S(on);if(k=="variable")return Me(A),S(on);if(k=="(")return S(Te,Z(")"),Q(Hn,")"),te,Ge,U);if(b&&A=="<")return S(Z(">"),Q(Qn,">"),te,on)}function Is(k,A){if(k=="keyword"||k=="variable")return R.marked="type",S(Is);if(A=="<")return S(Z(">"),Q(Qn,">"),te)}function Hn(k,A){return A=="@"&&S(He,Hn),k=="spread"?S(Hn):b&&qe(A)?(R.marked="keyword",S(Hn)):b&&k=="this"?S(be,Cn):F(jt,be,Cn)}function Bi(k,A){return k=="variable"?Ui(k,A):yn(k,A)}function Ui(k,A){if(k=="variable")return Me(A),S(yn)}function yn(k,A){if(A=="<")return S(Z(">"),Q(Qn,">"),te,yn);if(A=="extends"||A=="implements"||b&&k==",")return A=="implements"&&(R.marked="keyword"),S(b?Pe:He,yn);if(k=="{")return S(Z("}"),bn,te)}function bn(k,A){if(k=="async"||k=="variable"&&(A=="static"||A=="get"||A=="set"||b&&qe(A))&&R.stream.match(/^\s+[\w$\xa1-\uffff]/,!1))return R.marked="keyword",S(bn);if(k=="variable"||R.style=="keyword")return R.marked="property",S(an,bn);if(k=="number"||k=="string")return S(an,bn);if(k=="[")return S(He,be,_e("]"),an,bn);if(A=="*")return R.marked="keyword",S(bn);if(b&&k=="(")return F(on,bn);if(k==";"||k==",")return S(bn);if(k=="}")return S();if(A=="@")return S(He,bn)}function an(k,A){if(A=="!"||A=="?")return S(an);if(k==":")return S(Pe,Cn);if(A=="=")return S(at);var J=R.state.lexical.prev,ce=J&&J.info=="interface";return F(ce?on:fn)}function kr(k,A){return A=="*"?(R.marked="keyword",S(Zt,_e(";"))):A=="default"?(R.marked="keyword",S(He,_e(";"))):k=="{"?S(Q(Sr,"}"),Zt,_e(";")):F(Fe)}function Sr(k,A){if(A=="as")return R.marked="keyword",S(_e("variable"));if(k=="variable")return F(at,Sr)}function ht(k){return k=="string"?S():k=="("?F(He):k=="."?F(De):F(Se,Tn,Zt)}function Se(k,A){return k=="{"?B(Se,"}"):(k=="variable"&&Me(A),A=="*"&&(R.marked="keyword"),S(Cr))}function Tn(k){if(k==",")return S(Se,Tn)}function Cr(k,A){if(A=="as")return R.marked="keyword",S(Se)}function Zt(k,A){if(A=="from")return R.marked="keyword",S(He)}function Je(k){return k=="]"?S():F(Q(at,"]"))}function Ln(){return F(Z("form"),jt,_e("{"),Z("}"),Q(vi,"}"),te,te)}function vi(){return F(jt,Cn)}function Tr(k,A){return k.lastType=="operator"||k.lastType==","||L.test(A.charAt(0))||/[,.]/.test(A.charAt(0))}function ae(k,A,J){return A.tokenize==j&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(A.lastType)||A.lastType=="quasi"&&/\{\s*$/.test(k.string.slice(0,k.pos-(J||0)))}return{startState:function(k){var A={tokenize:j,lastType:"sof",cc:[],lexical:new he((k||0)-u,0,"block",!1),localVars:o.localVars,context:o.localVars&&new Ve(null,null,!1),indented:k||0};return o.globalVars&&typeof o.globalVars=="object"&&(A.globalVars=o.globalVars),A},token:function(k,A){if(k.sol()&&(A.lexical.hasOwnProperty("align")||(A.lexical.align=!1),A.indented=k.indentation(),ee(k,A)),A.tokenize!=X&&k.eatSpace())return null;var J=A.tokenize(k,A);return N=="comment"?J:(A.lastType=N=="operator"&&(E=="++"||E=="--")?"incdec":N,le(A,J,N,E,k))},indent:function(k,A){if(k.tokenize==X||k.tokenize==V)return n.Pass;if(k.tokenize!=j)return 0;var J=A&&A.charAt(0),ce=k.lexical,Re;if(!/^\s*else\b/.test(A))for(var Xe=k.cc.length-1;Xe>=0;--Xe){var ye=k.cc[Xe];if(ye==te)ce=ce.prev;else if(ye!=Os&&ye!=U)break}for(;(ce.type=="stat"||ce.type=="form")&&(J=="}"||(Re=k.cc[k.cc.length-1])&&(Re==De||Re==Ee)&&!/^[,\.=+\-*:?[\(]/.test(A));)ce=ce.prev;f&&ce.type==")"&&ce.prev.type=="stat"&&(ce=ce.prev);var It=ce.type,ln=J==It;return It=="vardef"?ce.indented+(k.lastType=="operator"||k.lastType==","?ce.info.length+1:0):It=="form"&&J=="{"?ce.indented:It=="form"?ce.indented+u:It=="stat"?ce.indented+(Tr(k,A)?f||u:0):ce.info=="switch"&&!ln&&o.doubleIndentSwitch!=!1?ce.indented+(/^(?:case|default)\b/.test(A)?u:2*u):ce.align?ce.column+(ln?0:1):ce.indented+(ln?0:u)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:p?null:"/*",blockCommentEnd:p?null:"*/",blockCommentContinue:p?null:" * ",lineComment:p?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:p?"json":"javascript",jsonldMode:h,jsonMode:p,expressionAllowed:ae,skipExpression:function(k){le(k,"atom","atom","true",new n.StringStream("",2,null))}}}),n.registerHelper("wordChars","javascript",/[\w$]/),n.defineMIME("text/javascript","javascript"),n.defineMIME("text/ecmascript","javascript"),n.defineMIME("application/javascript","javascript"),n.defineMIME("application/x-javascript","javascript"),n.defineMIME("application/ecmascript","javascript"),n.defineMIME("application/json",{name:"javascript",json:!0}),n.defineMIME("application/x-json",{name:"javascript",json:!0}),n.defineMIME("application/manifest+json",{name:"javascript",json:!0}),n.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),n.defineMIME("text/typescript",{name:"javascript",typescript:!0}),n.defineMIME("application/typescript",{name:"javascript",typescript:!0})})}()),Ju.exports}gm();var ef={exports:{}},tf;function mm(){return tf||(tf=1,function(i,t){(function(n){n(Vo())})(function(n){n.defineMode("lua",function(s,o){var u=s.indentUnit;function f(I){return new RegExp("^(?:"+I.join("|")+")","i")}function h(I){return new RegExp("^(?:"+I.join("|")+")$","i")}var p=h(o.specials||[]),g=h(["_G","_VERSION","assert","collectgarbage","dofile","error","getfenv","getmetatable","ipairs","load","loadfile","loadstring","module","next","pairs","pcall","print","rawequal","rawget","rawset","require","select","setfenv","setmetatable","tonumber","tostring","type","unpack","xpcall","coroutine.create","coroutine.resume","coroutine.running","coroutine.status","coroutine.wrap","coroutine.yield","debug.debug","debug.getfenv","debug.gethook","debug.getinfo","debug.getlocal","debug.getmetatable","debug.getregistry","debug.getupvalue","debug.setfenv","debug.sethook","debug.setlocal","debug.setmetatable","debug.setupvalue","debug.traceback","close","flush","lines","read","seek","setvbuf","write","io.close","io.flush","io.input","io.lines","io.open","io.output","io.popen","io.read","io.stderr","io.stdin","io.stdout","io.tmpfile","io.type","io.write","math.abs","math.acos","math.asin","math.atan","math.atan2","math.ceil","math.cos","math.cosh","math.deg","math.exp","math.floor","math.fmod","math.frexp","math.huge","math.ldexp","math.log","math.log10","math.max","math.min","math.modf","math.pi","math.pow","math.rad","math.random","math.randomseed","math.sin","math.sinh","math.sqrt","math.tan","math.tanh","os.clock","os.date","os.difftime","os.execute","os.exit","os.getenv","os.remove","os.rename","os.setlocale","os.time","os.tmpname","package.cpath","package.loaded","package.loaders","package.loadlib","package.path","package.preload","package.seeall","string.byte","string.char","string.dump","string.find","string.format","string.gmatch","string.gsub","string.len","string.lower","string.match","string.rep","string.reverse","string.sub","string.upper","table.concat","table.insert","table.maxn","table.remove","table.sort"]),b=h(["and","break","elseif","false","nil","not","or","return","true","function","end","if","then","else","do","while","repeat","until","for","in","local"]),_=h(["function","if","repeat","do","\\(","{"]),T=h(["end","until","\\)","}"]),L=f(["end","until","\\)","}","else","elseif"]);function D(I){for(var j=0;I.eat("=");)++j;return I.eat("["),j}function O(I,j){var K=I.next();return K=="-"&&I.eat("-")?I.eat("[")&&I.eat("[")?(j.cur=N(D(I),"comment"))(I,j):(I.skipToEnd(),"comment"):K=='"'||K=="'"?(j.cur=E(K))(I,j):K=="["&&/[\[=]/.test(I.peek())?(j.cur=N(D(I),"string"))(I,j):/\d/.test(K)?(I.eatWhile(/[\w.%]/),"number"):/[\w_]/.test(K)?(I.eatWhile(/[\w\\\-_.]/),"variable"):null}function N(I,j){return function(K,X){for(var V=null,G;(G=K.next())!=null;)if(V==null)G=="]"&&(V=0);else if(G=="=")++V;else if(G=="]"&&V==I){X.cur=O;break}else V=null;return j}}function E(I){return function(j,K){for(var X=!1,V;(V=j.next())!=null&&!(V==I&&!X);)X=!X&&V=="\\";return X||(K.cur=O),"string"}}return{startState:function(I){return{basecol:I||0,indentDepth:0,cur:O}},token:function(I,j){if(I.eatSpace())return null;var K=j.cur(I,j),X=I.current();return K=="variable"&&(b.test(X)?K="keyword":g.test(X)?K="builtin":p.test(X)&&(K="variable-2")),K!="comment"&&K!="string"&&(_.test(X)?++j.indentDepth:T.test(X)&&--j.indentDepth),K},indent:function(I,j){var K=L.test(j);return I.basecol+u*(I.indentDepth-(K?1:0))},electricInput:/^\s*(?:end|until|else|\)|\})$/,lineComment:"--",blockCommentStart:"--[[",blockCommentEnd:"]]"}}),n.defineMIME("text/x-lua","lua")})}()),ef.exports}mm();var nf={exports:{}},rf;function vm(){return rf||(rf=1,function(i,t){(function(n){n(Vo())})(function(n){n.defineMode("haxe",function(s,o){var u=s.indentUnit;function f(C){return{type:C,style:"keyword"}}var h=f("keyword a"),p=f("keyword b"),g=f("keyword c"),b=f("operator"),_={type:"atom",style:"atom"},T={type:"attribute",style:"attribute"},E=f("typedef"),L={if:h,while:h,else:p,do:p,try:p,return:g,break:g,continue:g,new:g,throw:g,var:f("var"),inline:T,static:T,using:f("import"),public:T,private:T,cast:f("cast"),import:f("import"),macro:f("macro"),function:f("function"),catch:f("catch"),untyped:f("untyped"),callback:f("cb"),for:f("for"),switch:f("switch"),case:f("case"),default:f("default"),in:b,never:f("property_access"),trace:f("trace"),class:E,abstract:E,enum:E,interface:E,typedef:E,extends:E,implements:E,dynamic:E,true:_,false:_,null:_},D=/[+\-*&%=<>!?|]/;function O(C,W,$){return W.tokenize=$,$(C,W)}function N(C,W){for(var $=!1,Q;(Q=C.next())!=null;){if(Q==W&&!$)return!0;$=!$&&Q=="\\"}}var E,I;function j(C,W,$){return E=C,I=$,W}function K(C,W){var $=C.next();if($=='"'||$=="'")return O(C,W,X($));if(/[\[\]{}\(\),;\:\.]/.test($))return j($);if($=="0"&&C.eat(/x/i))return C.eatWhile(/[\da-f]/i),j("number","number");if(/\d/.test($)||$=="-"&&C.eat(/\d/))return C.match(/^\d*(?:\.\d*(?!\.))?(?:[eE][+\-]?\d+)?/),j("number","number");if(W.reAllowed&&$=="~"&&C.eat(/\//))return N(C,"/"),C.eatWhile(/[gimsu]/),j("regexp","string-2");if($=="/")return C.eat("*")?O(C,W,V):C.eat("/")?(C.skipToEnd(),j("comment","comment")):(C.eatWhile(D),j("operator",null,C.current()));if($=="#")return C.skipToEnd(),j("conditional","meta");if($=="@")return C.eat(/:/),C.eatWhile(/[\w_]/),j("metadata","meta");if(D.test($))return C.eatWhile(D),j("operator",null,C.current());var Q;if(/[A-Z]/.test($))return C.eatWhile(/[\w_<>]/),Q=C.current(),j("type","variable-3",Q);C.eatWhile(/[\w_]/);var Q=C.current(),B=L.propertyIsEnumerable(Q)&&L[Q];return B&&W.kwAllowed?j(B.type,B.style,Q):j("variable","variable",Q)}function X(C){return function(W,$){return N(W,C)&&($.tokenize=K),j("string","string")}}function V(C,W){for(var $=!1,Q;Q=C.next();){if(Q=="/"&&$){W.tokenize=K;break}$=Q=="*"}return j("comment","comment")}var G={atom:!0,number:!0,variable:!0,string:!0,regexp:!0};function ee(C,W,$,Q,B,Y){this.indented=C,this.column=W,this.type=$,this.prev=B,this.info=Y,Q!=null&&(this.align=Q)}function de(C,W){for(var $=C.localVars;$;$=$.next)if($.name==W)return!0}function he(C,W,$,Q,B){var Y=C.cc;for(R.state=C,R.stream=B,R.marked=null,R.cc=Y,C.lexical.hasOwnProperty("align")||(C.lexical.align=!0);;){var be=Y.length?Y.pop():Ae;if(be($,Q)){for(;Y.length&&Y[Y.length-1].lex;)Y.pop()();return R.marked?R.marked:$=="variable"&&de(C,Q)?"variable-2":$=="variable"&&se(C,Q)?"variable-3":W}}}function se(C,W){if(/[a-z]/.test(W.charAt(0)))return!1;for(var $=C.importedtypes.length,Q=0;Q<$;Q++)if(C.importedtypes[Q]==W)return!0}function le(C){for(var W=R.state,$=W.importedtypes;$;$=$.next)if($.name==C)return;W.importedtypes={name:C,next:W.importedtypes}}var R={state:null,column:null,marked:null,cc:null};function F(){for(var C=arguments.length-1;C>=0;C--)R.cc.push(arguments[C])}function S(){return F.apply(null,arguments),!0}function me(C,W){for(var $=W;$;$=$.next)if($.name==C)return!0;return!1}function Me(C){var W=R.state;if(W.context){if(R.marked="def",me(C,W.localVars))return;W.localVars={name:C,next:W.localVars}}else if(W.globalVars){if(me(C,W.globalVars))return;W.globalVars={name:C,next:W.globalVars}}}var $e={name:"this",next:null};function qe(){R.state.context||(R.state.localVars=$e),R.state.context={prev:R.state.context,vars:R.state.localVars}}function Ve(){R.state.localVars=R.state.context.vars,R.state.context=R.state.context.prev}Ve.lex=!0;function we(C,W){var $=function(){var Q=R.state;Q.lexical=new ee(Q.indented,R.stream.column(),C,null,Q.lexical,W)};return $.lex=!0,$}function ke(){var C=R.state;C.lexical.prev&&(C.lexical.type==")"&&(C.indented=C.lexical.indented),C.lexical=C.lexical.prev)}ke.lex=!0;function Te(C){function W($){return $==C?S():C==";"?F():S(W)}return W}function Ae(C){return C=="@"?S(Fe):C=="var"?S(we("vardef"),ze,Te(";"),ke):C=="keyword a"?S(we("form"),U,Ae,ke):C=="keyword b"?S(we("form"),Ae,ke):C=="{"?S(we("}"),qe,Ee,ke,Ve):C==";"?S():C=="attribute"?S(_e):C=="function"?S(wt):C=="for"?S(we("form"),Te("("),we(")"),Ze,Te(")"),ke,Ae,ke):C=="variable"?S(we("stat"),Ft):C=="switch"?S(we("form"),U,we("}","switch"),Te("{"),Ee,ke,ke):C=="case"?S(U,Te(":")):C=="default"?S(Te(":")):C=="catch"?S(we("form"),qe,Te("("),un,Te(")"),Ae,ke,Ve):C=="import"?S(He,Te(";")):C=="typedef"?S(at):F(we("stat"),U,Te(";"),ke)}function U(C){return G.hasOwnProperty(C)||C=="type"?S(te):C=="function"?S(wt):C=="keyword c"?S(Z):C=="("?S(we(")"),Z,Te(")"),ke,te):C=="operator"?S(U):C=="["?S(we("]"),De(Z,"]"),ke,te):C=="{"?S(we("}"),De(fe,"}"),ke,te):S()}function Z(C){return C.match(/[;\}\)\],]/)?F():F(U)}function te(C,W){if(C=="operator"&&/\+\+|--/.test(W))return S(te);if(C=="operator"||C==":")return S(U);if(C!=";"){if(C=="(")return S(we(")"),De(U,")"),ke,te);if(C==".")return S(re,te);if(C=="[")return S(we("]"),U,Te("]"),ke,te)}}function _e(C){if(C=="attribute")return S(_e);if(C=="function")return S(wt);if(C=="var")return S(ze)}function Fe(C){if(C==":"||C=="variable")return S(Fe);if(C=="(")return S(we(")"),De($t,")"),ke,Ae)}function $t(C){if(C=="variable")return S()}function He(C,W){if(C=="variable"&&/[A-Z]/.test(W.charAt(0)))return le(W),S();if(C=="variable"||C=="property"||C=="."||W=="*")return S(He)}function at(C,W){if(C=="variable"&&/[A-Z]/.test(W.charAt(0)))return le(W),S();if(C=="type"&&/[A-Z]/.test(W.charAt(0)))return S()}function Ft(C){return C==":"?S(ke,Ae):F(te,Te(";"),ke)}function re(C){if(C=="variable")return R.marked="property",S()}function fe(C){if(C=="variable"&&(R.marked="property"),G.hasOwnProperty(C))return S(Te(":"),U)}function De(C,W){function $(Q){return Q==","?S(C,$):Q==W?S():S(Te(W))}return function(Q){return Q==W?S():F(C,$)}}function Ee(C){return C=="}"?S():F(Ae,Ee)}function ze(C,W){return C=="variable"?(Me(W),S(Ht,Ie)):S()}function Ie(C,W){if(W=="=")return S(U,Ie);if(C==",")return S(ze)}function Ze(C,W){return C=="variable"?(Me(W),S(Ke,U)):F()}function Ke(C,W){if(W=="in")return S()}function wt(C,W){if(C=="variable"||C=="type")return Me(W),S(wt);if(W=="new")return S(wt);if(C=="(")return S(we(")"),qe,De(un,")"),ke,Ht,Ae,Ve)}function Ht(C){if(C==":")return S(Fn)}function Fn(C){if(C=="type"||C=="variable")return S();if(C=="{")return S(we("}"),De(vn,"}"),ke)}function vn(C){if(C=="variable")return S(Ht)}function un(C,W){if(C=="variable")return Me(W),S(Ht)}return{startState:function(C){var W=["Int","Float","String","Void","Std","Bool","Dynamic","Array"],$={tokenize:K,reAllowed:!0,kwAllowed:!0,cc:[],lexical:new ee((C||0)-u,0,"block",!1),localVars:o.localVars,importedtypes:W,context:o.localVars&&{vars:o.localVars},indented:0};return o.globalVars&&typeof o.globalVars=="object"&&($.globalVars=o.globalVars),$},token:function(C,W){if(C.sol()&&(W.lexical.hasOwnProperty("align")||(W.lexical.align=!1),W.indented=C.indentation()),C.eatSpace())return null;var $=W.tokenize(C,W);return E=="comment"?$:(W.reAllowed=!!(E=="operator"||E=="keyword c"||E.match(/^[\[{}\(,;:]$/)),W.kwAllowed=E!=".",he(W,$,E,I,C))},indent:function(C,W){if(C.tokenize!=K)return 0;var $=W&&W.charAt(0),Q=C.lexical;Q.type=="stat"&&$=="}"&&(Q=Q.prev);var B=Q.type,Y=$==B;return B=="vardef"?Q.indented+4:B=="form"&&$=="{"?Q.indented:B=="stat"||B=="form"?Q.indented+u:Q.info=="switch"&&!Y?Q.indented+(/^(?:case|default)\b/.test(W)?u:2*u):Q.align?Q.column+(Y?0:1):Q.indented+(Y?0:u)},electricChars:"{}",blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//"}}),n.defineMIME("text/x-haxe","haxe"),n.defineMode("hxml",function(){return{startState:function(){return{define:!1,inString:!1}},token:function(s,o){var h=s.peek(),u=s.sol();if(h=="#")return s.skipToEnd(),"comment";if(u&&h=="-"){var f="variable-2";return s.eat(/-/),s.peek()=="-"&&(s.eat(/-/),f="keyword a"),s.peek()=="D"&&(s.eat(/[D]/),f="keyword c",o.define=!0),s.eatWhile(/[A-Z]/i),f}var h=s.peek();return o.inString==!1&&h=="'"&&(o.inString=!0,s.next()),o.inString==!0?(s.skipTo("'")||s.skipToEnd(),s.peek()=="'"&&(s.next(),o.inString=!1),"string"):(s.next(),null)},lineComment:"#"}}),n.defineMIME("text/x-hxml","hxml")})}()),nf.exports}vm();const ym=[{label:"1 Minute",value:60},{label:"5 Minutes",value:300},{label:"15 Minutes",value:900},{label:"30 Minutes",value:1800},{label:"1 Hour",value:3600},{label:"3 Hours",value:10800},{label:"6 Hours",value:21600},{label:"12 Hours",value:43200},{label:"1 Day",value:86400},{label:"1 Week",value:604800}],sf={en:{currentMode:"Current mode:",switchToRuleScript:"Switch to RuleScript",switchToLua:"Switch to Lua",placeholder:{rulescript:"// Write your HScript code here",lua:"-- Write your Lua code here"}}},bm=({isDarkMode:i,language:t="en"})=>{const[n,s]=oe([]),[o,u]=oe(null),[f,h]=oe(!0),[p,g]=oe(null),b=gt(null),_=gt(null),[T,L]=oe(!1),[D,O]=oe(""),[N,E]=oe(""),[I,j]=oe(!1),[K,X]=oe(null),[V,G]=oe("rulescript"),ee=sf[t]||sf.en,de=U=>{U!==V&&(G(U),_.current&&(U==="rulescript"?_.current.setOption("mode","haxe"):_.current.setOption("mode",U),_.current.setOption("placeholder",ee.placeholder[U])),o&&he(U,N))},he=async(U,Z)=>{try{await Ne.updateTask(o.id,{type:U}),s(n.map(te=>te.id===o.id?{...te,script:Z,type:U}:te))}catch(te){console.error("Script type update failed:",te),u(_e=>({..._e,output:`Error updating script type: ${te.message}`}))}},se=async()=>{try{const U=await Ne.getTaskList();s(U),g(null)}catch(U){console.error("Tasks yÃ¼klenemedi:",U),g("Failed to load tasks")}finally{h(!1)}},le=async U=>{try{if(o&&N!==o.script&&!window.confirm("You have unsaved changes. Do you want to discard them?"))return;const Z=await Ne.getTaskDetail(U);u(Z),E(Z.script||""),G(Z.type||"rulescript"),O(""),L(!1),j(!1)}catch(Z){console.error("Task detayÄ± alÄ±namadÄ±:",Z)}},R=async(U,Z)=>{try{await Ne.updateTask(U,{enabled:Z}),u(te=>({...te,enabled:Z,script:N})),s(n.map(te=>te.id===U?{...te,enabled:Z}:te))}catch(te){console.error("Task enable/disable edilemedi:",te),u(_e=>({..._e,enabled:!Z,script:N}))}},F=async(U,Z)=>{try{const te=parseInt(Z);await Ne.updateTask(U,{frequency:te}),u(_e=>({..._e,frequency:te,script:N})),s(n.map(_e=>_e.id===U?{..._e,frequency:te}:_e))}catch(te){console.error("Frequency gÃ¼ncellenemedi:",te)}},S=async(U,Z)=>{try{await Ne.updateTask(U,{logs:Z}),u(te=>({...te,logs:Z,script:N})),s(n.map(te=>te.id===U?{...te,logs:Z}:te))}catch(te){console.error("Log ayarÄ± gÃ¼ncellenemedi:",te),u(_e=>({..._e,logs:!Z,script:N}))}};je(()=>{(async()=>{await Promise.all([se(),Ae()])})();const Z=setInterval(Ae,3e3);return()=>clearInterval(Z)},[]),je(()=>{if(o&&b.current){_.current&&_.current.toTextArea(),_.current=Ls.fromTextArea(b.current,{mode:V==="rulescript"?"haxe":V,theme:i?"monokai":"default",lineNumbers:!0,matchBrackets:!0,indentUnit:4,indentWithTabs:!0,readOnly:!1,autofocus:!0,placeholder:ee.placeholder[V]}),E(o.script||""),_.current.setValue(o.script||"");const U=Z=>{const te=Z.getValue();E(te)};return _.current.on("change",U),()=>{_.current&&(_.current.off("change",U),_.current.toTextArea(),_.current=null)}}},[o,i,V]);const me=U=>U?new Date(U).toLocaleString():"Never",Me=async()=>{try{const U=N;u(Z=>({...Z,output:""})),await Ne.executeScriptStream(U,Z=>{u(te=>({...te,output:te.output?te.output+Z:Z,script:N}))},V)}catch(U){console.error("Script Ã§alÄ±ÅŸtÄ±rÄ±lamadÄ±:",U),u(Z=>({...Z,output:`Error: ${U.message}`,script:N}))}},$e=async()=>{try{await Ne.updateTask(o.id,{script:N,type:V}),u(U=>({...U,script:N,type:V,output:"Task saved successfully!"})),s(n.map(U=>U.id===o.id?{...U,script:N,type:V}:U))}catch(U){console.error("Script kaydedilemedi:",U);let Z=U.message;Z.includes("rulescript:")&&(Z=Z.split(`
`)[0].replace("rulescript:","Line ").replace("Unexpected token:","Syntax error:")),u(te=>({...te,output:`Error saving task: ${Z}`}))}},qe=()=>{O(o.name),L(!0)},Ve=async()=>{try{await Ne.updateTask(o.id,{name:D}),u(U=>({...U,name:D,script:N})),s(n.map(U=>U.id===o.id?{...U,name:D}:U)),L(!1)}catch(U){console.error("Ä°sim gÃ¼ncellenemedi:",U)}},we=async()=>{try{const U=await Ne.createTask("New Task");U.type||(U.type="rulescript"),s([...n,U]),u(U),G(U.type),E("")}catch(U){console.error("Task oluÅŸturulamadÄ±:",U)}},ke=async(U,Z)=>{if(Z.stopPropagation(),!!window.confirm("Are you sure you want to delete this task?"))try{(await Ne.deleteTask(U)).success&&(s(_e=>_e.filter(Fe=>Fe.id!==U)),(o==null?void 0:o.id)===U&&(u(null),E(""),_.current&&_.current.setValue("")))}catch(te){console.error("Task silinemedi:",te),alert("Failed to delete task: "+te.message)}},Te=async()=>{if(o)try{j(!0),u(U=>({...U,logContent:"",output:U.output})),await Ne.streamTaskLog(o.id,U=>{u(Z=>({...Z,logContent:(Z.logContent||"")+U}))})}catch(U){console.error("Loglar alÄ±namadÄ±:",U),u(Z=>({...Z,logContent:`Error loading logs: ${U.message}`}))}},Ae=async()=>{try{const U=await Ne.getTaskStatus(),Z=U.find(te=>te.status===1);if(X(Z||null),s(te=>te.map(_e=>{const Fe=U.find($t=>$t.id===_e.id);return Fe?{..._e,lastRun:Fe.lastRun,status:Fe.status}:_e})),o){const te=U.find(_e=>_e.id===o.id);te&&u(_e=>({..._e,lastRun:te.lastRun,status:te.status,script:N}))}}catch(U){console.error("Task status alÄ±namadÄ±:",U),X(null)}};return y("div",{className:`scheduler ${i?"dark":""}`,children:[y("div",{className:"task-list",children:[y("div",{className:"task-list-header",children:[y("h2",{children:"Tasks"}),y("div",{className:"task-list-actions",children:[y("button",{className:"create-task icon",onClick:we,title:"Create New Task",children:"+"}),y("button",{onClick:se,className:"refresh-button icon",title:"Refresh Tasks",children:"ðŸ”„"})]})]}),f?y("div",{className:"loading",children:"Loading tasks..."}):p?y("div",{className:"error",children:p}):y("div",{className:"task-items",children:n.map(U=>y("div",{className:`task-item ${(o==null?void 0:o.id)===U.id?"selected":""} ${(K==null?void 0:K.id)===U.id?"running":""}`,onClick:()=>le(U.id),children:[y("div",{className:"task-item-header",children:[y("span",{className:"task-name",children:U.name}),y("div",{className:"task-item-actions",children:[y("label",{className:"task-enabled-toggle",onClick:Z=>Z.stopPropagation(),children:[y("input",{type:"checkbox",checked:U.enabled,onChange:Z=>{Z.stopPropagation(),R(U.id,!U.enabled)}}),y("span",{className:"checkmark"})]}),y("button",{className:"delete-task",onClick:Z=>ke(U.id,Z),title:"Delete Task",children:"Ã—"})]})]}),y("div",{className:"task-item-footer",children:y("span",{className:"task-last-run",children:["Last Run: ",me(U.lastRun)]})})]},U.id))})]}),y("div",{className:"task-detail",children:o?y(Pt,{children:[y("div",{className:"task-header",children:T?y("div",{className:"name-edit",children:[y("input",{type:"text",value:D,onChange:U=>O(U.target.value),onKeyDown:U=>{U.key==="Enter"&&Ve(),U.key==="Escape"&&L(!1)},autoFocus:!0}),y("button",{className:"name-save",onClick:Ve,children:"âœ“"}),y("button",{className:"name-cancel",onClick:()=>L(!1),children:"âœ•"})]}):y("h2",{onClick:qe,children:o.name})}),y("div",{className:"script-section",children:[y("div",{className:"script-header",children:[y("h3",{children:"Script"}),y("div",{className:"language-selector",children:[y("span",{children:[ee.currentMode," "]}),y("div",{className:"language-buttons",children:[y("button",{className:`language-btn ${V==="rulescript"?"active":""}`,onClick:()=>de("rulescript"),children:"RuleScript"}),y("button",{className:`language-btn ${V==="lua"?"active":""}`,onClick:()=>de("lua"),children:"Lua"})]})]}),y("div",{className:"script-actions",children:[y("button",{className:"script-button try",onClick:Me,children:"Try"}),y("button",{className:"script-button save",onClick:$e,children:"Save"}),y("button",{className:"script-button logs",onClick:Te,children:"Logs"})]})]}),y("div",{className:"editor-container",children:y("textarea",{ref:b})}),o.output&&y("div",{className:"script-output",children:[y("div",{className:"output-header",children:[y("h3",{children:"Output"}),y("button",{className:"close-output",onClick:()=>u(U=>({...U,output:null})),children:"Ã—"})]}),y("pre",{className:"output-content",children:o.output})]}),I&&o.logContent&&y("div",{className:"script-output logs",children:[y("div",{className:"output-header",children:[y("h3",{children:"Logs"}),y("button",{className:"close-output",onClick:()=>{j(!1),u(U=>({...U,logContent:null}))},children:"Ã—"})]}),y("pre",{className:"output-content",children:o.logContent})]})]}),y("div",{className:"detail-section",children:[y("div",{className:"detail-row",children:[y("span",{children:"Status:"}),y("span",{className:`status-${o.status}`,children:o.enabled?"Enabled":"Disabled"})]}),y("div",{className:"detail-row",children:[y("span",{children:"Created:"}),y("span",{children:me(o.createdAt)})]}),y("div",{className:"detail-row",children:[y("span",{children:"Last Run:"}),y("span",{children:me(o.lastRun)})]}),y("div",{className:"detail-row",children:[y("span",{children:"Frequency:"}),y("select",{className:"frequency-select",value:o.frequency,onChange:U=>F(o.id,U.target.value),children:ym.map(U=>y("option",{value:U.value,children:U.label},U.value))})]}),y("div",{className:"detail-row",children:[y("span",{children:"Success/Failed:"}),y("span",{children:[o.success,"/",o.failed]})]}),y("div",{className:"detail-row",children:[y("span",{children:"Save Logs:"}),y("label",{className:"task-logs-toggle",children:[y("input",{type:"checkbox",checked:o.logs,onChange:()=>S(o.id,!o.logs)}),y("span",{className:"checkmark"})]})]})]})]}):y("div",{className:"no-selection",children:"Select a task to view details"})})]})},of={en:{run:"â–¶ Run",placeholder:{rulescript:"// Write your HScript code here",lua:"-- Write your Lua code here"},executedCode:"Executed code:",result:"Result:",switchToRuleScript:"Switch to RuleScript",switchToLua:"Switch to Lua",currentMode:"Current mode:"}},xm=({isDarkMode:i,language:t="en"})=>{const[n,s]=oe('sceKernelSendNotificationRequest("Hello World");'),[o,u]=oe(""),[f,h]=oe("rulescript"),p=gt(null),g=gt(null),b=of[t]||of.en,_={rulescript:'sceKernelSendNotificationRequest("Hello World");',lua:`function main()
	sceKernelSendNotificationRequest("Hello World")
end`},T=D=>{D!==f&&(n.trim()!==""&&n!==_[f]&&!confirm("Switching language will reset your current code. Continue?")||(h(D),s(_[D]),g.current&&(D==="rulescript"?g.current.setOption("mode","haxe"):g.current.setOption("mode",D),g.current.setValue(_[D]),g.current.setOption("placeholder",b.placeholder[D]))))};je(()=>{if(!g.current&&p.current){const D=document.createElement("textarea");p.current.appendChild(D),g.current=Ls.fromTextArea(D,{value:n,mode:f==="rulescript"?"haxe":f,theme:i?"monokai":"default",lineNumbers:!0,matchBrackets:!0,indentUnit:4,indentWithTabs:!0,placeholder:b.placeholder[f]}),g.current.on("change",O=>{s(O.getValue())}),g.current.setValue(n)}return()=>{g.current&&(g.current.toTextArea(),g.current=null)}},[]),je(()=>{g.current&&g.current.setOption("theme",i?"monokai":"default")},[i]);const L=async()=>{u("");try{await Ne.executeScriptStream(n,D=>{u(O=>O+D)},f)}catch(D){u("Error: "+D.message)}};return y("div",{className:`script-editor ${i?"dark":""}`,children:y("div",{className:"script-content",children:[y("div",{className:"language-selector",children:[y("span",{children:[b.currentMode," "]}),y("div",{className:"language-buttons",children:[y("button",{className:`language-btn ${f==="rulescript"?"active":""}`,onClick:()=>T("rulescript"),children:"RuleScript"}),y("button",{className:`language-btn ${f==="lua"?"active":""}`,onClick:()=>T("lua"),children:"Lua"})]})]}),y("div",{className:"editor-container",ref:p}),y("div",{className:"script-output",children:[y("div",{className:"output-toolbar",children:y("button",{className:"run-btn",onClick:L,children:b.run})}),y("div",{className:"output-content",children:y("pre",{children:typeof o=="string"?o:JSON.stringify(o,null,2)})})]})]})})},_m=({isDarkMode:i,onOpenWindow:t})=>{const[n,s]=oe([]),[o,u]=oe(!0),[f,h]=oe(null),[p,g]=oe(""),[b,_]=oe(!1),T=async(N="")=>{try{u(!0);const E=N?await Ne.searchRemoteScripts(N):await Ne.getRemoteScripts();s(E),h(null)}catch(E){console.error("Failed to fetch scripts:",E),h("Failed to load scripts. Please try again later.")}finally{u(!1),_(!1)}};je(()=>{T()},[]);const L=N=>{N.preventDefault(),_(!0),T(p)},D=N=>{t({app:"scriptDetail",title:N.name,props:{scriptKey:N.key,scriptName:N.name,authorName:N.authorName,authorSrc:N.authorSrc}})},O=N=>{N.currentTarget instanceof HTMLImageElement&&(N.currentTarget.onerror=null,N.currentTarget.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='%23f0f0f0'/%3E%3Ctext x='50' y='50' font-family='Arial' font-size='20' text-anchor='middle' alignment-baseline='middle' fill='%23999'%3ENo Image%3C/text%3E%3C/svg%3E")};return o?y("div",{className:`script-store ${i?"dark":""}`,children:y("div",{className:"script-store-loading",children:[y("div",{className:"loading-spinner"}),y("p",{children:"Loading scripts..."})]})}):f?y("div",{className:`script-store ${i?"dark":""}`,children:y("div",{className:"script-store-error",children:[y("p",{children:f}),y("button",{className:"retry-button",onClick:()=>{h(null),T()},children:"Retry"})]})}):y("div",{className:`script-store ${i?"dark":""}`,children:[y("div",{className:"script-store-header",children:[y("div",{className:"header-left",children:[y("h2",{children:"Script Store"}),y("p",{children:"Browse and run community scripts"})]}),y("div",{className:"header-right",children:y("form",{onSubmit:L,className:"search-form",children:[y("input",{type:"text",placeholder:"Search scripts...",value:p,onChange:N=>g(N.currentTarget.value),className:"search-input"}),y("button",{type:"submit",className:"search-button",disabled:b,children:b?"Searching...":"Search"})]})})]}),y("div",{className:"script-grid",children:n.length===0?y("div",{className:"no-scripts-message",children:p?`No scripts found for "${p}"`:"No scripts available at the moment."}):n.map(N=>y("div",{className:"script-card",onClick:()=>D(N),children:[y("div",{className:"script-image",children:y("img",{src:Ne.getScriptImageUrl(N.key),alt:N.name,onError:O})}),y("div",{className:"script-info",children:[y("h3",{children:N.name}),y("a",{href:N.authorSrc,className:"script-author",onClick:E=>{E.preventDefault(),E.stopPropagation(),window.open(N.authorSrc,"_blank","noopener,noreferrer")},children:N.authorName})]})]},N.key))})]})},wm=({isDarkMode:i,scriptKey:t,scriptName:n,authorName:s,authorSrc:o})=>{const[u,f]=oe(!1),[h,p]=oe(""),[g,b]=oe(null),[_,T]=oe(null),[L,D]=oe(!0),[O,N]=oe(!1),E=gt(null),I=gt(null);je(()=>{(async()=>{try{D(!0);const de=(await Ne.getRemoteScripts()).find(he=>he.key===t);T(de?{key:t,name:n||de.name,authorName:s||de.authorName,authorSrc:o||de.authorSrc,description:de.description||"",type:de.type||"rulescript"}:{key:t,name:n,authorName:s,authorSrc:o,description:"",type:"rulescript"}),b(null)}catch(ee){console.error("Failed to fetch script details:",ee),b("Failed to load script details. Please try again later."),T({key:t,name:n,authorName:s,authorSrc:o,description:"",type:"rulescript"})}finally{D(!1)}})()},[t,n,s,o]),je(()=>()=>{I.current&&clearInterval(I.current)},[]);const j=async()=>{try{f(!0),p(""),b(null),I.current=setInterval(async()=>{try{await Ne.sendHeartbeat()}catch(G){console.error("Heartbeat error:",G),I.current&&(clearInterval(I.current),I.current=null)}},1e3),await Ne.executeRemoteScriptStream(t,G=>{p(ee=>ee+G),E.current&&(E.current.scrollTop=E.current.scrollHeight)}),I.current&&(clearInterval(I.current),I.current=null)}catch(G){console.error("Script execution failed:",G),b(G.message||"Script execution failed"),I.current&&(clearInterval(I.current),I.current=null)}finally{f(!1)}},K=()=>{const G=(_==null?void 0:_.type)==="lua"?".lua":".hx";window.open(`https://github.com/barisyild/airpsx.com/blob/master/scripts/${t}/${t}${G}`,"_blank")},X=G=>G?G.split(`
`).length>3:!1,V=()=>{if(!(_!=null&&_.description))return null;const G=_.description;if(!O&&X(G)){const de=G.split(`
`).slice(0,3).join(`
`);return y("div",{className:"script-description-container",children:[y("div",{className:"script-description",dangerouslySetInnerHTML:{__html:de}}),y("button",{className:"show-more-button",onClick:()=>N(!0),children:"Show More"})]})}return y("div",{className:"script-description-container",children:[y("div",{className:"script-description",dangerouslySetInnerHTML:{__html:G}}),O&&X(G)&&y("button",{className:"show-less-button",onClick:()=>N(!1),children:"Show Less"})]})};return L?y("div",{className:`script-detail ${i?"dark":""}`,children:y("div",{className:"script-detail-loading",children:[y("div",{className:"loading-spinner"}),y("p",{children:"Loading script details..."})]})}):g&&!_?y("div",{className:`script-detail ${i?"dark":""}`,children:y("div",{className:"script-detail-error",children:[y("p",{children:g}),y("button",{className:"retry-button",onClick:()=>window.location.reload(),children:"Retry"})]})}):y("div",{className:`script-detail ${i?"dark":""}`,children:[y("div",{className:"script-detail-header",children:[y("div",{className:"script-detail-info",children:[y("div",{className:"script-detail-image",children:y("img",{src:Ne.getScriptImageUrl(t),alt:n,onError:G=>{G.currentTarget instanceof HTMLImageElement&&(G.currentTarget.onerror=null,G.currentTarget.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='%23f0f0f0'/%3E%3Ctext x='50' y='50' font-family='Arial' font-size='20' text-anchor='middle' alignment-baseline='middle' fill='%23999'%3ENo Image%3C/text%3E%3C/svg%3E")}})}),y("div",{className:"script-detail-text",children:[y("h2",{children:n}),y("a",{href:o,target:"_blank",rel:"noopener noreferrer",className:"author-link",children:s}),y("div",{className:"source-code-link",onClick:K,children:[y("span",{className:"code-icon",children:"</>"})," View source on GitHub"]}),V()]})]}),y("div",{className:"script-detail-actions",children:y("button",{className:`execute-button ${u?"executing":""}`,onClick:j,disabled:u,children:u?"Executing...":"Execute Script"})})]}),y("div",{className:"script-detail-output-container",children:[y("div",{className:"output-header",children:[y("h3",{children:"Output"}),h&&y("button",{className:"clear-button",onClick:()=>p(""),disabled:u,children:"Clear"})]}),y("div",{className:"script-output",ref:E,children:[g&&y("div",{className:"script-error",children:g}),h?y("pre",{children:h}):y("div",{className:"no-output",children:g?"Execution failed. Try again?":"Execute the script to see output here."})]})]})]})};function Vh(i,t){for(var n in t)i[n]=t[n];return i}function rl(i,t){for(var n in i)if(n!=="__source"&&!(n in t))return!0;for(var s in t)if(s!=="__source"&&i[s]!==t[s])return!0;return!1}function Kh(i,t){var n=t(),s=oe({t:{__:n,u:t}}),o=s[0].t,u=s[1];return Ts(function(){o.__=n,o.u=t,$a(o)&&u({t:o})},[i,n,t]),je(function(){return $a(o)&&u({t:o}),i(function(){$a(o)&&u({t:o})})},[i]),n}function $a(i){var t,n,s=i.u,o=i.__;try{var u=s();return!((t=o)===(n=u)&&(t!==0||1/t==1/n)||t!=t&&n!=n)}catch{return!0}}function Xh(i){i()}function qh(i){return i}function Gh(){return[!1,Xh]}var Yh=Ts;function sl(i,t){this.props=i,this.context=t}function km(i,t){function n(o){var u=this.props.ref,f=u==o.ref;return!f&&u&&(u.call?u(null):u.current=null),t?!t(this.props,o)||!f:rl(this.props,o)}function s(o){return this.shouldComponentUpdate=n,Zn(i,o)}return s.displayName="Memo("+(i.displayName||i.name)+")",s.prototype.isReactComponent=!0,s.__f=!0,s}(sl.prototype=new En).isPureReactComponent=!0,sl.prototype.shouldComponentUpdate=function(i,t){return rl(this.props,i)||rl(this.state,t)};var af=Ue.__b;Ue.__b=function(i){i.type&&i.type.__f&&i.ref&&(i.props.ref=i.ref,i.ref=null),af&&af(i)};var Sm=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function Sl(i){function t(n){var s=Vh({},n);return delete s.ref,i(s,n.ref||null)}return t.$$typeof=Sm,t.render=t,t.prototype.isReactComponent=t.__f=!0,t.displayName="ForwardRef("+(i.displayName||i.name)+")",t}var lf=function(i,t){return i==null?null:Yn(Yn(i).map(t))},Cm={map:lf,forEach:lf,count:function(i){return i?Yn(i).length:0},only:function(i){var t=Yn(i);if(t.length!==1)throw"Children.only";return t[0]},toArray:Yn},Tm=Ue.__e;Ue.__e=function(i,t,n,s){if(i.then){for(var o,u=t;u=u.__;)if((o=u.__c)&&o.__c)return t.__e==null&&(t.__e=n.__e,t.__k=n.__k),o.__c(i,t)}Tm(i,t,n,s)};var cf=Ue.unmount;function Zh(i,t,n){return i&&(i.__c&&i.__c.__H&&(i.__c.__H.__.forEach(function(s){typeof s.__c=="function"&&s.__c()}),i.__c.__H=null),(i=Vh({},i)).__c!=null&&(i.__c.__P===n&&(i.__c.__P=t),i.__c=null),i.__k=i.__k&&i.__k.map(function(s){return Zh(s,t,n)})),i}function Jh(i,t,n){return i&&n&&(i.__v=null,i.__k=i.__k&&i.__k.map(function(s){return Jh(s,t,n)}),i.__c&&i.__c.__P===t&&(i.__e&&n.appendChild(i.__e),i.__c.__e=!0,i.__c.__P=n)),i}function No(){this.__u=0,this.o=null,this.__b=null}function Qh(i){var t=i.__.__c;return t&&t.__a&&t.__a(i)}function Lm(i){var t,n,s;function o(u){if(t||(t=i()).then(function(f){n=f.default||f},function(f){s=f}),s)throw s;if(!n)throw t;return Zn(n,u)}return o.displayName="Lazy",o.__f=!0,o}function ss(){this.i=null,this.l=null}Ue.unmount=function(i){var t=i.__c;t&&t.__R&&t.__R(),t&&32&i.__u&&(i.type=null),cf&&cf(i)},(No.prototype=new En).__c=function(i,t){var n=t.__c,s=this;s.o==null&&(s.o=[]),s.o.push(n);var o=Qh(s.__v),u=!1,f=function(){u||(u=!0,n.__R=null,o?o(h):h())};n.__R=f;var h=function(){if(!--s.__u){if(s.state.__a){var p=s.state.__a;s.__v.__k[0]=Jh(p,p.__c.__P,p.__c.__O)}var g;for(s.setState({__a:s.__b=null});g=s.o.pop();)g.forceUpdate()}};s.__u++||32&t.__u||s.setState({__a:s.__b=s.__v.__k[0]}),i.then(f,f)},No.prototype.componentWillUnmount=function(){this.o=[]},No.prototype.render=function(i,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),s=this.__v.__k[0].__c;this.__v.__k[0]=Zh(this.__b,n,s.__O=s.__P)}this.__b=null}var o=t.__a&&Zn(Pt,null,i.fallback);return o&&(o.__u&=-33),[Zn(Pt,null,t.__a?null:i.children),o]};var uf=function(i,t,n){if(++n[1]===n[0]&&i.l.delete(t),i.props.revealOrder&&(i.props.revealOrder[0]!=="t"||!i.l.size))for(n=i.i;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;i.i=n=n[2]}};function Nm(i){return this.getChildContext=function(){return i.context},i.children}function Mm(i){var t=this,n=i.h;t.componentWillUnmount=function(){Fi(null,t.v),t.v=null,t.h=null},t.h&&t.h!==n&&t.componentWillUnmount(),t.v||(t.h=n,t.v={nodeType:1,parentNode:n,childNodes:[],contains:function(){return!0},appendChild:function(s){this.childNodes.push(s),t.h.appendChild(s)},insertBefore:function(s,o){this.childNodes.push(s),t.h.insertBefore(s,o)},removeChild:function(s){this.childNodes.splice(this.childNodes.indexOf(s)>>>1,1),t.h.removeChild(s)}}),Fi(Zn(Nm,{context:t.context},i.__v),t.v)}function Dm(i,t){var n=Zn(Mm,{__v:i,h:t});return n.containerInfo=t,n}(ss.prototype=new En).__a=function(i){var t=this,n=Qh(t.__v),s=t.l.get(i);return s[0]++,function(o){var u=function(){t.props.revealOrder?(s.push(o),uf(t,i,s)):o()};n?n(u):u()}},ss.prototype.render=function(i){this.i=null,this.l=new Map;var t=Yn(i.children);i.revealOrder&&i.revealOrder[0]==="b"&&t.reverse();for(var n=t.length;n--;)this.l.set(t[n],this.i=[1,0,this.i]);return i.children},ss.prototype.componentDidUpdate=ss.prototype.componentDidMount=function(){var i=this;this.l.forEach(function(t,n){uf(i,n,t)})};var ed=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,Pm=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Om=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,Am=/[A-Z0-9]/g,Im=typeof document<"u",Em=function(i){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(i)};function Rm(i,t,n){return t.__k==null&&(t.textContent=""),Fi(i,t),typeof n=="function"&&n(),i?i.__c:null}function Fm(i,t,n){return Rh(i,t),typeof n=="function"&&n(),i?i.__c:null}En.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(i){Object.defineProperty(En.prototype,i,{configurable:!0,get:function(){return this["UNSAFE_"+i]},set:function(t){Object.defineProperty(this,i,{configurable:!0,writable:!0,value:t})}})});var ff=Ue.event;function Hm(){}function Wm(){return this.cancelBubble}function zm(){return this.defaultPrevented}Ue.event=function(i){return ff&&(i=ff(i)),i.persist=Hm,i.isPropagationStopped=Wm,i.isDefaultPrevented=zm,i.nativeEvent=i};var Cl,Bm={enumerable:!1,configurable:!0,get:function(){return this.class}},hf=Ue.vnode;Ue.vnode=function(i){typeof i.type=="string"&&function(t){var n=t.props,s=t.type,o={},u=s.indexOf("-")===-1;for(var f in n){var h=n[f];if(!(f==="value"&&"defaultValue"in n&&h==null||Im&&f==="children"&&s==="noscript"||f==="class"||f==="className")){var p=f.toLowerCase();f==="defaultValue"&&"value"in n&&n.value==null?f="value":f==="download"&&h===!0?h="":p==="translate"&&h==="no"?h=!1:p[0]==="o"&&p[1]==="n"?p==="ondoubleclick"?f="ondblclick":p!=="onchange"||s!=="input"&&s!=="textarea"||Em(n.type)?p==="onfocus"?f="onfocusin":p==="onblur"?f="onfocusout":Om.test(f)&&(f=p):p=f="oninput":u&&Pm.test(f)?f=f.replace(Am,"-$&").toLowerCase():h===null&&(h=void 0),p==="oninput"&&o[f=p]&&(f="oninputCapture"),o[f]=h}}s=="select"&&o.multiple&&Array.isArray(o.value)&&(o.value=Yn(n.children).forEach(function(g){g.props.selected=o.value.indexOf(g.props.value)!=-1})),s=="select"&&o.defaultValue!=null&&(o.value=Yn(n.children).forEach(function(g){g.props.selected=o.multiple?o.defaultValue.indexOf(g.props.value)!=-1:o.defaultValue==g.props.value})),n.class&&!n.className?(o.class=n.class,Object.defineProperty(o,"className",Bm)):(n.className&&!n.class||n.class&&n.className)&&(o.class=o.className=n.className),t.props=o}(i),i.$$typeof=ed,hf&&hf(i)};var df=Ue.__r;Ue.__r=function(i){df&&df(i),Cl=i.__c};var pf=Ue.diffed;Ue.diffed=function(i){pf&&pf(i);var t=i.props,n=i.__e;n!=null&&i.type==="textarea"&&"value"in t&&t.value!==n.value&&(n.value=t.value==null?"":t.value),Cl=null};var Um={ReactCurrentDispatcher:{current:{readContext:function(i){return Cl.__n[i.__c].props.value},useCallback:Wh,useContext:zh,useDebugValue:Bh,useDeferredValue:qh,useEffect:je,useId:Uh,useImperativeHandle:Hh,useInsertionEffect:Yh,useLayoutEffect:Ts,useMemo:jo,useReducer:wl,useRef:gt,useState:oe,useSyncExternalStore:Kh,useTransition:Gh}}};function $m(i){return Zn.bind(null,i)}function Ko(i){return!!i&&i.$$typeof===ed}function jm(i){return Ko(i)&&i.type===Pt}function Vm(i){return!!i&&!!i.displayName&&(typeof i.displayName=="string"||i.displayName instanceof String)&&i.displayName.startsWith("Memo(")}function Km(i){return Ko(i)?qg.apply(null,arguments):i}function Xm(i){return!!i.__k&&(Fi(null,i),!0)}function qm(i){return i&&(i.base||i.nodeType===1&&i)||null}var Gm=function(i,t){return i(t)},Ym=function(i,t){return i(t)},Zm=Pt,Jm=Ko,td={useState:oe,useId:Uh,useReducer:wl,useEffect:je,useLayoutEffect:Ts,useInsertionEffect:Yh,useTransition:Gh,useDeferredValue:qh,useSyncExternalStore:Kh,startTransition:Xh,useRef:gt,useImperativeHandle:Hh,useMemo:jo,useCallback:Wh,useContext:zh,useDebugValue:Bh,version:"18.3.1",Children:Cm,render:Rm,hydrate:Fm,unmountComponentAtNode:Xm,createPortal:Dm,createElement:Zn,createContext:Gg,createFactory:$m,cloneElement:Km,createRef:$g,Fragment:Pt,isValidElement:Ko,isElement:Jm,isFragment:jm,isMemo:Vm,findDOMNode:qm,Component:En,PureComponent:sl,memo:km,forwardRef:Sl,flushSync:Ym,unstable_batchedUpdates:Gm,StrictMode:Zm,Suspense:No,SuspenseList:ss,lazy:Lm,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Um};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Ns(i){return i+.5|0}const hi=(i,t,n)=>Math.max(Math.min(i,n),t);function os(i){return hi(Ns(i*2.55),0,255)}function di(i){return hi(Ns(i*255),0,255)}function qn(i){return hi(Ns(i/2.55)/100,0,1)}function gf(i){return hi(Ns(i*100),0,100)}const hn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},ol=[..."0123456789ABCDEF"],Qm=i=>ol[i&15],ev=i=>ol[(i&240)>>4]+ol[i&15],fo=i=>(i&240)>>4===(i&15),tv=i=>fo(i.r)&&fo(i.g)&&fo(i.b)&&fo(i.a);function nv(i){var t=i.length,n;return i[0]==="#"&&(t===4||t===5?n={r:255&hn[i[1]]*17,g:255&hn[i[2]]*17,b:255&hn[i[3]]*17,a:t===5?hn[i[4]]*17:255}:(t===7||t===9)&&(n={r:hn[i[1]]<<4|hn[i[2]],g:hn[i[3]]<<4|hn[i[4]],b:hn[i[5]]<<4|hn[i[6]],a:t===9?hn[i[7]]<<4|hn[i[8]]:255})),n}const iv=(i,t)=>i<255?t(i):"";function rv(i){var t=tv(i)?Qm:ev;return i?"#"+t(i.r)+t(i.g)+t(i.b)+iv(i.a,t):void 0}const sv=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function nd(i,t,n){const s=t*Math.min(n,1-n),o=(u,f=(u+i/30)%12)=>n-s*Math.max(Math.min(f-3,9-f,1),-1);return[o(0),o(8),o(4)]}function ov(i,t,n){const s=(o,u=(o+i/60)%6)=>n-n*t*Math.max(Math.min(u,4-u,1),0);return[s(5),s(3),s(1)]}function av(i,t,n){const s=nd(i,1,.5);let o;for(t+n>1&&(o=1/(t+n),t*=o,n*=o),o=0;o<3;o++)s[o]*=1-t-n,s[o]+=t;return s}function lv(i,t,n,s,o){return i===o?(t-n)/s+(t<n?6:0):t===o?(n-i)/s+2:(i-t)/s+4}function Tl(i){const n=i.r/255,s=i.g/255,o=i.b/255,u=Math.max(n,s,o),f=Math.min(n,s,o),h=(u+f)/2;let p,g,b;return u!==f&&(b=u-f,g=h>.5?b/(2-u-f):b/(u+f),p=lv(n,s,o,b,u),p=p*60+.5),[p|0,g||0,h]}function Ll(i,t,n,s){return(Array.isArray(t)?i(t[0],t[1],t[2]):i(t,n,s)).map(di)}function Nl(i,t,n){return Ll(nd,i,t,n)}function cv(i,t,n){return Ll(av,i,t,n)}function uv(i,t,n){return Ll(ov,i,t,n)}function id(i){return(i%360+360)%360}function fv(i){const t=sv.exec(i);let n=255,s;if(!t)return;t[5]!==s&&(n=t[6]?os(+t[5]):di(+t[5]));const o=id(+t[2]),u=+t[3]/100,f=+t[4]/100;return t[1]==="hwb"?s=cv(o,u,f):t[1]==="hsv"?s=uv(o,u,f):s=Nl(o,u,f),{r:s[0],g:s[1],b:s[2],a:n}}function hv(i,t){var n=Tl(i);n[0]=id(n[0]+t),n=Nl(n),i.r=n[0],i.g=n[1],i.b=n[2]}function dv(i){if(!i)return;const t=Tl(i),n=t[0],s=gf(t[1]),o=gf(t[2]);return i.a<255?`hsla(${n}, ${s}%, ${o}%, ${qn(i.a)})`:`hsl(${n}, ${s}%, ${o}%)`}const mf={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},vf={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function pv(){const i={},t=Object.keys(vf),n=Object.keys(mf);let s,o,u,f,h;for(s=0;s<t.length;s++){for(f=h=t[s],o=0;o<n.length;o++)u=n[o],h=h.replace(u,mf[u]);u=parseInt(vf[f],16),i[h]=[u>>16&255,u>>8&255,u&255]}return i}let ho;function gv(i){ho||(ho=pv(),ho.transparent=[0,0,0,0]);const t=ho[i.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const mv=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function vv(i){const t=mv.exec(i);let n=255,s,o,u;if(t){if(t[7]!==s){const f=+t[7];n=t[8]?os(f):hi(f*255,0,255)}return s=+t[1],o=+t[3],u=+t[5],s=255&(t[2]?os(s):hi(s,0,255)),o=255&(t[4]?os(o):hi(o,0,255)),u=255&(t[6]?os(u):hi(u,0,255)),{r:s,g:o,b:u,a:n}}}function yv(i){return i&&(i.a<255?`rgba(${i.r}, ${i.g}, ${i.b}, ${qn(i.a)})`:`rgb(${i.r}, ${i.g}, ${i.b})`)}const ja=i=>i<=.0031308?i*12.92:Math.pow(i,1/2.4)*1.055-.055,ur=i=>i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4);function bv(i,t,n){const s=ur(qn(i.r)),o=ur(qn(i.g)),u=ur(qn(i.b));return{r:di(ja(s+n*(ur(qn(t.r))-s))),g:di(ja(o+n*(ur(qn(t.g))-o))),b:di(ja(u+n*(ur(qn(t.b))-u))),a:i.a+n*(t.a-i.a)}}function po(i,t,n){if(i){let s=Tl(i);s[t]=Math.max(0,Math.min(s[t]+s[t]*n,t===0?360:1)),s=Nl(s),i.r=s[0],i.g=s[1],i.b=s[2]}}function rd(i,t){return i&&Object.assign(t||{},i)}function yf(i){var t={r:0,g:0,b:0,a:255};return Array.isArray(i)?i.length>=3&&(t={r:i[0],g:i[1],b:i[2],a:255},i.length>3&&(t.a=di(i[3]))):(t=rd(i,{r:0,g:0,b:0,a:1}),t.a=di(t.a)),t}function xv(i){return i.charAt(0)==="r"?vv(i):fv(i)}class bs{constructor(t){if(t instanceof bs)return t;const n=typeof t;let s;n==="object"?s=yf(t):n==="string"&&(s=nv(t)||gv(t)||xv(t)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var t=rd(this._rgb);return t&&(t.a=qn(t.a)),t}set rgb(t){this._rgb=yf(t)}rgbString(){return this._valid?yv(this._rgb):void 0}hexString(){return this._valid?rv(this._rgb):void 0}hslString(){return this._valid?dv(this._rgb):void 0}mix(t,n){if(t){const s=this.rgb,o=t.rgb;let u;const f=n===u?.5:n,h=2*f-1,p=s.a-o.a,g=((h*p===-1?h:(h+p)/(1+h*p))+1)/2;u=1-g,s.r=255&g*s.r+u*o.r+.5,s.g=255&g*s.g+u*o.g+.5,s.b=255&g*s.b+u*o.b+.5,s.a=f*s.a+(1-f)*o.a,this.rgb=s}return this}interpolate(t,n){return t&&(this._rgb=bv(this._rgb,t._rgb,n)),this}clone(){return new bs(this.rgb)}alpha(t){return this._rgb.a=di(t),this}clearer(t){const n=this._rgb;return n.a*=1-t,this}greyscale(){const t=this._rgb,n=Ns(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=n,this}opaquer(t){const n=this._rgb;return n.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return po(this._rgb,2,t),this}darken(t){return po(this._rgb,2,-t),this}saturate(t){return po(this._rgb,1,t),this}desaturate(t){return po(this._rgb,1,-t),this}rotate(t){return hv(this._rgb,t),this}}/*!
 * Chart.js v4.4.7
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */function Vn(){}const _v=(()=>{let i=0;return()=>i++})();function vt(i){return i==null}function Dt(i){if(Array.isArray&&Array.isArray(i))return!0;const t=Object.prototype.toString.call(i);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function tt(i){return i!==null&&Object.prototype.toString.call(i)==="[object Object]"}function gn(i){return(typeof i=="number"||i instanceof Number)&&isFinite(+i)}function On(i,t){return gn(i)?i:t}function Ye(i,t){return typeof i>"u"?t:i}const wv=(i,t)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100*t:+i;function ct(i,t,n){if(i&&typeof i.call=="function")return i.apply(n,t)}function rt(i,t,n,s){let o,u,f;if(Dt(i))for(u=i.length,o=0;o<u;o++)t.call(n,i[o],o);else if(tt(i))for(f=Object.keys(i),u=f.length,o=0;o<u;o++)t.call(n,i[f[o]],f[o])}function Eo(i,t){let n,s,o,u;if(!i||!t||i.length!==t.length)return!1;for(n=0,s=i.length;n<s;++n)if(o=i[n],u=t[n],o.datasetIndex!==u.datasetIndex||o.index!==u.index)return!1;return!0}function Ro(i){if(Dt(i))return i.map(Ro);if(tt(i)){const t=Object.create(null),n=Object.keys(i),s=n.length;let o=0;for(;o<s;++o)t[n[o]]=Ro(i[n[o]]);return t}return i}function sd(i){return["__proto__","prototype","constructor"].indexOf(i)===-1}function kv(i,t,n,s){if(!sd(i))return;const o=t[i],u=n[i];tt(o)&&tt(u)?xs(o,u,s):t[i]=Ro(u)}function xs(i,t,n){const s=Dt(t)?t:[t],o=s.length;if(!tt(i))return i;n=n||{};const u=n.merger||kv;let f;for(let h=0;h<o;++h){if(f=s[h],!tt(f))continue;const p=Object.keys(f);for(let g=0,b=p.length;g<b;++g)u(p[g],i,f,n)}return i}function hs(i,t){return xs(i,t,{merger:Sv})}function Sv(i,t,n){if(!sd(i))return;const s=t[i],o=n[i];tt(s)&&tt(o)?hs(s,o):Object.prototype.hasOwnProperty.call(t,i)||(t[i]=Ro(o))}const bf={"":i=>i,x:i=>i.x,y:i=>i.y};function Cv(i){const t=i.split("."),n=[];let s="";for(const o of t)s+=o,s.endsWith("\\")?s=s.slice(0,-1)+".":(n.push(s),s="");return n}function Tv(i){const t=Cv(i);return n=>{for(const s of t){if(s==="")break;n=n&&n[s]}return n}}function Fo(i,t){return(bf[t]||(bf[t]=Tv(t)))(i)}function Ml(i){return i.charAt(0).toUpperCase()+i.slice(1)}const Ho=i=>typeof i<"u",gi=i=>typeof i=="function",xf=(i,t)=>{if(i.size!==t.size)return!1;for(const n of i)if(!t.has(n))return!1;return!0};function Lv(i){return i.type==="mouseup"||i.type==="click"||i.type==="contextmenu"}const Ot=Math.PI,Rn=2*Ot,Nv=Rn+Ot,Wo=Number.POSITIVE_INFINITY,Mv=Ot/180,Sn=Ot/2,Ni=Ot/4,_f=Ot*2/3,al=Math.log10,pr=Math.sign;function ds(i,t,n){return Math.abs(i-t)<n}function wf(i){const t=Math.round(i);i=ds(i,t,i/1e3)?t:i;const n=Math.pow(10,Math.floor(al(i))),s=i/n;return(s<=1?1:s<=2?2:s<=5?5:10)*n}function Dv(i){const t=[],n=Math.sqrt(i);let s;for(s=1;s<n;s++)i%s===0&&(t.push(s),t.push(i/s));return n===(n|0)&&t.push(n),t.sort((o,u)=>o-u).pop(),t}function _s(i){return!isNaN(parseFloat(i))&&isFinite(i)}function Pv(i,t){const n=Math.round(i);return n-t<=i&&n+t>=i}function Ov(i,t,n){let s,o,u;for(s=0,o=i.length;s<o;s++)u=i[s][n],isNaN(u)||(t.min=Math.min(t.min,u),t.max=Math.max(t.max,u))}function Ii(i){return i*(Ot/180)}function Av(i){return i*(180/Ot)}function kf(i){if(!gn(i))return;let t=1,n=0;for(;Math.round(i*t)/t!==i;)t*=10,n++;return n}function Iv(i,t){const n=t.x-i.x,s=t.y-i.y,o=Math.sqrt(n*n+s*s);let u=Math.atan2(s,n);return u<-.5*Ot&&(u+=Rn),{angle:u,distance:o}}function ll(i,t){return Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2))}function Ev(i,t){return(i-t+Nv)%Rn-Ot}function fi(i){return(i%Rn+Rn)%Rn}function od(i,t,n,s){const o=fi(i),u=fi(t),f=fi(n),h=fi(u-o),p=fi(f-o),g=fi(o-u),b=fi(o-f);return o===u||o===f||s&&u===f||h>p&&g<b}function dn(i,t,n){return Math.max(t,Math.min(n,i))}function Rv(i){return dn(i,-32768,32767)}function as(i,t,n,s=1e-6){return i>=Math.min(t,n)-s&&i<=Math.max(t,n)+s}function Dl(i,t,n){n=n||(f=>i[f]<t);let s=i.length-1,o=0,u;for(;s-o>1;)u=o+s>>1,n(u)?o=u:s=u;return{lo:o,hi:s}}const Ei=(i,t,n,s)=>Dl(i,n,s?o=>{const u=i[o][t];return u<n||u===n&&i[o+1][t]===n}:o=>i[o][t]<n),Fv=(i,t,n)=>Dl(i,n,s=>i[s][t]>=n);function Hv(i,t,n){let s=0,o=i.length;for(;s<o&&i[s]<t;)s++;for(;o>s&&i[o-1]>n;)o--;return s>0||o<i.length?i.slice(s,o):i}const ad=["push","pop","shift","splice","unshift"];function Wv(i,t){if(i._chartjs){i._chartjs.listeners.push(t);return}Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),ad.forEach(n=>{const s="_onData"+Ml(n),o=i[n];Object.defineProperty(i,n,{configurable:!0,enumerable:!1,value(...u){const f=o.apply(this,u);return i._chartjs.listeners.forEach(h=>{typeof h[s]=="function"&&h[s](...u)}),f}})})}function Sf(i,t){const n=i._chartjs;if(!n)return;const s=n.listeners,o=s.indexOf(t);o!==-1&&s.splice(o,1),!(s.length>0)&&(ad.forEach(u=>{delete i[u]}),delete i._chartjs)}function zv(i){const t=new Set(i);return t.size===i.length?i:Array.from(t)}const ld=function(){return typeof window>"u"?function(i){return i()}:window.requestAnimationFrame}();function cd(i,t){let n=[],s=!1;return function(...o){n=o,s||(s=!0,ld.call(window,()=>{s=!1,i.apply(t,n)}))}}function Bv(i,t){let n;return function(...s){return t?(clearTimeout(n),n=setTimeout(i,t,s)):i.apply(this,s),t}}const Pl=i=>i==="start"?"left":i==="end"?"right":"center",Bt=(i,t,n)=>i==="start"?t:i==="end"?n:(t+n)/2,Uv=(i,t,n,s)=>i===(s?"left":"right")?n:i==="center"?(t+n)/2:t;function $v(i,t,n){const s=t.length;let o=0,u=s;if(i._sorted){const{iScale:f,_parsed:h}=i,p=f.axis,{min:g,max:b,minDefined:_,maxDefined:T}=f.getUserBounds();_&&(o=dn(Math.min(Ei(h,p,g).lo,n?s:Ei(t,p,f.getPixelForValue(g)).lo),0,s-1)),T?u=dn(Math.max(Ei(h,f.axis,b,!0).hi+1,n?0:Ei(t,p,f.getPixelForValue(b),!0).hi+1),o,s)-o:u=s-o}return{start:o,count:u}}function jv(i){const{xScale:t,yScale:n,_scaleRanges:s}=i,o={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!s)return i._scaleRanges=o,!0;const u=s.xmin!==t.min||s.xmax!==t.max||s.ymin!==n.min||s.ymax!==n.max;return Object.assign(s,o),u}const go=i=>i===0||i===1,Cf=(i,t,n)=>-(Math.pow(2,10*(i-=1))*Math.sin((i-t)*Rn/n)),Tf=(i,t,n)=>Math.pow(2,-10*i)*Math.sin((i-t)*Rn/n)+1,ps={linear:i=>i,easeInQuad:i=>i*i,easeOutQuad:i=>-i*(i-2),easeInOutQuad:i=>(i/=.5)<1?.5*i*i:-.5*(--i*(i-2)-1),easeInCubic:i=>i*i*i,easeOutCubic:i=>(i-=1)*i*i+1,easeInOutCubic:i=>(i/=.5)<1?.5*i*i*i:.5*((i-=2)*i*i+2),easeInQuart:i=>i*i*i*i,easeOutQuart:i=>-((i-=1)*i*i*i-1),easeInOutQuart:i=>(i/=.5)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2),easeInQuint:i=>i*i*i*i*i,easeOutQuint:i=>(i-=1)*i*i*i*i+1,easeInOutQuint:i=>(i/=.5)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2),easeInSine:i=>-Math.cos(i*Sn)+1,easeOutSine:i=>Math.sin(i*Sn),easeInOutSine:i=>-.5*(Math.cos(Ot*i)-1),easeInExpo:i=>i===0?0:Math.pow(2,10*(i-1)),easeOutExpo:i=>i===1?1:-Math.pow(2,-10*i)+1,easeInOutExpo:i=>go(i)?i:i<.5?.5*Math.pow(2,10*(i*2-1)):.5*(-Math.pow(2,-10*(i*2-1))+2),easeInCirc:i=>i>=1?i:-(Math.sqrt(1-i*i)-1),easeOutCirc:i=>Math.sqrt(1-(i-=1)*i),easeInOutCirc:i=>(i/=.5)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1),easeInElastic:i=>go(i)?i:Cf(i,.075,.3),easeOutElastic:i=>go(i)?i:Tf(i,.075,.3),easeInOutElastic(i){return go(i)?i:i<.5?.5*Cf(i*2,.1125,.45):.5+.5*Tf(i*2-1,.1125,.45)},easeInBack(i){return i*i*((1.70158+1)*i-1.70158)},easeOutBack(i){return(i-=1)*i*((1.70158+1)*i+1.70158)+1},easeInOutBack(i){let t=1.70158;return(i/=.5)<1?.5*(i*i*(((t*=1.525)+1)*i-t)):.5*((i-=2)*i*(((t*=1.525)+1)*i+t)+2)},easeInBounce:i=>1-ps.easeOutBounce(1-i),easeOutBounce(i){return i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375},easeInOutBounce:i=>i<.5?ps.easeInBounce(i*2)*.5:ps.easeOutBounce(i*2-1)*.5+.5};function Ol(i){if(i&&typeof i=="object"){const t=i.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function Lf(i){return Ol(i)?i:new bs(i)}function Va(i){return Ol(i)?i:new bs(i).saturate(.5).darken(.1).hexString()}const Vv=["x","y","borderWidth","radius","tension"],Kv=["color","borderColor","backgroundColor"];function Xv(i){i.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),i.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),i.set("animations",{colors:{type:"color",properties:Kv},numbers:{type:"number",properties:Vv}}),i.describe("animations",{_fallback:"animation"}),i.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function qv(i){i.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Nf=new Map;function Gv(i,t){t=t||{};const n=i+JSON.stringify(t);let s=Nf.get(n);return s||(s=new Intl.NumberFormat(i,t),Nf.set(n,s)),s}function ud(i,t,n){return Gv(t,n).format(i)}const fd={values(i){return Dt(i)?i:""+i},numeric(i,t,n){if(i===0)return"0";const s=this.chart.options.locale;let o,u=i;if(n.length>1){const g=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(g<1e-4||g>1e15)&&(o="scientific"),u=Yv(i,n)}const f=al(Math.abs(u)),h=isNaN(f)?1:Math.max(Math.min(-1*Math.floor(f),20),0),p={notation:o,minimumFractionDigits:h,maximumFractionDigits:h};return Object.assign(p,this.options.ticks.format),ud(i,s,p)},logarithmic(i,t,n){if(i===0)return"0";const s=n[t].significand||i/Math.pow(10,Math.floor(al(i)));return[1,2,3,5,10,15].includes(s)||t>.8*n.length?fd.numeric.call(this,i,t,n):""}};function Yv(i,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(n)>=1&&i!==Math.floor(i)&&(n=i-Math.floor(i)),n}var hd={formatters:fd};function Zv(i){i.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,n)=>n.lineWidth,tickColor:(t,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:hd.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),i.route("scale.ticks","color","","color"),i.route("scale.grid","color","","borderColor"),i.route("scale.border","color","","borderColor"),i.route("scale.title","color","","color"),i.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),i.describe("scales",{_fallback:"scale"}),i.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Hi=Object.create(null),cl=Object.create(null);function gs(i,t){if(!t)return i;const n=t.split(".");for(let s=0,o=n.length;s<o;++s){const u=n[s];i=i[u]||(i[u]=Object.create(null))}return i}function Ka(i,t,n){return typeof t=="string"?xs(gs(i,t),n):xs(gs(i,""),t)}class Jv{constructor(t,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,o)=>Va(o.backgroundColor),this.hoverBorderColor=(s,o)=>Va(o.borderColor),this.hoverColor=(s,o)=>Va(o.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(n)}set(t,n){return Ka(this,t,n)}get(t){return gs(this,t)}describe(t,n){return Ka(cl,t,n)}override(t,n){return Ka(Hi,t,n)}route(t,n,s,o){const u=gs(this,t),f=gs(this,s),h="_"+n;Object.defineProperties(u,{[h]:{value:u[n],writable:!0},[n]:{enumerable:!0,get(){const p=this[h],g=f[o];return tt(p)?Object.assign({},g,p):Ye(p,g)},set(p){this[h]=p}}})}apply(t){t.forEach(n=>n(this))}}var _t=new Jv({_scriptable:i=>!i.startsWith("on"),_indexable:i=>i!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Xv,qv,Zv]);function Qv(i){return!i||vt(i.size)||vt(i.family)?null:(i.style?i.style+" ":"")+(i.weight?i.weight+" ":"")+i.size+"px "+i.family}function Mf(i,t,n,s,o){let u=t[o];return u||(u=t[o]=i.measureText(o).width,n.push(o)),u>s&&(s=u),s}function Mi(i,t,n){const s=i.currentDevicePixelRatio,o=n!==0?Math.max(n/2,.5):0;return Math.round((t-o)*s)/s+o}function Df(i,t){!t&&!i||(t=t||i.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,i.width,i.height),t.restore())}function ul(i,t,n,s){dd(i,t,n,s,null)}function dd(i,t,n,s,o){let u,f,h,p,g,b,_,T;const L=t.pointStyle,D=t.rotation,O=t.radius;let N=(D||0)*Mv;if(L&&typeof L=="object"&&(u=L.toString(),u==="[object HTMLImageElement]"||u==="[object HTMLCanvasElement]")){i.save(),i.translate(n,s),i.rotate(N),i.drawImage(L,-L.width/2,-L.height/2,L.width,L.height),i.restore();return}if(!(isNaN(O)||O<=0)){switch(i.beginPath(),L){default:o?i.ellipse(n,s,o/2,O,0,0,Rn):i.arc(n,s,O,0,Rn),i.closePath();break;case"triangle":b=o?o/2:O,i.moveTo(n+Math.sin(N)*b,s-Math.cos(N)*O),N+=_f,i.lineTo(n+Math.sin(N)*b,s-Math.cos(N)*O),N+=_f,i.lineTo(n+Math.sin(N)*b,s-Math.cos(N)*O),i.closePath();break;case"rectRounded":g=O*.516,p=O-g,f=Math.cos(N+Ni)*p,_=Math.cos(N+Ni)*(o?o/2-g:p),h=Math.sin(N+Ni)*p,T=Math.sin(N+Ni)*(o?o/2-g:p),i.arc(n-_,s-h,g,N-Ot,N-Sn),i.arc(n+T,s-f,g,N-Sn,N),i.arc(n+_,s+h,g,N,N+Sn),i.arc(n-T,s+f,g,N+Sn,N+Ot),i.closePath();break;case"rect":if(!D){p=Math.SQRT1_2*O,b=o?o/2:p,i.rect(n-b,s-p,2*b,2*p);break}N+=Ni;case"rectRot":_=Math.cos(N)*(o?o/2:O),f=Math.cos(N)*O,h=Math.sin(N)*O,T=Math.sin(N)*(o?o/2:O),i.moveTo(n-_,s-h),i.lineTo(n+T,s-f),i.lineTo(n+_,s+h),i.lineTo(n-T,s+f),i.closePath();break;case"crossRot":N+=Ni;case"cross":_=Math.cos(N)*(o?o/2:O),f=Math.cos(N)*O,h=Math.sin(N)*O,T=Math.sin(N)*(o?o/2:O),i.moveTo(n-_,s-h),i.lineTo(n+_,s+h),i.moveTo(n+T,s-f),i.lineTo(n-T,s+f);break;case"star":_=Math.cos(N)*(o?o/2:O),f=Math.cos(N)*O,h=Math.sin(N)*O,T=Math.sin(N)*(o?o/2:O),i.moveTo(n-_,s-h),i.lineTo(n+_,s+h),i.moveTo(n+T,s-f),i.lineTo(n-T,s+f),N+=Ni,_=Math.cos(N)*(o?o/2:O),f=Math.cos(N)*O,h=Math.sin(N)*O,T=Math.sin(N)*(o?o/2:O),i.moveTo(n-_,s-h),i.lineTo(n+_,s+h),i.moveTo(n+T,s-f),i.lineTo(n-T,s+f);break;case"line":f=o?o/2:Math.cos(N)*O,h=Math.sin(N)*O,i.moveTo(n-f,s-h),i.lineTo(n+f,s+h);break;case"dash":i.moveTo(n,s),i.lineTo(n+Math.cos(N)*(o?o/2:O),s+Math.sin(N)*O);break;case!1:i.closePath();break}i.fill(),t.borderWidth>0&&i.stroke()}}function ws(i,t,n){return n=n||.5,!t||i&&i.x>t.left-n&&i.x<t.right+n&&i.y>t.top-n&&i.y<t.bottom+n}function Al(i,t){i.save(),i.beginPath(),i.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),i.clip()}function Il(i){i.restore()}function ey(i,t,n,s,o){if(!t)return i.lineTo(n.x,n.y);if(o==="middle"){const u=(t.x+n.x)/2;i.lineTo(u,t.y),i.lineTo(u,n.y)}else o==="after"!=!!s?i.lineTo(t.x,n.y):i.lineTo(n.x,t.y);i.lineTo(n.x,n.y)}function ty(i,t,n,s){if(!t)return i.lineTo(n.x,n.y);i.bezierCurveTo(s?t.cp1x:t.cp2x,s?t.cp1y:t.cp2y,s?n.cp2x:n.cp1x,s?n.cp2y:n.cp1y,n.x,n.y)}function ny(i,t){t.translation&&i.translate(t.translation[0],t.translation[1]),vt(t.rotation)||i.rotate(t.rotation),t.color&&(i.fillStyle=t.color),t.textAlign&&(i.textAlign=t.textAlign),t.textBaseline&&(i.textBaseline=t.textBaseline)}function iy(i,t,n,s,o){if(o.strikethrough||o.underline){const u=i.measureText(s),f=t-u.actualBoundingBoxLeft,h=t+u.actualBoundingBoxRight,p=n-u.actualBoundingBoxAscent,g=n+u.actualBoundingBoxDescent,b=o.strikethrough?(p+g)/2:g;i.strokeStyle=i.fillStyle,i.beginPath(),i.lineWidth=o.decorationWidth||2,i.moveTo(f,b),i.lineTo(h,b),i.stroke()}}function ry(i,t){const n=i.fillStyle;i.fillStyle=t.color,i.fillRect(t.left,t.top,t.width,t.height),i.fillStyle=n}function ks(i,t,n,s,o,u={}){const f=Dt(t)?t:[t],h=u.strokeWidth>0&&u.strokeColor!=="";let p,g;for(i.save(),i.font=o.string,ny(i,u),p=0;p<f.length;++p)g=f[p],u.backdrop&&ry(i,u.backdrop),h&&(u.strokeColor&&(i.strokeStyle=u.strokeColor),vt(u.strokeWidth)||(i.lineWidth=u.strokeWidth),i.strokeText(g,n,s,u.maxWidth)),i.fillText(g,n,s,u.maxWidth),iy(i,n,s,g,u),s+=Number(o.lineHeight);i.restore()}function fl(i,t){const{x:n,y:s,w:o,h:u,radius:f}=t;i.arc(n+f.topLeft,s+f.topLeft,f.topLeft,1.5*Ot,Ot,!0),i.lineTo(n,s+u-f.bottomLeft),i.arc(n+f.bottomLeft,s+u-f.bottomLeft,f.bottomLeft,Ot,Sn,!0),i.lineTo(n+o-f.bottomRight,s+u),i.arc(n+o-f.bottomRight,s+u-f.bottomRight,f.bottomRight,Sn,0,!0),i.lineTo(n+o,s+f.topRight),i.arc(n+o-f.topRight,s+f.topRight,f.topRight,0,-Sn,!0),i.lineTo(n+f.topLeft,s)}const sy=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,oy=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function ay(i,t){const n=(""+i).match(sy);if(!n||n[1]==="normal")return t*1.2;switch(i=+n[2],n[3]){case"px":return i;case"%":i/=100;break}return t*i}const ly=i=>+i||0;function pd(i,t){const n={},s=tt(t),o=s?Object.keys(t):t,u=tt(i)?s?f=>Ye(i[f],i[t[f]]):f=>i[f]:()=>i;for(const f of o)n[f]=ly(u(f));return n}function cy(i){return pd(i,{top:"y",right:"x",bottom:"y",left:"x"})}function ms(i){return pd(i,["topLeft","topRight","bottomLeft","bottomRight"])}function mn(i){const t=cy(i);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Ut(i,t){i=i||{},t=t||_t.font;let n=Ye(i.size,t.size);typeof n=="string"&&(n=parseInt(n,10));let s=Ye(i.style,t.style);s&&!(""+s).match(oy)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const o={family:Ye(i.family,t.family),lineHeight:ay(Ye(i.lineHeight,t.lineHeight),n),size:n,style:s,weight:Ye(i.weight,t.weight),string:""};return o.string=Qv(o),o}function mo(i,t,n,s){let o,u,f;for(o=0,u=i.length;o<u;++o)if(f=i[o],f!==void 0&&f!==void 0)return f}function uy(i,t,n){const{min:s,max:o}=i,u=wv(t,(o-s)/2),f=(h,p)=>n&&h===0?0:h+p;return{min:f(s,-Math.abs(u)),max:f(o,u)}}function Wi(i,t){return Object.assign(Object.create(i),t)}function El(i,t=[""],n,s,o=()=>i[0]){const u=n||i;typeof s>"u"&&(s=yd("_fallback",i));const f={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:i,_rootScopes:u,_fallback:s,_getTarget:o,override:h=>El([h,...i],t,u,s)};return new Proxy(f,{deleteProperty(h,p){return delete h[p],delete h._keys,delete i[0][p],!0},get(h,p){return md(h,p,()=>yy(p,t,i,h))},getOwnPropertyDescriptor(h,p){return Reflect.getOwnPropertyDescriptor(h._scopes[0],p)},getPrototypeOf(){return Reflect.getPrototypeOf(i[0])},has(h,p){return Of(h).includes(p)},ownKeys(h){return Of(h)},set(h,p,g){const b=h._storage||(h._storage=o());return h[p]=b[p]=g,delete h._keys,!0}})}function gr(i,t,n,s){const o={_cacheable:!1,_proxy:i,_context:t,_subProxy:n,_stack:new Set,_descriptors:gd(i,s),setContext:u=>gr(i,u,n,s),override:u=>gr(i.override(u),t,n,s)};return new Proxy(o,{deleteProperty(u,f){return delete u[f],delete i[f],!0},get(u,f,h){return md(u,f,()=>hy(u,f,h))},getOwnPropertyDescriptor(u,f){return u._descriptors.allKeys?Reflect.has(i,f)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(i,f)},getPrototypeOf(){return Reflect.getPrototypeOf(i)},has(u,f){return Reflect.has(i,f)},ownKeys(){return Reflect.ownKeys(i)},set(u,f,h){return i[f]=h,delete u[f],!0}})}function gd(i,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:s=t.indexable,_allKeys:o=t.allKeys}=i;return{allKeys:o,scriptable:n,indexable:s,isScriptable:gi(n)?n:()=>n,isIndexable:gi(s)?s:()=>s}}const fy=(i,t)=>i?i+Ml(t):t,Rl=(i,t)=>tt(t)&&i!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function md(i,t,n){if(Object.prototype.hasOwnProperty.call(i,t)||t==="constructor")return i[t];const s=n();return i[t]=s,s}function hy(i,t,n){const{_proxy:s,_context:o,_subProxy:u,_descriptors:f}=i;let h=s[t];return gi(h)&&f.isScriptable(t)&&(h=dy(t,h,i,n)),Dt(h)&&h.length&&(h=py(t,h,i,f.isIndexable)),Rl(t,h)&&(h=gr(h,o,u&&u[t],f)),h}function dy(i,t,n,s){const{_proxy:o,_context:u,_subProxy:f,_stack:h}=n;if(h.has(i))throw new Error("Recursion detected: "+Array.from(h).join("->")+"->"+i);h.add(i);let p=t(u,f||s);return h.delete(i),Rl(i,p)&&(p=Fl(o._scopes,o,i,p)),p}function py(i,t,n,s){const{_proxy:o,_context:u,_subProxy:f,_descriptors:h}=n;if(typeof u.index<"u"&&s(i))return t[u.index%t.length];if(tt(t[0])){const p=t,g=o._scopes.filter(b=>b!==p);t=[];for(const b of p){const _=Fl(g,o,i,b);t.push(gr(_,u,f&&f[i],h))}}return t}function vd(i,t,n){return gi(i)?i(t,n):i}const gy=(i,t)=>i===!0?t:typeof i=="string"?Fo(t,i):void 0;function my(i,t,n,s,o){for(const u of t){const f=gy(n,u);if(f){i.add(f);const h=vd(f._fallback,n,o);if(typeof h<"u"&&h!==n&&h!==s)return h}else if(f===!1&&typeof s<"u"&&n!==s)return null}return!1}function Fl(i,t,n,s){const o=t._rootScopes,u=vd(t._fallback,n,s),f=[...i,...o],h=new Set;h.add(s);let p=Pf(h,f,n,u||n,s);return p===null||typeof u<"u"&&u!==n&&(p=Pf(h,f,u,p,s),p===null)?!1:El(Array.from(h),[""],o,u,()=>vy(t,n,s))}function Pf(i,t,n,s,o){for(;n;)n=my(i,t,n,s,o);return n}function vy(i,t,n){const s=i._getTarget();t in s||(s[t]={});const o=s[t];return Dt(o)&&tt(n)?n:o||{}}function yy(i,t,n,s){let o;for(const u of t)if(o=yd(fy(u,i),n),typeof o<"u")return Rl(i,o)?Fl(n,s,i,o):o}function yd(i,t){for(const n of t){if(!n)continue;const s=n[i];if(typeof s<"u")return s}}function Of(i){let t=i._keys;return t||(t=i._keys=by(i._scopes)),t}function by(i){const t=new Set;for(const n of i)for(const s of Object.keys(n).filter(o=>!o.startsWith("_")))t.add(s);return Array.from(t)}const xy=Number.EPSILON||1e-14,mr=(i,t)=>t<i.length&&!i[t].skip&&i[t],bd=i=>i==="x"?"y":"x";function _y(i,t,n,s){const o=i.skip?t:i,u=t,f=n.skip?t:n,h=ll(u,o),p=ll(f,u);let g=h/(h+p),b=p/(h+p);g=isNaN(g)?0:g,b=isNaN(b)?0:b;const _=s*g,T=s*b;return{previous:{x:u.x-_*(f.x-o.x),y:u.y-_*(f.y-o.y)},next:{x:u.x+T*(f.x-o.x),y:u.y+T*(f.y-o.y)}}}function wy(i,t,n){const s=i.length;let o,u,f,h,p,g=mr(i,0);for(let b=0;b<s-1;++b)if(p=g,g=mr(i,b+1),!(!p||!g)){if(ds(t[b],0,xy)){n[b]=n[b+1]=0;continue}o=n[b]/t[b],u=n[b+1]/t[b],h=Math.pow(o,2)+Math.pow(u,2),!(h<=9)&&(f=3/Math.sqrt(h),n[b]=o*f*t[b],n[b+1]=u*f*t[b])}}function ky(i,t,n="x"){const s=bd(n),o=i.length;let u,f,h,p=mr(i,0);for(let g=0;g<o;++g){if(f=h,h=p,p=mr(i,g+1),!h)continue;const b=h[n],_=h[s];f&&(u=(b-f[n])/3,h[`cp1${n}`]=b-u,h[`cp1${s}`]=_-u*t[g]),p&&(u=(p[n]-b)/3,h[`cp2${n}`]=b+u,h[`cp2${s}`]=_+u*t[g])}}function Sy(i,t="x"){const n=bd(t),s=i.length,o=Array(s).fill(0),u=Array(s);let f,h,p,g=mr(i,0);for(f=0;f<s;++f)if(h=p,p=g,g=mr(i,f+1),!!p){if(g){const b=g[t]-p[t];o[f]=b!==0?(g[n]-p[n])/b:0}u[f]=h?g?pr(o[f-1])!==pr(o[f])?0:(o[f-1]+o[f])/2:o[f-1]:o[f]}wy(i,o,u),ky(i,u,t)}function vo(i,t,n){return Math.max(Math.min(i,n),t)}function Cy(i,t){let n,s,o,u,f,h=ws(i[0],t);for(n=0,s=i.length;n<s;++n)f=u,u=h,h=n<s-1&&ws(i[n+1],t),u&&(o=i[n],f&&(o.cp1x=vo(o.cp1x,t.left,t.right),o.cp1y=vo(o.cp1y,t.top,t.bottom)),h&&(o.cp2x=vo(o.cp2x,t.left,t.right),o.cp2y=vo(o.cp2y,t.top,t.bottom)))}function Ty(i,t,n,s,o){let u,f,h,p;if(t.spanGaps&&(i=i.filter(g=>!g.skip)),t.cubicInterpolationMode==="monotone")Sy(i,o);else{let g=s?i[i.length-1]:i[0];for(u=0,f=i.length;u<f;++u)h=i[u],p=_y(g,h,i[Math.min(u+1,f-(s?0:1))%f],t.tension),h.cp1x=p.previous.x,h.cp1y=p.previous.y,h.cp2x=p.next.x,h.cp2y=p.next.y,g=h}t.capBezierPoints&&Cy(i,n)}function Hl(){return typeof window<"u"&&typeof document<"u"}function Wl(i){let t=i.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function zo(i,t,n){let s;return typeof i=="string"?(s=parseInt(i,10),i.indexOf("%")!==-1&&(s=s/100*t.parentNode[n])):s=i,s}const Xo=i=>i.ownerDocument.defaultView.getComputedStyle(i,null);function Ly(i,t){return Xo(i).getPropertyValue(t)}const Ny=["top","right","bottom","left"];function Ri(i,t,n){const s={};n=n?"-"+n:"";for(let o=0;o<4;o++){const u=Ny[o];s[u]=parseFloat(i[t+"-"+u+n])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const My=(i,t,n)=>(i>0||t>0)&&(!n||!n.shadowRoot);function Dy(i,t){const n=i.touches,s=n&&n.length?n[0]:i,{offsetX:o,offsetY:u}=s;let f=!1,h,p;if(My(o,u,i.target))h=o,p=u;else{const g=t.getBoundingClientRect();h=s.clientX-g.left,p=s.clientY-g.top,f=!0}return{x:h,y:p,box:f}}function Pi(i,t){if("native"in i)return i;const{canvas:n,currentDevicePixelRatio:s}=t,o=Xo(n),u=o.boxSizing==="border-box",f=Ri(o,"padding"),h=Ri(o,"border","width"),{x:p,y:g,box:b}=Dy(i,n),_=f.left+(b&&h.left),T=f.top+(b&&h.top);let{width:L,height:D}=t;return u&&(L-=f.width+h.width,D-=f.height+h.height),{x:Math.round((p-_)/L*n.width/s),y:Math.round((g-T)/D*n.height/s)}}function Py(i,t,n){let s,o;if(t===void 0||n===void 0){const u=i&&Wl(i);if(!u)t=i.clientWidth,n=i.clientHeight;else{const f=u.getBoundingClientRect(),h=Xo(u),p=Ri(h,"border","width"),g=Ri(h,"padding");t=f.width-g.width-p.width,n=f.height-g.height-p.height,s=zo(h.maxWidth,u,"clientWidth"),o=zo(h.maxHeight,u,"clientHeight")}}return{width:t,height:n,maxWidth:s||Wo,maxHeight:o||Wo}}const yo=i=>Math.round(i*10)/10;function Oy(i,t,n,s){const o=Xo(i),u=Ri(o,"margin"),f=zo(o.maxWidth,i,"clientWidth")||Wo,h=zo(o.maxHeight,i,"clientHeight")||Wo,p=Py(i,t,n);let{width:g,height:b}=p;if(o.boxSizing==="content-box"){const T=Ri(o,"border","width"),L=Ri(o,"padding");g-=L.width+T.width,b-=L.height+T.height}return g=Math.max(0,g-u.width),b=Math.max(0,s?g/s:b-u.height),g=yo(Math.min(g,f,p.maxWidth)),b=yo(Math.min(b,h,p.maxHeight)),g&&!b&&(b=yo(g/2)),(t!==void 0||n!==void 0)&&s&&p.height&&b>p.height&&(b=p.height,g=yo(Math.floor(b*s))),{width:g,height:b}}function Af(i,t,n){const s=t||1,o=Math.floor(i.height*s),u=Math.floor(i.width*s);i.height=Math.floor(i.height),i.width=Math.floor(i.width);const f=i.canvas;return f.style&&(n||!f.style.height&&!f.style.width)&&(f.style.height=`${i.height}px`,f.style.width=`${i.width}px`),i.currentDevicePixelRatio!==s||f.height!==o||f.width!==u?(i.currentDevicePixelRatio=s,f.height=o,f.width=u,i.ctx.setTransform(s,0,0,s,0,0),!0):!1}const Ay=function(){let i=!1;try{const t={get passive(){return i=!0,!1}};Hl()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return i}();function If(i,t){const n=Ly(i,t),s=n&&n.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function Oi(i,t,n,s){return{x:i.x+n*(t.x-i.x),y:i.y+n*(t.y-i.y)}}function Iy(i,t,n,s){return{x:i.x+n*(t.x-i.x),y:s==="middle"?n<.5?i.y:t.y:s==="after"?n<1?i.y:t.y:n>0?t.y:i.y}}function Ey(i,t,n,s){const o={x:i.cp2x,y:i.cp2y},u={x:t.cp1x,y:t.cp1y},f=Oi(i,o,n),h=Oi(o,u,n),p=Oi(u,t,n),g=Oi(f,h,n),b=Oi(h,p,n);return Oi(g,b,n)}const Ry=function(i,t){return{x(n){return i+i+t-n},setWidth(n){t=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,s){return n-s},leftForLtr(n,s){return n-s}}},Fy=function(){return{x(i){return i},setWidth(i){},textAlign(i){return i},xPlus(i,t){return i+t},leftForLtr(i,t){return i}}};function fr(i,t,n){return i?Ry(t,n):Fy()}function xd(i,t){let n,s;(t==="ltr"||t==="rtl")&&(n=i.canvas.style,s=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),i.prevTextDirection=s)}function _d(i,t){t!==void 0&&(delete i.prevTextDirection,i.canvas.style.setProperty("direction",t[0],t[1]))}function wd(i){return i==="angle"?{between:od,compare:Ev,normalize:fi}:{between:as,compare:(t,n)=>t-n,normalize:t=>t}}function Ef({start:i,end:t,count:n,loop:s,style:o}){return{start:i%n,end:t%n,loop:s&&(t-i+1)%n===0,style:o}}function Hy(i,t,n){const{property:s,start:o,end:u}=n,{between:f,normalize:h}=wd(s),p=t.length;let{start:g,end:b,loop:_}=i,T,L;if(_){for(g+=p,b+=p,T=0,L=p;T<L&&f(h(t[g%p][s]),o,u);++T)g--,b--;g%=p,b%=p}return b<g&&(b+=p),{start:g,end:b,loop:_,style:i.style}}function Wy(i,t,n){if(!n)return[i];const{property:s,start:o,end:u}=n,f=t.length,{compare:h,between:p,normalize:g}=wd(s),{start:b,end:_,loop:T,style:L}=Hy(i,t,n),D=[];let O=!1,N=null,E,I,j;const K=()=>p(o,j,E)&&h(o,j)!==0,X=()=>h(u,E)===0||p(u,j,E),V=()=>O||K(),G=()=>!O||X();for(let ee=b,de=b;ee<=_;++ee)I=t[ee%f],!I.skip&&(E=g(I[s]),E!==j&&(O=p(E,o,u),N===null&&V()&&(N=h(E,o)===0?ee:de),N!==null&&G()&&(D.push(Ef({start:N,end:ee,loop:T,count:f,style:L})),N=null),de=ee,j=E));return N!==null&&D.push(Ef({start:N,end:_,loop:T,count:f,style:L})),D}function zy(i,t){const n=[],s=i.segments;for(let o=0;o<s.length;o++){const u=Wy(s[o],i.points,t);u.length&&n.push(...u)}return n}function By(i,t,n,s){let o=0,u=t-1;if(n&&!s)for(;o<t&&!i[o].skip;)o++;for(;o<t&&i[o].skip;)o++;for(o%=t,n&&(u+=o);u>o&&i[u%t].skip;)u--;return u%=t,{start:o,end:u}}function Uy(i,t,n,s){const o=i.length,u=[];let f=t,h=i[t],p;for(p=t+1;p<=n;++p){const g=i[p%o];g.skip||g.stop?h.skip||(s=!1,u.push({start:t%o,end:(p-1)%o,loop:s}),t=f=g.stop?p:null):(f=p,h.skip&&(t=p)),h=g}return f!==null&&u.push({start:t%o,end:f%o,loop:s}),u}function $y(i,t){const n=i.points,s=i.options.spanGaps,o=n.length;if(!o)return[];const u=!!i._loop,{start:f,end:h}=By(n,o,u,s);if(s===!0)return Rf(i,[{start:f,end:h,loop:u}],n,t);const p=h<f?h+o:h,g=!!i._fullLoop&&f===0&&h===o-1;return Rf(i,Uy(n,f,p,g),n,t)}function Rf(i,t,n,s){return!s||!s.setContext||!n?t:jy(i,t,n,s)}function jy(i,t,n,s){const o=i._chart.getContext(),u=Ff(i.options),{_datasetIndex:f,options:{spanGaps:h}}=i,p=n.length,g=[];let b=u,_=t[0].start,T=_;function L(D,O,N,E){const I=h?-1:1;if(D!==O){for(D+=p;n[D%p].skip;)D-=I;for(;n[O%p].skip;)O+=I;D%p!==O%p&&(g.push({start:D%p,end:O%p,loop:N,style:E}),b=E,_=O%p)}}for(const D of t){_=h?_:D.start;let O=n[_%p],N;for(T=_+1;T<=D.end;T++){const E=n[T%p];N=Ff(s.setContext(Wi(o,{type:"segment",p0:O,p1:E,p0DataIndex:(T-1)%p,p1DataIndex:T%p,datasetIndex:f}))),Vy(N,b)&&L(_,T-1,D.loop,b),O=E,b=N}_<T-1&&L(_,T-1,D.loop,b)}return g}function Ff(i){return{backgroundColor:i.backgroundColor,borderCapStyle:i.borderCapStyle,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderJoinStyle:i.borderJoinStyle,borderWidth:i.borderWidth,borderColor:i.borderColor}}function Vy(i,t){if(!t)return!1;const n=[],s=function(o,u){return Ol(u)?(n.includes(u)||n.push(u),n.indexOf(u)):u};return JSON.stringify(i,s)!==JSON.stringify(t,s)}/*!
 * Chart.js v4.4.7
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */class Ky{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,n,s,o){const u=n.listeners[o],f=n.duration;u.forEach(h=>h({chart:t,initial:n.initial,numSteps:f,currentStep:Math.min(s-n.start,f)}))}_refresh(){this._request||(this._running=!0,this._request=ld.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let n=0;this._charts.forEach((s,o)=>{if(!s.running||!s.items.length)return;const u=s.items;let f=u.length-1,h=!1,p;for(;f>=0;--f)p=u[f],p._active?(p._total>s.duration&&(s.duration=p._total),p.tick(t),h=!0):(u[f]=u[u.length-1],u.pop());h&&(o.draw(),this._notify(o,s,t,"progress")),u.length||(s.running=!1,this._notify(o,s,t,"complete"),s.initial=!1),n+=u.length}),this._lastDate=t,n===0&&(this._running=!1)}_getAnims(t){const n=this._charts;let s=n.get(t);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(t,s)),s}listen(t,n,s){this._getAnims(t).listeners[n].push(s)}add(t,n){!n||!n.length||this._getAnims(t).items.push(...n)}has(t){return this._getAnims(t).items.length>0}start(t){const n=this._charts.get(t);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((s,o)=>Math.max(s,o._duration),0),this._refresh())}running(t){if(!this._running)return!1;const n=this._charts.get(t);return!(!n||!n.running||!n.items.length)}stop(t){const n=this._charts.get(t);if(!n||!n.items.length)return;const s=n.items;let o=s.length-1;for(;o>=0;--o)s[o].cancel();n.items=[],this._notify(t,n,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Kn=new Ky;const Hf="transparent",Xy={boolean(i,t,n){return n>.5?t:i},color(i,t,n){const s=Lf(i||Hf),o=s.valid&&Lf(t||Hf);return o&&o.valid?o.mix(s,n).hexString():t},number(i,t,n){return i+(t-i)*n}};class qy{constructor(t,n,s,o){const u=n[s];o=mo([t.to,o,u,t.from]);const f=mo([t.from,u,o]);this._active=!0,this._fn=t.fn||Xy[t.type||typeof f],this._easing=ps[t.easing]||ps.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=s,this._from=f,this._to=o,this._promises=void 0}active(){return this._active}update(t,n,s){if(this._active){this._notify(!1);const o=this._target[this._prop],u=s-this._start,f=this._duration-u;this._start=s,this._duration=Math.floor(Math.max(f,t.duration)),this._total+=u,this._loop=!!t.loop,this._to=mo([t.to,n,o,t.from]),this._from=mo([t.from,o,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const n=t-this._start,s=this._duration,o=this._prop,u=this._from,f=this._loop,h=this._to;let p;if(this._active=u!==h&&(f||n<s),!this._active){this._target[o]=h,this._notify(!0);return}if(n<0){this._target[o]=u;return}p=n/s%2,p=f&&p>1?2-p:p,p=this._easing(Math.min(1,Math.max(0,p))),this._target[o]=this._fn(u,h,p)}wait(){const t=this._promises||(this._promises=[]);return new Promise((n,s)=>{t.push({res:n,rej:s})})}_notify(t){const n=t?"res":"rej",s=this._promises||[];for(let o=0;o<s.length;o++)s[o][n]()}}class kd{constructor(t,n){this._chart=t,this._properties=new Map,this.configure(n)}configure(t){if(!tt(t))return;const n=Object.keys(_t.animation),s=this._properties;Object.getOwnPropertyNames(t).forEach(o=>{const u=t[o];if(!tt(u))return;const f={};for(const h of n)f[h]=u[h];(Dt(u.properties)&&u.properties||[o]).forEach(h=>{(h===o||!s.has(h))&&s.set(h,f)})})}_animateOptions(t,n){const s=n.options,o=Yy(t,s);if(!o)return[];const u=this._createAnimations(o,s);return s.$shared&&Gy(t.options.$animations,s).then(()=>{t.options=s},()=>{}),u}_createAnimations(t,n){const s=this._properties,o=[],u=t.$animations||(t.$animations={}),f=Object.keys(n),h=Date.now();let p;for(p=f.length-1;p>=0;--p){const g=f[p];if(g.charAt(0)==="$")continue;if(g==="options"){o.push(...this._animateOptions(t,n));continue}const b=n[g];let _=u[g];const T=s.get(g);if(_)if(T&&_.active()){_.update(T,b,h);continue}else _.cancel();if(!T||!T.duration){t[g]=b;continue}u[g]=_=new qy(T,t,g,b),o.push(_)}return o}update(t,n){if(this._properties.size===0){Object.assign(t,n);return}const s=this._createAnimations(t,n);if(s.length)return Kn.add(this._chart,s),!0}}function Gy(i,t){const n=[],s=Object.keys(t);for(let o=0;o<s.length;o++){const u=i[s[o]];u&&u.active()&&n.push(u.wait())}return Promise.all(n)}function Yy(i,t){if(!t)return;let n=i.options;if(!n){i.options=t;return}return n.$shared&&(i.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function Wf(i,t){const n=i&&i.options||{},s=n.reverse,o=n.min===void 0?t:0,u=n.max===void 0?t:0;return{start:s?u:o,end:s?o:u}}function Zy(i,t,n){if(n===!1)return!1;const s=Wf(i,n),o=Wf(t,n);return{top:o.end,right:s.end,bottom:o.start,left:s.start}}function Jy(i){let t,n,s,o;return tt(i)?(t=i.top,n=i.right,s=i.bottom,o=i.left):t=n=s=o=i,{top:t,right:n,bottom:s,left:o,disabled:i===!1}}function Sd(i,t){const n=[],s=i._getSortedDatasetMetas(t);let o,u;for(o=0,u=s.length;o<u;++o)n.push(s[o].index);return n}function zf(i,t,n,s={}){const o=i.keys,u=s.mode==="single";let f,h,p,g;if(t===null)return;let b=!1;for(f=0,h=o.length;f<h;++f){if(p=+o[f],p===n){if(b=!0,s.all)continue;break}g=i.values[p],gn(g)&&(u||t===0||pr(t)===pr(g))&&(t+=g)}return!b&&!s.all?0:t}function Qy(i,t){const{iScale:n,vScale:s}=t,o=n.axis==="x"?"x":"y",u=s.axis==="x"?"x":"y",f=Object.keys(i),h=new Array(f.length);let p,g,b;for(p=0,g=f.length;p<g;++p)b=f[p],h[p]={[o]:b,[u]:i[b]};return h}function Xa(i,t){const n=i&&i.options.stacked;return n||n===void 0&&t.stack!==void 0}function e0(i,t,n){return`${i.id}.${t.id}.${n.stack||n.type}`}function t0(i){const{min:t,max:n,minDefined:s,maxDefined:o}=i.getUserBounds();return{min:s?t:Number.NEGATIVE_INFINITY,max:o?n:Number.POSITIVE_INFINITY}}function n0(i,t,n){const s=i[t]||(i[t]={});return s[n]||(s[n]={})}function Bf(i,t,n,s){for(const o of t.getMatchingVisibleMetas(s).reverse()){const u=i[o.index];if(n&&u>0||!n&&u<0)return o.index}return null}function Uf(i,t){const{chart:n,_cachedMeta:s}=i,o=n._stacks||(n._stacks={}),{iScale:u,vScale:f,index:h}=s,p=u.axis,g=f.axis,b=e0(u,f,s),_=t.length;let T;for(let L=0;L<_;++L){const D=t[L],{[p]:O,[g]:N}=D,E=D._stacks||(D._stacks={});T=E[g]=n0(o,b,O),T[h]=N,T._top=Bf(T,f,!0,s.type),T._bottom=Bf(T,f,!1,s.type);const I=T._visualValues||(T._visualValues={});I[h]=N}}function qa(i,t){const n=i.scales;return Object.keys(n).filter(s=>n[s].axis===t).shift()}function i0(i,t){return Wi(i,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function r0(i,t,n){return Wi(i,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}function es(i,t){const n=i.controller.index,s=i.vScale&&i.vScale.axis;if(s){t=t||i._parsed;for(const o of t){const u=o._stacks;if(!u||u[s]===void 0||u[s][n]===void 0)return;delete u[s][n],u[s]._visualValues!==void 0&&u[s]._visualValues[n]!==void 0&&delete u[s]._visualValues[n]}}}const Ga=i=>i==="reset"||i==="none",$f=(i,t)=>t?i:Object.assign({},i),s0=(i,t,n)=>i&&!t.hidden&&t._stacked&&{keys:Sd(n,!0),values:null};class vs{constructor(t,n){this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Xa(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&es(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,n=this._cachedMeta,s=this.getDataset(),o=(_,T,L,D)=>_==="x"?T:_==="r"?D:L,u=n.xAxisID=Ye(s.xAxisID,qa(t,"x")),f=n.yAxisID=Ye(s.yAxisID,qa(t,"y")),h=n.rAxisID=Ye(s.rAxisID,qa(t,"r")),p=n.indexAxis,g=n.iAxisID=o(p,u,f,h),b=n.vAxisID=o(p,f,u,h);n.xScale=this.getScaleForId(u),n.yScale=this.getScaleForId(f),n.rScale=this.getScaleForId(h),n.iScale=this.getScaleForId(g),n.vScale=this.getScaleForId(b)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const n=this._cachedMeta;return t===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Sf(this._data,this),t._stacked&&es(t)}_dataCheck(){const t=this.getDataset(),n=t.data||(t.data=[]),s=this._data;if(tt(n)){const o=this._cachedMeta;this._data=Qy(n,o)}else if(s!==n){if(s){Sf(s,this);const o=this._cachedMeta;es(o),o._parsed=[]}n&&Object.isExtensible(n)&&Wv(n,this),this._syncList=[],this._data=n}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const n=this._cachedMeta,s=this.getDataset();let o=!1;this._dataCheck();const u=n._stacked;n._stacked=Xa(n.vScale,n),n.stack!==s.stack&&(o=!0,es(n),n.stack=s.stack),this._resyncElements(t),(o||u!==n._stacked)&&(Uf(this,n._parsed),n._stacked=Xa(n.vScale,n))}configure(){const t=this.chart.config,n=t.datasetScopeKeys(this._type),s=t.getOptionScopes(this.getDataset(),n,!0);this.options=t.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,n){const{_cachedMeta:s,_data:o}=this,{iScale:u,_stacked:f}=s,h=u.axis;let p=t===0&&n===o.length?!0:s._sorted,g=t>0&&s._parsed[t-1],b,_,T;if(this._parsing===!1)s._parsed=o,s._sorted=!0,T=o;else{Dt(o[t])?T=this.parseArrayData(s,o,t,n):tt(o[t])?T=this.parseObjectData(s,o,t,n):T=this.parsePrimitiveData(s,o,t,n);const L=()=>_[h]===null||g&&_[h]<g[h];for(b=0;b<n;++b)s._parsed[b+t]=_=T[b],p&&(L()&&(p=!1),g=_);s._sorted=p}f&&Uf(this,T)}parsePrimitiveData(t,n,s,o){const{iScale:u,vScale:f}=t,h=u.axis,p=f.axis,g=u.getLabels(),b=u===f,_=new Array(o);let T,L,D;for(T=0,L=o;T<L;++T)D=T+s,_[T]={[h]:b||u.parse(g[D],D),[p]:f.parse(n[D],D)};return _}parseArrayData(t,n,s,o){const{xScale:u,yScale:f}=t,h=new Array(o);let p,g,b,_;for(p=0,g=o;p<g;++p)b=p+s,_=n[b],h[p]={x:u.parse(_[0],b),y:f.parse(_[1],b)};return h}parseObjectData(t,n,s,o){const{xScale:u,yScale:f}=t,{xAxisKey:h="x",yAxisKey:p="y"}=this._parsing,g=new Array(o);let b,_,T,L;for(b=0,_=o;b<_;++b)T=b+s,L=n[T],g[b]={x:u.parse(Fo(L,h),T),y:f.parse(Fo(L,p),T)};return g}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,n,s){const o=this.chart,u=this._cachedMeta,f=n[t.axis],h={keys:Sd(o,!0),values:n._stacks[t.axis]._visualValues};return zf(h,f,u.index,{mode:s})}updateRangeFromParsed(t,n,s,o){const u=s[n.axis];let f=u===null?NaN:u;const h=o&&s._stacks[n.axis];o&&h&&(o.values=h,f=zf(o,u,this._cachedMeta.index)),t.min=Math.min(t.min,f),t.max=Math.max(t.max,f)}getMinMax(t,n){const s=this._cachedMeta,o=s._parsed,u=s._sorted&&t===s.iScale,f=o.length,h=this._getOtherScale(t),p=s0(n,s,this.chart),g={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:b,max:_}=t0(h);let T,L;function D(){L=o[T];const O=L[h.axis];return!gn(L[t.axis])||b>O||_<O}for(T=0;T<f&&!(!D()&&(this.updateRangeFromParsed(g,t,L,p),u));++T);if(u){for(T=f-1;T>=0;--T)if(!D()){this.updateRangeFromParsed(g,t,L,p);break}}return g}getAllParsedValues(t){const n=this._cachedMeta._parsed,s=[];let o,u,f;for(o=0,u=n.length;o<u;++o)f=n[o][t.axis],gn(f)&&s.push(f);return s}getMaxOverflow(){return!1}getLabelAndValue(t){const n=this._cachedMeta,s=n.iScale,o=n.vScale,u=this.getParsed(t);return{label:s?""+s.getLabelForValue(u[s.axis]):"",value:o?""+o.getLabelForValue(u[o.axis]):""}}_update(t){const n=this._cachedMeta;this.update(t||"default"),n._clip=Jy(Ye(this.options.clip,Zy(n.xScale,n.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,n=this.chart,s=this._cachedMeta,o=s.data||[],u=n.chartArea,f=[],h=this._drawStart||0,p=this._drawCount||o.length-h,g=this.options.drawActiveElementsOnTop;let b;for(s.dataset&&s.dataset.draw(t,u,h,p),b=h;b<h+p;++b){const _=o[b];_.hidden||(_.active&&g?f.push(_):_.draw(t,u))}for(b=0;b<f.length;++b)f[b].draw(t,u)}getStyle(t,n){const s=n?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(t||0,s)}getContext(t,n,s){const o=this.getDataset();let u;if(t>=0&&t<this._cachedMeta.data.length){const f=this._cachedMeta.data[t];u=f.$context||(f.$context=r0(this.getContext(),t,f)),u.parsed=this.getParsed(t),u.raw=o.data[t],u.index=u.dataIndex=t}else u=this.$context||(this.$context=i0(this.chart.getContext(),this.index)),u.dataset=o,u.index=u.datasetIndex=this.index;return u.active=!!n,u.mode=s,u}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,n){return this._resolveElementOptions(this.dataElementType.id,n,t)}_resolveElementOptions(t,n="default",s){const o=n==="active",u=this._cachedDataOpts,f=t+"-"+n,h=u[f],p=this.enableOptionSharing&&Ho(s);if(h)return $f(h,p);const g=this.chart.config,b=g.datasetElementScopeKeys(this._type,t),_=o?[`${t}Hover`,"hover",t,""]:[t,""],T=g.getOptionScopes(this.getDataset(),b),L=Object.keys(_t.elements[t]),D=()=>this.getContext(s,o,n),O=g.resolveNamedOptions(T,L,D,_);return O.$shared&&(O.$shared=p,u[f]=Object.freeze($f(O,p))),O}_resolveAnimations(t,n,s){const o=this.chart,u=this._cachedDataOpts,f=`animation-${n}`,h=u[f];if(h)return h;let p;if(o.options.animation!==!1){const b=this.chart.config,_=b.datasetAnimationScopeKeys(this._type,n),T=b.getOptionScopes(this.getDataset(),_);p=b.createResolver(T,this.getContext(t,s,n))}const g=new kd(o,p&&p.animations);return p&&p._cacheable&&(u[f]=Object.freeze(g)),g}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,n){return!n||Ga(t)||this.chart._animationsDisabled}_getSharedOptions(t,n){const s=this.resolveDataElementOptions(t,n),o=this._sharedOptions,u=this.getSharedOptions(s),f=this.includeOptions(n,u)||u!==o;return this.updateSharedOptions(u,n,s),{sharedOptions:u,includeOptions:f}}updateElement(t,n,s,o){Ga(o)?Object.assign(t,s):this._resolveAnimations(n,o).update(t,s)}updateSharedOptions(t,n,s){t&&!Ga(n)&&this._resolveAnimations(void 0,n).update(t,s)}_setStyle(t,n,s,o){t.active=o;const u=this.getStyle(n,o);this._resolveAnimations(n,s,o).update(t,{options:!o&&this.getSharedOptions(u)||u})}removeHoverStyle(t,n,s){this._setStyle(t,s,"active",!1)}setHoverStyle(t,n,s){this._setStyle(t,s,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const n=this._data,s=this._cachedMeta.data;for(const[h,p,g]of this._syncList)this[h](p,g);this._syncList=[];const o=s.length,u=n.length,f=Math.min(u,o);f&&this.parse(0,f),u>o?this._insertElements(o,u-o,t):u<o&&this._removeElements(u,o-u)}_insertElements(t,n,s=!0){const o=this._cachedMeta,u=o.data,f=t+n;let h;const p=g=>{for(g.length+=n,h=g.length-1;h>=f;h--)g[h]=g[h-n]};for(p(u),h=t;h<f;++h)u[h]=new this.dataElementType;this._parsing&&p(o._parsed),this.parse(t,n),s&&this.updateElements(u,t,n,"reset")}updateElements(t,n,s,o){}_removeElements(t,n){const s=this._cachedMeta;if(this._parsing){const o=s._parsed.splice(t,n);s._stacked&&es(s,o)}s.data.splice(t,n)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[n,s,o]=t;this[n](s,o)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,n){n&&this._sync(["_removeElements",t,n]);const s=arguments.length-2;s&&this._sync(["_insertElements",t,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Ce(vs,"defaults",{}),Ce(vs,"datasetElementType",null),Ce(vs,"dataElementType",null);class Mo extends vs{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const n=this._cachedMeta,{dataset:s,data:o=[],_dataset:u}=n,f=this.chart._animationsDisabled;let{start:h,count:p}=$v(n,o,f);this._drawStart=h,this._drawCount=p,jv(n)&&(h=0,p=o.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!u._decimated,s.points=o;const g=this.resolveDatasetElementOptions(t);this.options.showLine||(g.borderWidth=0),g.segment=this.options.segment,this.updateElement(s,void 0,{animated:!f,options:g},t),this.updateElements(o,h,p,t)}updateElements(t,n,s,o){const u=o==="reset",{iScale:f,vScale:h,_stacked:p,_dataset:g}=this._cachedMeta,{sharedOptions:b,includeOptions:_}=this._getSharedOptions(n,o),T=f.axis,L=h.axis,{spanGaps:D,segment:O}=this.options,N=_s(D)?D:Number.POSITIVE_INFINITY,E=this.chart._animationsDisabled||u||o==="none",I=n+s,j=t.length;let K=n>0&&this.getParsed(n-1);for(let X=0;X<j;++X){const V=t[X],G=E?V:{};if(X<n||X>=I){G.skip=!0;continue}const ee=this.getParsed(X),de=vt(ee[L]),he=G[T]=f.getPixelForValue(ee[T],X),se=G[L]=u||de?h.getBasePixel():h.getPixelForValue(p?this.applyStack(h,ee,p):ee[L],X);G.skip=isNaN(he)||isNaN(se)||de,G.stop=X>0&&Math.abs(ee[T]-K[T])>N,O&&(G.parsed=ee,G.raw=g.data[X]),_&&(G.options=b||this.resolveDataElementOptions(X,V.active?"active":o)),E||this.updateElement(V,X,G,o),K=ee}}getMaxOverflow(){const t=this._cachedMeta,n=t.dataset,s=n.options&&n.options.borderWidth||0,o=t.data||[];if(!o.length)return s;const u=o[0].size(this.resolveDataElementOptions(0)),f=o[o.length-1].size(this.resolveDataElementOptions(o.length-1));return Math.max(s,u,f)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}Ce(Mo,"id","line"),Ce(Mo,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Ce(Mo,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function Di(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class zl{constructor(t){Ce(this,"options");this.options=t||{}}static override(t){Object.assign(zl.prototype,t)}init(){}formats(){return Di()}parse(){return Di()}format(){return Di()}add(){return Di()}diff(){return Di()}startOf(){return Di()}endOf(){return Di()}}var o0={_date:zl};function a0(i,t,n,s){const{controller:o,data:u,_sorted:f}=i,h=o._cachedMeta.iScale;if(h&&t===h.axis&&t!=="r"&&f&&u.length){const p=h._reversePixels?Fv:Ei;if(s){if(o._sharedOptions){const g=u[0],b=typeof g.getRange=="function"&&g.getRange(t);if(b){const _=p(u,t,n-b),T=p(u,t,n+b);return{lo:_.lo,hi:T.hi}}}}else return p(u,t,n)}return{lo:0,hi:u.length-1}}function Ms(i,t,n,s,o){const u=i.getSortedVisibleDatasetMetas(),f=n[t];for(let h=0,p=u.length;h<p;++h){const{index:g,data:b}=u[h],{lo:_,hi:T}=a0(u[h],t,f,o);for(let L=_;L<=T;++L){const D=b[L];D.skip||s(D,g,L)}}}function l0(i){const t=i.indexOf("x")!==-1,n=i.indexOf("y")!==-1;return function(s,o){const u=t?Math.abs(s.x-o.x):0,f=n?Math.abs(s.y-o.y):0;return Math.sqrt(Math.pow(u,2)+Math.pow(f,2))}}function Ya(i,t,n,s,o){const u=[];return!o&&!i.isPointInArea(t)||Ms(i,n,t,function(h,p,g){!o&&!ws(h,i.chartArea,0)||h.inRange(t.x,t.y,s)&&u.push({element:h,datasetIndex:p,index:g})},!0),u}function c0(i,t,n,s){let o=[];function u(f,h,p){const{startAngle:g,endAngle:b}=f.getProps(["startAngle","endAngle"],s),{angle:_}=Iv(f,{x:t.x,y:t.y});od(_,g,b)&&o.push({element:f,datasetIndex:h,index:p})}return Ms(i,n,t,u),o}function u0(i,t,n,s,o,u){let f=[];const h=l0(n);let p=Number.POSITIVE_INFINITY;function g(b,_,T){const L=b.inRange(t.x,t.y,o);if(s&&!L)return;const D=b.getCenterPoint(o);if(!(!!u||i.isPointInArea(D))&&!L)return;const N=h(t,D);N<p?(f=[{element:b,datasetIndex:_,index:T}],p=N):N===p&&f.push({element:b,datasetIndex:_,index:T})}return Ms(i,n,t,g),f}function Za(i,t,n,s,o,u){return!u&&!i.isPointInArea(t)?[]:n==="r"&&!s?c0(i,t,n,o):u0(i,t,n,s,o,u)}function jf(i,t,n,s,o){const u=[],f=n==="x"?"inXRange":"inYRange";let h=!1;return Ms(i,n,t,(p,g,b)=>{p[f]&&p[f](t[n],o)&&(u.push({element:p,datasetIndex:g,index:b}),h=h||p.inRange(t.x,t.y,o))}),s&&!h?[]:u}var f0={evaluateInteractionItems:Ms,modes:{index(i,t,n,s){const o=Pi(t,i),u=n.axis||"x",f=n.includeInvisible||!1,h=n.intersect?Ya(i,o,u,s,f):Za(i,o,u,!1,s,f),p=[];return h.length?(i.getSortedVisibleDatasetMetas().forEach(g=>{const b=h[0].index,_=g.data[b];_&&!_.skip&&p.push({element:_,datasetIndex:g.index,index:b})}),p):[]},dataset(i,t,n,s){const o=Pi(t,i),u=n.axis||"xy",f=n.includeInvisible||!1;let h=n.intersect?Ya(i,o,u,s,f):Za(i,o,u,!1,s,f);if(h.length>0){const p=h[0].datasetIndex,g=i.getDatasetMeta(p).data;h=[];for(let b=0;b<g.length;++b)h.push({element:g[b],datasetIndex:p,index:b})}return h},point(i,t,n,s){const o=Pi(t,i),u=n.axis||"xy",f=n.includeInvisible||!1;return Ya(i,o,u,s,f)},nearest(i,t,n,s){const o=Pi(t,i),u=n.axis||"xy",f=n.includeInvisible||!1;return Za(i,o,u,n.intersect,s,f)},x(i,t,n,s){const o=Pi(t,i);return jf(i,o,"x",n.intersect,s)},y(i,t,n,s){const o=Pi(t,i);return jf(i,o,"y",n.intersect,s)}}};const Cd=["left","top","right","bottom"];function ts(i,t){return i.filter(n=>n.pos===t)}function Vf(i,t){return i.filter(n=>Cd.indexOf(n.pos)===-1&&n.box.axis===t)}function ns(i,t){return i.sort((n,s)=>{const o=t?s:n,u=t?n:s;return o.weight===u.weight?o.index-u.index:o.weight-u.weight})}function h0(i){const t=[];let n,s,o,u,f,h;for(n=0,s=(i||[]).length;n<s;++n)o=i[n],{position:u,options:{stack:f,stackWeight:h=1}}=o,t.push({index:n,box:o,pos:u,horizontal:o.isHorizontal(),weight:o.weight,stack:f&&u+f,stackWeight:h});return t}function d0(i){const t={};for(const n of i){const{stack:s,pos:o,stackWeight:u}=n;if(!s||!Cd.includes(o))continue;const f=t[s]||(t[s]={count:0,placed:0,weight:0,size:0});f.count++,f.weight+=u}return t}function p0(i,t){const n=d0(i),{vBoxMaxWidth:s,hBoxMaxHeight:o}=t;let u,f,h;for(u=0,f=i.length;u<f;++u){h=i[u];const{fullSize:p}=h.box,g=n[h.stack],b=g&&h.stackWeight/g.weight;h.horizontal?(h.width=b?b*s:p&&t.availableWidth,h.height=o):(h.width=s,h.height=b?b*o:p&&t.availableHeight)}return n}function g0(i){const t=h0(i),n=ns(t.filter(g=>g.box.fullSize),!0),s=ns(ts(t,"left"),!0),o=ns(ts(t,"right")),u=ns(ts(t,"top"),!0),f=ns(ts(t,"bottom")),h=Vf(t,"x"),p=Vf(t,"y");return{fullSize:n,leftAndTop:s.concat(u),rightAndBottom:o.concat(p).concat(f).concat(h),chartArea:ts(t,"chartArea"),vertical:s.concat(o).concat(p),horizontal:u.concat(f).concat(h)}}function Kf(i,t,n,s){return Math.max(i[n],t[n])+Math.max(i[s],t[s])}function Td(i,t){i.top=Math.max(i.top,t.top),i.left=Math.max(i.left,t.left),i.bottom=Math.max(i.bottom,t.bottom),i.right=Math.max(i.right,t.right)}function m0(i,t,n,s){const{pos:o,box:u}=n,f=i.maxPadding;if(!tt(o)){n.size&&(i[o]-=n.size);const _=s[n.stack]||{size:0,count:1};_.size=Math.max(_.size,n.horizontal?u.height:u.width),n.size=_.size/_.count,i[o]+=n.size}u.getPadding&&Td(f,u.getPadding());const h=Math.max(0,t.outerWidth-Kf(f,i,"left","right")),p=Math.max(0,t.outerHeight-Kf(f,i,"top","bottom")),g=h!==i.w,b=p!==i.h;return i.w=h,i.h=p,n.horizontal?{same:g,other:b}:{same:b,other:g}}function v0(i){const t=i.maxPadding;function n(s){const o=Math.max(t[s]-i[s],0);return i[s]+=o,o}i.y+=n("top"),i.x+=n("left"),n("right"),n("bottom")}function y0(i,t){const n=t.maxPadding;function s(o){const u={left:0,top:0,right:0,bottom:0};return o.forEach(f=>{u[f]=Math.max(t[f],n[f])}),u}return s(i?["left","right"]:["top","bottom"])}function ls(i,t,n,s){const o=[];let u,f,h,p,g,b;for(u=0,f=i.length,g=0;u<f;++u){h=i[u],p=h.box,p.update(h.width||t.w,h.height||t.h,y0(h.horizontal,t));const{same:_,other:T}=m0(t,n,h,s);g|=_&&o.length,b=b||T,p.fullSize||o.push(h)}return g&&ls(o,t,n,s)||b}function bo(i,t,n,s,o){i.top=n,i.left=t,i.right=t+s,i.bottom=n+o,i.width=s,i.height=o}function Xf(i,t,n,s){const o=n.padding;let{x:u,y:f}=t;for(const h of i){const p=h.box,g=s[h.stack]||{count:1,placed:0,weight:1},b=h.stackWeight/g.weight||1;if(h.horizontal){const _=t.w*b,T=g.size||p.height;Ho(g.start)&&(f=g.start),p.fullSize?bo(p,o.left,f,n.outerWidth-o.right-o.left,T):bo(p,t.left+g.placed,f,_,T),g.start=f,g.placed+=_,f=p.bottom}else{const _=t.h*b,T=g.size||p.width;Ho(g.start)&&(u=g.start),p.fullSize?bo(p,u,o.top,T,n.outerHeight-o.bottom-o.top):bo(p,u,t.top+g.placed,T,_),g.start=u,g.placed+=_,u=p.right}}t.x=u,t.y=f}var pn={addBox(i,t){i.boxes||(i.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(n){t.draw(n)}}]},i.boxes.push(t)},removeBox(i,t){const n=i.boxes?i.boxes.indexOf(t):-1;n!==-1&&i.boxes.splice(n,1)},configure(i,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(i,t,n,s){if(!i)return;const o=mn(i.options.layout.padding),u=Math.max(t-o.width,0),f=Math.max(n-o.height,0),h=g0(i.boxes),p=h.vertical,g=h.horizontal;rt(i.boxes,O=>{typeof O.beforeLayout=="function"&&O.beforeLayout()});const b=p.reduce((O,N)=>N.box.options&&N.box.options.display===!1?O:O+1,0)||1,_=Object.freeze({outerWidth:t,outerHeight:n,padding:o,availableWidth:u,availableHeight:f,vBoxMaxWidth:u/2/b,hBoxMaxHeight:f/2}),T=Object.assign({},o);Td(T,mn(s));const L=Object.assign({maxPadding:T,w:u,h:f,x:o.left,y:o.top},o),D=p0(p.concat(g),_);ls(h.fullSize,L,_,D),ls(p,L,_,D),ls(g,L,_,D)&&ls(p,L,_,D),v0(L),Xf(h.leftAndTop,L,_,D),L.x+=L.w,L.y+=L.h,Xf(h.rightAndBottom,L,_,D),i.chartArea={left:L.left,top:L.top,right:L.left+L.w,bottom:L.top+L.h,height:L.h,width:L.w},rt(h.chartArea,O=>{const N=O.box;Object.assign(N,i.chartArea),N.update(L.w,L.h,{left:0,top:0,right:0,bottom:0})})}};class Ld{acquireContext(t,n){}releaseContext(t){return!1}addEventListener(t,n,s){}removeEventListener(t,n,s){}getDevicePixelRatio(){return 1}getMaximumSize(t,n,s,o){return n=Math.max(0,n||t.width),s=s||t.height,{width:n,height:Math.max(0,o?Math.floor(n/o):s)}}isAttached(t){return!0}updateConfig(t){}}class b0 extends Ld{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Do="$chartjs",x0={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},qf=i=>i===null||i==="";function _0(i,t){const n=i.style,s=i.getAttribute("height"),o=i.getAttribute("width");if(i[Do]={initial:{height:s,width:o,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",qf(o)){const u=If(i,"width");u!==void 0&&(i.width=u)}if(qf(s))if(i.style.height==="")i.height=i.width/(t||2);else{const u=If(i,"height");u!==void 0&&(i.height=u)}return i}const Nd=Ay?{passive:!0}:!1;function w0(i,t,n){i&&i.addEventListener(t,n,Nd)}function k0(i,t,n){i&&i.canvas&&i.canvas.removeEventListener(t,n,Nd)}function S0(i,t){const n=x0[i.type]||i.type,{x:s,y:o}=Pi(i,t);return{type:n,chart:t,native:i,x:s!==void 0?s:null,y:o!==void 0?o:null}}function Bo(i,t){for(const n of i)if(n===t||n.contains(t))return!0}function C0(i,t,n){const s=i.canvas,o=new MutationObserver(u=>{let f=!1;for(const h of u)f=f||Bo(h.addedNodes,s),f=f&&!Bo(h.removedNodes,s);f&&n()});return o.observe(document,{childList:!0,subtree:!0}),o}function T0(i,t,n){const s=i.canvas,o=new MutationObserver(u=>{let f=!1;for(const h of u)f=f||Bo(h.removedNodes,s),f=f&&!Bo(h.addedNodes,s);f&&n()});return o.observe(document,{childList:!0,subtree:!0}),o}const Ss=new Map;let Gf=0;function Md(){const i=window.devicePixelRatio;i!==Gf&&(Gf=i,Ss.forEach((t,n)=>{n.currentDevicePixelRatio!==i&&t()}))}function L0(i,t){Ss.size||window.addEventListener("resize",Md),Ss.set(i,t)}function N0(i){Ss.delete(i),Ss.size||window.removeEventListener("resize",Md)}function M0(i,t,n){const s=i.canvas,o=s&&Wl(s);if(!o)return;const u=cd((h,p)=>{const g=o.clientWidth;n(h,p),g<o.clientWidth&&n()},window),f=new ResizeObserver(h=>{const p=h[0],g=p.contentRect.width,b=p.contentRect.height;g===0&&b===0||u(g,b)});return f.observe(o),L0(i,u),f}function Ja(i,t,n){n&&n.disconnect(),t==="resize"&&N0(i)}function D0(i,t,n){const s=i.canvas,o=cd(u=>{i.ctx!==null&&n(S0(u,i))},i);return w0(s,t,o),o}class P0 extends Ld{acquireContext(t,n){const s=t&&t.getContext&&t.getContext("2d");return s&&s.canvas===t?(_0(t,n),s):null}releaseContext(t){const n=t.canvas;if(!n[Do])return!1;const s=n[Do].initial;["height","width"].forEach(u=>{const f=s[u];vt(f)?n.removeAttribute(u):n.setAttribute(u,f)});const o=s.style||{};return Object.keys(o).forEach(u=>{n.style[u]=o[u]}),n.width=n.width,delete n[Do],!0}addEventListener(t,n,s){this.removeEventListener(t,n);const o=t.$proxies||(t.$proxies={}),f={attach:C0,detach:T0,resize:M0}[n]||D0;o[n]=f(t,n,s)}removeEventListener(t,n){const s=t.$proxies||(t.$proxies={}),o=s[n];if(!o)return;({attach:Ja,detach:Ja,resize:Ja}[n]||k0)(t,n,o),s[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,n,s,o){return Oy(t,n,s,o)}isAttached(t){const n=t&&Wl(t);return!!(n&&n.isConnected)}}function O0(i){return!Hl()||typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas?b0:P0}class Jn{constructor(){Ce(this,"x");Ce(this,"y");Ce(this,"active",!1);Ce(this,"options");Ce(this,"$animations")}tooltipPosition(t){const{x:n,y:s}=this.getProps(["x","y"],t);return{x:n,y:s}}hasValue(){return _s(this.x)&&_s(this.y)}getProps(t,n){const s=this.$animations;if(!n||!s)return this;const o={};return t.forEach(u=>{o[u]=s[u]&&s[u].active()?s[u]._to:this[u]}),o}}Ce(Jn,"defaults",{}),Ce(Jn,"defaultRoutes");function A0(i,t){const n=i.options.ticks,s=I0(i),o=Math.min(n.maxTicksLimit||s,s),u=n.major.enabled?R0(t):[],f=u.length,h=u[0],p=u[f-1],g=[];if(f>o)return F0(t,g,u,f/o),g;const b=E0(u,t,o);if(f>0){let _,T;const L=f>1?Math.round((p-h)/(f-1)):null;for(xo(t,g,b,vt(L)?0:h-L,h),_=0,T=f-1;_<T;_++)xo(t,g,b,u[_],u[_+1]);return xo(t,g,b,p,vt(L)?t.length:p+L),g}return xo(t,g,b),g}function I0(i){const t=i.options.offset,n=i._tickSize(),s=i._length/n+(t?0:1),o=i._maxLength/n;return Math.floor(Math.min(s,o))}function E0(i,t,n){const s=H0(i),o=t.length/n;if(!s)return Math.max(o,1);const u=Dv(s);for(let f=0,h=u.length-1;f<h;f++){const p=u[f];if(p>o)return p}return Math.max(o,1)}function R0(i){const t=[];let n,s;for(n=0,s=i.length;n<s;n++)i[n].major&&t.push(n);return t}function F0(i,t,n,s){let o=0,u=n[0],f;for(s=Math.ceil(s),f=0;f<i.length;f++)f===u&&(t.push(i[f]),o++,u=n[o*s])}function xo(i,t,n,s,o){const u=Ye(s,0),f=Math.min(Ye(o,i.length),i.length);let h=0,p,g,b;for(n=Math.ceil(n),o&&(p=o-s,n=p/Math.floor(p/n)),b=u;b<0;)h++,b=Math.round(u+h*n);for(g=Math.max(u,0);g<f;g++)g===b&&(t.push(i[g]),h++,b=Math.round(u+h*n))}function H0(i){const t=i.length;let n,s;if(t<2)return!1;for(s=i[0],n=1;n<t;++n)if(i[n]-i[n-1]!==s)return!1;return s}const W0=i=>i==="left"?"right":i==="right"?"left":i,Yf=(i,t,n)=>t==="top"||t==="left"?i[t]+n:i[t]-n,Zf=(i,t)=>Math.min(t||i,i);function Jf(i,t){const n=[],s=i.length/t,o=i.length;let u=0;for(;u<o;u+=s)n.push(i[Math.floor(u)]);return n}function z0(i,t,n){const s=i.ticks.length,o=Math.min(t,s-1),u=i._startPixel,f=i._endPixel,h=1e-6;let p=i.getPixelForTick(o),g;if(!(n&&(s===1?g=Math.max(p-u,f-p):t===0?g=(i.getPixelForTick(1)-p)/2:g=(p-i.getPixelForTick(o-1))/2,p+=o<t?g:-g,p<u-h||p>f+h)))return p}function B0(i,t){rt(i,n=>{const s=n.gc,o=s.length/2;let u;if(o>t){for(u=0;u<o;++u)delete n.data[s[u]];s.splice(0,o)}})}function is(i){return i.drawTicks?i.tickLength:0}function Qf(i,t){if(!i.display)return 0;const n=Ut(i.font,t),s=mn(i.padding);return(Dt(i.text)?i.text.length:1)*n.lineHeight+s.height}function U0(i,t){return Wi(i,{scale:t,type:"scale"})}function $0(i,t,n){return Wi(i,{tick:n,index:t,type:"tick"})}function j0(i,t,n){let s=Pl(i);return(n&&t!=="right"||!n&&t==="right")&&(s=W0(s)),s}function V0(i,t,n,s){const{top:o,left:u,bottom:f,right:h,chart:p}=i,{chartArea:g,scales:b}=p;let _=0,T,L,D;const O=f-o,N=h-u;if(i.isHorizontal()){if(L=Bt(s,u,h),tt(n)){const E=Object.keys(n)[0],I=n[E];D=b[E].getPixelForValue(I)+O-t}else n==="center"?D=(g.bottom+g.top)/2+O-t:D=Yf(i,n,t);T=h-u}else{if(tt(n)){const E=Object.keys(n)[0],I=n[E];L=b[E].getPixelForValue(I)-N+t}else n==="center"?L=(g.left+g.right)/2-N+t:L=Yf(i,n,t);D=Bt(s,f,o),_=n==="left"?-Sn:Sn}return{titleX:L,titleY:D,maxWidth:T,rotation:_}}class yr extends Jn{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,n){return t}getUserBounds(){let{_userMin:t,_userMax:n,_suggestedMin:s,_suggestedMax:o}=this;return t=On(t,Number.POSITIVE_INFINITY),n=On(n,Number.NEGATIVE_INFINITY),s=On(s,Number.POSITIVE_INFINITY),o=On(o,Number.NEGATIVE_INFINITY),{min:On(t,s),max:On(n,o),minDefined:gn(t),maxDefined:gn(n)}}getMinMax(t){let{min:n,max:s,minDefined:o,maxDefined:u}=this.getUserBounds(),f;if(o&&u)return{min:n,max:s};const h=this.getMatchingVisibleMetas();for(let p=0,g=h.length;p<g;++p)f=h[p].controller.getMinMax(this,t),o||(n=Math.min(n,f.min)),u||(s=Math.max(s,f.max));return n=u&&n>s?s:n,s=o&&n>s?n:s,{min:On(n,On(s,n)),max:On(s,On(n,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ct(this.options.beforeUpdate,[this])}update(t,n,s){const{beginAtZero:o,grace:u,ticks:f}=this.options,h=f.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=n,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=uy(this,u,o),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const p=h<this.ticks.length;this._convertTicksToLabels(p?Jf(this.ticks,h):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),f.display&&(f.autoSkip||f.source==="auto")&&(this.ticks=A0(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),p&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,n,s;this.isHorizontal()?(n=this.left,s=this.right):(n=this.top,s=this.bottom,t=!t),this._startPixel=n,this._endPixel=s,this._reversePixels=t,this._length=s-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ct(this.options.afterUpdate,[this])}beforeSetDimensions(){ct(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ct(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),ct(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ct(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const n=this.options.ticks;let s,o,u;for(s=0,o=t.length;s<o;s++)u=t[s],u.label=ct(n.callback,[u.value,s,t],this)}afterTickToLabelConversion(){ct(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ct(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,n=t.ticks,s=Zf(this.ticks.length,t.ticks.maxTicksLimit),o=n.minRotation||0,u=n.maxRotation;let f=o,h,p,g;if(!this._isVisible()||!n.display||o>=u||s<=1||!this.isHorizontal()){this.labelRotation=o;return}const b=this._getLabelSizes(),_=b.widest.width,T=b.highest.height,L=dn(this.chart.width-_,0,this.maxWidth);h=t.offset?this.maxWidth/s:L/(s-1),_+6>h&&(h=L/(s-(t.offset?.5:1)),p=this.maxHeight-is(t.grid)-n.padding-Qf(t.title,this.chart.options.font),g=Math.sqrt(_*_+T*T),f=Av(Math.min(Math.asin(dn((b.highest.height+6)/h,-1,1)),Math.asin(dn(p/g,-1,1))-Math.asin(dn(T/g,-1,1)))),f=Math.max(o,Math.min(u,f))),this.labelRotation=f}afterCalculateLabelRotation(){ct(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ct(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:n,options:{ticks:s,title:o,grid:u}}=this,f=this._isVisible(),h=this.isHorizontal();if(f){const p=Qf(o,n.options.font);if(h?(t.width=this.maxWidth,t.height=is(u)+p):(t.height=this.maxHeight,t.width=is(u)+p),s.display&&this.ticks.length){const{first:g,last:b,widest:_,highest:T}=this._getLabelSizes(),L=s.padding*2,D=Ii(this.labelRotation),O=Math.cos(D),N=Math.sin(D);if(h){const E=s.mirror?0:N*_.width+O*T.height;t.height=Math.min(this.maxHeight,t.height+E+L)}else{const E=s.mirror?0:O*_.width+N*T.height;t.width=Math.min(this.maxWidth,t.width+E+L)}this._calculatePadding(g,b,N,O)}}this._handleMargins(),h?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,n,s,o){const{ticks:{align:u,padding:f},position:h}=this.options,p=this.labelRotation!==0,g=h!=="top"&&this.axis==="x";if(this.isHorizontal()){const b=this.getPixelForTick(0)-this.left,_=this.right-this.getPixelForTick(this.ticks.length-1);let T=0,L=0;p?g?(T=o*t.width,L=s*n.height):(T=s*t.height,L=o*n.width):u==="start"?L=n.width:u==="end"?T=t.width:u!=="inner"&&(T=t.width/2,L=n.width/2),this.paddingLeft=Math.max((T-b+f)*this.width/(this.width-b),0),this.paddingRight=Math.max((L-_+f)*this.width/(this.width-_),0)}else{let b=n.height/2,_=t.height/2;u==="start"?(b=0,_=t.height):u==="end"&&(b=n.height,_=0),this.paddingTop=b+f,this.paddingBottom=_+f}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ct(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:n}=this.options;return n==="top"||n==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let n,s;for(n=0,s=t.length;n<s;n++)vt(t[n].label)&&(t.splice(n,1),s--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const n=this.options.ticks.sampleSize;let s=this.ticks;n<s.length&&(s=Jf(s,n)),this._labelSizes=t=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,n,s){const{ctx:o,_longestTextCache:u}=this,f=[],h=[],p=Math.floor(n/Zf(n,s));let g=0,b=0,_,T,L,D,O,N,E,I,j,K,X;for(_=0;_<n;_+=p){if(D=t[_].label,O=this._resolveTickFontOptions(_),o.font=N=O.string,E=u[N]=u[N]||{data:{},gc:[]},I=O.lineHeight,j=K=0,!vt(D)&&!Dt(D))j=Mf(o,E.data,E.gc,j,D),K=I;else if(Dt(D))for(T=0,L=D.length;T<L;++T)X=D[T],!vt(X)&&!Dt(X)&&(j=Mf(o,E.data,E.gc,j,X),K+=I);f.push(j),h.push(K),g=Math.max(j,g),b=Math.max(K,b)}B0(u,n);const V=f.indexOf(g),G=h.indexOf(b),ee=de=>({width:f[de]||0,height:h[de]||0});return{first:ee(0),last:ee(n-1),widest:ee(V),highest:ee(G),widths:f,heights:h}}getLabelForValue(t){return t}getPixelForValue(t,n){return NaN}getValueForPixel(t){}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const n=this._startPixel+t*this._length;return Rv(this._alignToPixels?Mi(this.chart,n,0):n)}getDecimalForPixel(t){const n=(t-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:n}=this;return t<0&&n<0?n:t>0&&n>0?t:0}getContext(t){const n=this.ticks||[];if(t>=0&&t<n.length){const s=n[t];return s.$context||(s.$context=$0(this.getContext(),t,s))}return this.$context||(this.$context=U0(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,n=Ii(this.labelRotation),s=Math.abs(Math.cos(n)),o=Math.abs(Math.sin(n)),u=this._getLabelSizes(),f=t.autoSkipPadding||0,h=u?u.widest.width+f:0,p=u?u.highest.height+f:0;return this.isHorizontal()?p*s>h*o?h/s:p/o:p*o<h*s?p/s:h/o}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const n=this.axis,s=this.chart,o=this.options,{grid:u,position:f,border:h}=o,p=u.offset,g=this.isHorizontal(),_=this.ticks.length+(p?1:0),T=is(u),L=[],D=h.setContext(this.getContext()),O=D.display?D.width:0,N=O/2,E=function(me){return Mi(s,me,O)};let I,j,K,X,V,G,ee,de,he,se,le,R;if(f==="top")I=E(this.bottom),G=this.bottom-T,de=I-N,se=E(t.top)+N,R=t.bottom;else if(f==="bottom")I=E(this.top),se=t.top,R=E(t.bottom)-N,G=I+N,de=this.top+T;else if(f==="left")I=E(this.right),V=this.right-T,ee=I-N,he=E(t.left)+N,le=t.right;else if(f==="right")I=E(this.left),he=t.left,le=E(t.right)-N,V=I+N,ee=this.left+T;else if(n==="x"){if(f==="center")I=E((t.top+t.bottom)/2+.5);else if(tt(f)){const me=Object.keys(f)[0],Me=f[me];I=E(this.chart.scales[me].getPixelForValue(Me))}se=t.top,R=t.bottom,G=I+N,de=G+T}else if(n==="y"){if(f==="center")I=E((t.left+t.right)/2);else if(tt(f)){const me=Object.keys(f)[0],Me=f[me];I=E(this.chart.scales[me].getPixelForValue(Me))}V=I-N,ee=V-T,he=t.left,le=t.right}const F=Ye(o.ticks.maxTicksLimit,_),S=Math.max(1,Math.ceil(_/F));for(j=0;j<_;j+=S){const me=this.getContext(j),Me=u.setContext(me),$e=h.setContext(me),qe=Me.lineWidth,Ve=Me.color,we=$e.dash||[],ke=$e.dashOffset,Te=Me.tickWidth,Ae=Me.tickColor,U=Me.tickBorderDash||[],Z=Me.tickBorderDashOffset;K=z0(this,j,p),K!==void 0&&(X=Mi(s,K,qe),g?V=ee=he=le=X:G=de=se=R=X,L.push({tx1:V,ty1:G,tx2:ee,ty2:de,x1:he,y1:se,x2:le,y2:R,width:qe,color:Ve,borderDash:we,borderDashOffset:ke,tickWidth:Te,tickColor:Ae,tickBorderDash:U,tickBorderDashOffset:Z}))}return this._ticksLength=_,this._borderValue=I,L}_computeLabelItems(t){const n=this.axis,s=this.options,{position:o,ticks:u}=s,f=this.isHorizontal(),h=this.ticks,{align:p,crossAlign:g,padding:b,mirror:_}=u,T=is(s.grid),L=T+b,D=_?-b:L,O=-Ii(this.labelRotation),N=[];let E,I,j,K,X,V,G,ee,de,he,se,le,R="middle";if(o==="top")V=this.bottom-D,G=this._getXAxisLabelAlignment();else if(o==="bottom")V=this.top+D,G=this._getXAxisLabelAlignment();else if(o==="left"){const S=this._getYAxisLabelAlignment(T);G=S.textAlign,X=S.x}else if(o==="right"){const S=this._getYAxisLabelAlignment(T);G=S.textAlign,X=S.x}else if(n==="x"){if(o==="center")V=(t.top+t.bottom)/2+L;else if(tt(o)){const S=Object.keys(o)[0],me=o[S];V=this.chart.scales[S].getPixelForValue(me)+L}G=this._getXAxisLabelAlignment()}else if(n==="y"){if(o==="center")X=(t.left+t.right)/2-L;else if(tt(o)){const S=Object.keys(o)[0],me=o[S];X=this.chart.scales[S].getPixelForValue(me)}G=this._getYAxisLabelAlignment(T).textAlign}n==="y"&&(p==="start"?R="top":p==="end"&&(R="bottom"));const F=this._getLabelSizes();for(E=0,I=h.length;E<I;++E){j=h[E],K=j.label;const S=u.setContext(this.getContext(E));ee=this.getPixelForTick(E)+u.labelOffset,de=this._resolveTickFontOptions(E),he=de.lineHeight,se=Dt(K)?K.length:1;const me=se/2,Me=S.color,$e=S.textStrokeColor,qe=S.textStrokeWidth;let Ve=G;f?(X=ee,G==="inner"&&(E===I-1?Ve=this.options.reverse?"left":"right":E===0?Ve=this.options.reverse?"right":"left":Ve="center"),o==="top"?g==="near"||O!==0?le=-se*he+he/2:g==="center"?le=-F.highest.height/2-me*he+he:le=-F.highest.height+he/2:g==="near"||O!==0?le=he/2:g==="center"?le=F.highest.height/2-me*he:le=F.highest.height-se*he,_&&(le*=-1),O!==0&&!S.showLabelBackdrop&&(X+=he/2*Math.sin(O))):(V=ee,le=(1-se)*he/2);let we;if(S.showLabelBackdrop){const ke=mn(S.backdropPadding),Te=F.heights[E],Ae=F.widths[E];let U=le-ke.top,Z=0-ke.left;switch(R){case"middle":U-=Te/2;break;case"bottom":U-=Te;break}switch(G){case"center":Z-=Ae/2;break;case"right":Z-=Ae;break;case"inner":E===I-1?Z-=Ae:E>0&&(Z-=Ae/2);break}we={left:Z,top:U,width:Ae+ke.width,height:Te+ke.height,color:S.backdropColor}}N.push({label:K,font:de,textOffset:le,options:{rotation:O,color:Me,strokeColor:$e,strokeWidth:qe,textAlign:Ve,textBaseline:R,translation:[X,V],backdrop:we}})}return N}_getXAxisLabelAlignment(){const{position:t,ticks:n}=this.options;if(-Ii(this.labelRotation))return t==="top"?"left":"right";let o="center";return n.align==="start"?o="left":n.align==="end"?o="right":n.align==="inner"&&(o="inner"),o}_getYAxisLabelAlignment(t){const{position:n,ticks:{crossAlign:s,mirror:o,padding:u}}=this.options,f=this._getLabelSizes(),h=t+u,p=f.widest.width;let g,b;return n==="left"?o?(b=this.right+u,s==="near"?g="left":s==="center"?(g="center",b+=p/2):(g="right",b+=p)):(b=this.right-h,s==="near"?g="right":s==="center"?(g="center",b-=p/2):(g="left",b=this.left)):n==="right"?o?(b=this.left+u,s==="near"?g="right":s==="center"?(g="center",b-=p/2):(g="left",b-=p)):(b=this.left+h,s==="near"?g="left":s==="center"?(g="center",b+=p/2):(g="right",b=this.right)):g="right",{textAlign:g,x:b}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:n},left:s,top:o,width:u,height:f}=this;n&&(t.save(),t.fillStyle=n,t.fillRect(s,o,u,f),t.restore())}getLineWidthForValue(t){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const o=this.ticks.findIndex(u=>u.value===t);return o>=0?n.setContext(this.getContext(o)).lineWidth:0}drawGrid(t){const n=this.options.grid,s=this.ctx,o=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let u,f;const h=(p,g,b)=>{!b.width||!b.color||(s.save(),s.lineWidth=b.width,s.strokeStyle=b.color,s.setLineDash(b.borderDash||[]),s.lineDashOffset=b.borderDashOffset,s.beginPath(),s.moveTo(p.x,p.y),s.lineTo(g.x,g.y),s.stroke(),s.restore())};if(n.display)for(u=0,f=o.length;u<f;++u){const p=o[u];n.drawOnChartArea&&h({x:p.x1,y:p.y1},{x:p.x2,y:p.y2},p),n.drawTicks&&h({x:p.tx1,y:p.ty1},{x:p.tx2,y:p.ty2},{color:p.tickColor,width:p.tickWidth,borderDash:p.tickBorderDash,borderDashOffset:p.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:n,options:{border:s,grid:o}}=this,u=s.setContext(this.getContext()),f=s.display?u.width:0;if(!f)return;const h=o.setContext(this.getContext(0)).lineWidth,p=this._borderValue;let g,b,_,T;this.isHorizontal()?(g=Mi(t,this.left,f)-f/2,b=Mi(t,this.right,h)+h/2,_=T=p):(_=Mi(t,this.top,f)-f/2,T=Mi(t,this.bottom,h)+h/2,g=b=p),n.save(),n.lineWidth=u.width,n.strokeStyle=u.color,n.beginPath(),n.moveTo(g,_),n.lineTo(b,T),n.stroke(),n.restore()}drawLabels(t){if(!this.options.ticks.display)return;const s=this.ctx,o=this._computeLabelArea();o&&Al(s,o);const u=this.getLabelItems(t);for(const f of u){const h=f.options,p=f.font,g=f.label,b=f.textOffset;ks(s,g,0,b,p,h)}o&&Il(s)}drawTitle(){const{ctx:t,options:{position:n,title:s,reverse:o}}=this;if(!s.display)return;const u=Ut(s.font),f=mn(s.padding),h=s.align;let p=u.lineHeight/2;n==="bottom"||n==="center"||tt(n)?(p+=f.bottom,Dt(s.text)&&(p+=u.lineHeight*(s.text.length-1))):p+=f.top;const{titleX:g,titleY:b,maxWidth:_,rotation:T}=V0(this,p,n,h);ks(t,s.text,0,0,u,{color:s.color,maxWidth:_,rotation:T,textAlign:j0(h,n,o),textBaseline:"middle",translation:[g,b]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,n=t.ticks&&t.ticks.z||0,s=Ye(t.grid&&t.grid.z,-1),o=Ye(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==yr.prototype.draw?[{z:n,draw:u=>{this.draw(u)}}]:[{z:s,draw:u=>{this.drawBackground(),this.drawGrid(u),this.drawTitle()}},{z:o,draw:()=>{this.drawBorder()}},{z:n,draw:u=>{this.drawLabels(u)}}]}getMatchingVisibleMetas(t){const n=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",o=[];let u,f;for(u=0,f=n.length;u<f;++u){const h=n[u];h[s]===this.id&&(!t||h.type===t)&&o.push(h)}return o}_resolveTickFontOptions(t){const n=this.options.ticks.setContext(this.getContext(t));return Ut(n.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class _o{constructor(t,n,s){this.type=t,this.scope=n,this.override=s,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const n=Object.getPrototypeOf(t);let s;q0(n)&&(s=this.register(n));const o=this.items,u=t.id,f=this.scope+"."+u;if(!u)throw new Error("class does not have id: "+t);return u in o||(o[u]=t,K0(t,f,s),this.override&&_t.override(t.id,t.overrides)),f}get(t){return this.items[t]}unregister(t){const n=this.items,s=t.id,o=this.scope;s in n&&delete n[s],o&&s in _t[o]&&(delete _t[o][s],this.override&&delete Hi[s])}}function K0(i,t,n){const s=xs(Object.create(null),[n?_t.get(n):{},_t.get(t),i.defaults]);_t.set(t,s),i.defaultRoutes&&X0(t,i.defaultRoutes),i.descriptors&&_t.describe(t,i.descriptors)}function X0(i,t){Object.keys(t).forEach(n=>{const s=n.split("."),o=s.pop(),u=[i].concat(s).join("."),f=t[n].split("."),h=f.pop(),p=f.join(".");_t.route(u,o,p,h)})}function q0(i){return"id"in i&&"defaults"in i}class G0{constructor(){this.controllers=new _o(vs,"datasets",!0),this.elements=new _o(Jn,"elements"),this.plugins=new _o(Object,"plugins"),this.scales=new _o(yr,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,n,s){[...n].forEach(o=>{const u=s||this._getRegistryForType(o);s||u.isForType(o)||u===this.plugins&&o.id?this._exec(t,u,o):rt(o,f=>{const h=s||this._getRegistryForType(f);this._exec(t,h,f)})})}_exec(t,n,s){const o=Ml(t);ct(s["before"+o],[],s),n[t](s),ct(s["after"+o],[],s)}_getRegistryForType(t){for(let n=0;n<this._typedRegistries.length;n++){const s=this._typedRegistries[n];if(s.isForType(t))return s}return this.plugins}_get(t,n,s){const o=n.get(t);if(o===void 0)throw new Error('"'+t+'" is not a registered '+s+".");return o}}var In=new G0;class Y0{constructor(){this._init=[]}notify(t,n,s,o){n==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const u=o?this._descriptors(t).filter(o):this._descriptors(t),f=this._notify(u,t,n,s);return n==="afterDestroy"&&(this._notify(u,t,"stop"),this._notify(this._init,t,"uninstall")),f}_notify(t,n,s,o){o=o||{};for(const u of t){const f=u.plugin,h=f[s],p=[n,o,u.options];if(ct(h,p,f)===!1&&o.cancelable)return!1}return!0}invalidate(){vt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),n}_createDescriptors(t,n){const s=t&&t.config,o=Ye(s.options&&s.options.plugins,{}),u=Z0(s);return o===!1&&!n?[]:Q0(t,u,o,n)}_notifyStateChanges(t){const n=this._oldCache||[],s=this._cache,o=(u,f)=>u.filter(h=>!f.some(p=>h.plugin.id===p.plugin.id));this._notify(o(n,s),t,"stop"),this._notify(o(s,n),t,"start")}}function Z0(i){const t={},n=[],s=Object.keys(In.plugins.items);for(let u=0;u<s.length;u++)n.push(In.getPlugin(s[u]));const o=i.plugins||[];for(let u=0;u<o.length;u++){const f=o[u];n.indexOf(f)===-1&&(n.push(f),t[f.id]=!0)}return{plugins:n,localIds:t}}function J0(i,t){return!t&&i===!1?null:i===!0?{}:i}function Q0(i,{plugins:t,localIds:n},s,o){const u=[],f=i.getContext();for(const h of t){const p=h.id,g=J0(s[p],o);g!==null&&u.push({plugin:h,options:eb(i.config,{plugin:h,local:n[p]},g,f)})}return u}function eb(i,{plugin:t,local:n},s,o){const u=i.pluginScopeKeys(t),f=i.getOptionScopes(s,u);return n&&t.defaults&&f.push(t.defaults),i.createResolver(f,o,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function hl(i,t){const n=_t.datasets[i]||{};return((t.datasets||{})[i]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function tb(i,t){let n=i;return i==="_index_"?n=t:i==="_value_"&&(n=t==="x"?"y":"x"),n}function nb(i,t){return i===t?"_index_":"_value_"}function eh(i){if(i==="x"||i==="y"||i==="r")return i}function ib(i){if(i==="top"||i==="bottom")return"x";if(i==="left"||i==="right")return"y"}function dl(i,...t){if(eh(i))return i;for(const n of t){const s=n.axis||ib(n.position)||i.length>1&&eh(i[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${i}' axis. Please provide 'axis' or 'position' option.`)}function th(i,t,n){if(n[t+"AxisID"]===i)return{axis:t}}function rb(i,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(s=>s.xAxisID===i||s.yAxisID===i);if(n.length)return th(i,"x",n[0])||th(i,"y",n[0])}return{}}function sb(i,t){const n=Hi[i.type]||{scales:{}},s=t.scales||{},o=hl(i.type,t),u=Object.create(null);return Object.keys(s).forEach(f=>{const h=s[f];if(!tt(h))return console.error(`Invalid scale configuration for scale: ${f}`);if(h._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${f}`);const p=dl(f,h,rb(f,i),_t.scales[h.type]),g=nb(p,o),b=n.scales||{};u[f]=hs(Object.create(null),[{axis:p},h,b[p],b[g]])}),i.data.datasets.forEach(f=>{const h=f.type||i.type,p=f.indexAxis||hl(h,t),b=(Hi[h]||{}).scales||{};Object.keys(b).forEach(_=>{const T=tb(_,p),L=f[T+"AxisID"]||T;u[L]=u[L]||Object.create(null),hs(u[L],[{axis:T},s[L],b[_]])})}),Object.keys(u).forEach(f=>{const h=u[f];hs(h,[_t.scales[h.type],_t.scale])}),u}function Dd(i){const t=i.options||(i.options={});t.plugins=Ye(t.plugins,{}),t.scales=sb(i,t)}function Pd(i){return i=i||{},i.datasets=i.datasets||[],i.labels=i.labels||[],i}function ob(i){return i=i||{},i.data=Pd(i.data),Dd(i),i}const nh=new Map,Od=new Set;function wo(i,t){let n=nh.get(i);return n||(n=t(),nh.set(i,n),Od.add(n)),n}const rs=(i,t,n)=>{const s=Fo(t,n);s!==void 0&&i.add(s)};class ab{constructor(t){this._config=ob(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Pd(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),Dd(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return wo(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,n){return wo(`${t}.transition.${n}`,()=>[[`datasets.${t}.transitions.${n}`,`transitions.${n}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,n){return wo(`${t}-${n}`,()=>[[`datasets.${t}.elements.${n}`,`datasets.${t}`,`elements.${n}`,""]])}pluginScopeKeys(t){const n=t.id,s=this.type;return wo(`${s}-plugin-${n}`,()=>[[`plugins.${n}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,n){const s=this._scopeCache;let o=s.get(t);return(!o||n)&&(o=new Map,s.set(t,o)),o}getOptionScopes(t,n,s){const{options:o,type:u}=this,f=this._cachedScopes(t,s),h=f.get(n);if(h)return h;const p=new Set;n.forEach(b=>{t&&(p.add(t),b.forEach(_=>rs(p,t,_))),b.forEach(_=>rs(p,o,_)),b.forEach(_=>rs(p,Hi[u]||{},_)),b.forEach(_=>rs(p,_t,_)),b.forEach(_=>rs(p,cl,_))});const g=Array.from(p);return g.length===0&&g.push(Object.create(null)),Od.has(n)&&f.set(n,g),g}chartOptionScopes(){const{options:t,type:n}=this;return[t,Hi[n]||{},_t.datasets[n]||{},{type:n},_t,cl]}resolveNamedOptions(t,n,s,o=[""]){const u={$shared:!0},{resolver:f,subPrefixes:h}=ih(this._resolverCache,t,o);let p=f;if(cb(f,n)){u.$shared=!1,s=gi(s)?s():s;const g=this.createResolver(t,s,h);p=gr(f,s,g)}for(const g of n)u[g]=p[g];return u}createResolver(t,n,s=[""],o){const{resolver:u}=ih(this._resolverCache,t,s);return tt(n)?gr(u,n,void 0,o):u}}function ih(i,t,n){let s=i.get(t);s||(s=new Map,i.set(t,s));const o=n.join();let u=s.get(o);return u||(u={resolver:El(t,n),subPrefixes:n.filter(h=>!h.toLowerCase().includes("hover"))},s.set(o,u)),u}const lb=i=>tt(i)&&Object.getOwnPropertyNames(i).some(t=>gi(i[t]));function cb(i,t){const{isScriptable:n,isIndexable:s}=gd(i);for(const o of t){const u=n(o),f=s(o),h=(f||u)&&i[o];if(u&&(gi(h)||lb(h))||f&&Dt(h))return!0}return!1}var ub="4.4.7";const fb=["top","bottom","left","right","chartArea"];function rh(i,t){return i==="top"||i==="bottom"||fb.indexOf(i)===-1&&t==="x"}function sh(i,t){return function(n,s){return n[i]===s[i]?n[t]-s[t]:n[i]-s[i]}}function oh(i){const t=i.chart,n=t.options.animation;t.notifyPlugins("afterRender"),ct(n&&n.onComplete,[i],t)}function hb(i){const t=i.chart,n=t.options.animation;ct(n&&n.onProgress,[i],t)}function Ad(i){return Hl()&&typeof i=="string"?i=document.getElementById(i):i&&i.length&&(i=i[0]),i&&i.canvas&&(i=i.canvas),i}const Po={},ah=i=>{const t=Ad(i);return Object.values(Po).filter(n=>n.canvas===t).pop()};function db(i,t,n){const s=Object.keys(i);for(const o of s){const u=+o;if(u>=t){const f=i[o];delete i[o],(n>0||u>t)&&(i[u+n]=f)}}}function pb(i,t,n,s){return!n||i.type==="mouseout"?null:s?t:i}function ko(i,t,n){return i.options.clip?i[n]:t[n]}function gb(i,t){const{xScale:n,yScale:s}=i;return n&&s?{left:ko(n,t,"left"),right:ko(n,t,"right"),top:ko(s,t,"top"),bottom:ko(s,t,"bottom")}:t}var ui;let qo=(ui=class{static register(...t){In.add(...t),lh()}static unregister(...t){In.remove(...t),lh()}constructor(t,n){const s=this.config=new ab(n),o=Ad(t),u=ah(o);if(u)throw new Error("Canvas is already in use. Chart with ID '"+u.id+"' must be destroyed before the canvas with ID '"+u.canvas.id+"' can be reused.");const f=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||O0(o)),this.platform.updateConfig(s);const h=this.platform.acquireContext(o,f.aspectRatio),p=h&&h.canvas,g=p&&p.height,b=p&&p.width;if(this.id=_v(),this.ctx=h,this.canvas=p,this.width=b,this.height=g,this._options=f,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Y0,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Bv(_=>this.update(_),f.resizeDelay||0),this._dataChanges=[],Po[this.id]=this,!h||!p){console.error("Failed to create chart: can't acquire context from the given item");return}Kn.listen(this,"complete",oh),Kn.listen(this,"progress",hb),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:n},width:s,height:o,_aspectRatio:u}=this;return vt(t)?n&&u?u:o?s/o:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return In}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Af(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Df(this.canvas,this.ctx),this}stop(){return Kn.stop(this),this}resize(t,n){Kn.running(this)?this._resizeBeforeDraw={width:t,height:n}:this._resize(t,n)}_resize(t,n){const s=this.options,o=this.canvas,u=s.maintainAspectRatio&&this.aspectRatio,f=this.platform.getMaximumSize(o,t,n,u),h=s.devicePixelRatio||this.platform.getDevicePixelRatio(),p=this.width?"resize":"attach";this.width=f.width,this.height=f.height,this._aspectRatio=this.aspectRatio,Af(this,h,!0)&&(this.notifyPlugins("resize",{size:f}),ct(s.onResize,[this,f],this),this.attached&&this._doResize(p)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};rt(n,(s,o)=>{s.id=o})}buildOrUpdateScales(){const t=this.options,n=t.scales,s=this.scales,o=Object.keys(s).reduce((f,h)=>(f[h]=!1,f),{});let u=[];n&&(u=u.concat(Object.keys(n).map(f=>{const h=n[f],p=dl(f,h),g=p==="r",b=p==="x";return{options:h,dposition:g?"chartArea":b?"bottom":"left",dtype:g?"radialLinear":b?"category":"linear"}}))),rt(u,f=>{const h=f.options,p=h.id,g=dl(p,h),b=Ye(h.type,f.dtype);(h.position===void 0||rh(h.position,g)!==rh(f.dposition))&&(h.position=f.dposition),o[p]=!0;let _=null;if(p in s&&s[p].type===b)_=s[p];else{const T=In.getScale(b);_=new T({id:p,type:b,ctx:this.ctx,chart:this}),s[_.id]=_}_.init(h,t)}),rt(o,(f,h)=>{f||delete s[h]}),rt(s,f=>{pn.configure(this,f,f.options),pn.addBox(this,f)})}_updateMetasets(){const t=this._metasets,n=this.data.datasets.length,s=t.length;if(t.sort((o,u)=>o.index-u.index),s>n){for(let o=n;o<s;++o)this._destroyDatasetMeta(o);t.splice(n,s-n)}this._sortedMetasets=t.slice(0).sort(sh("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:n}}=this;t.length>n.length&&delete this._stacks,t.forEach((s,o)=>{n.filter(u=>u===s._dataset).length===0&&this._destroyDatasetMeta(o)})}buildOrUpdateControllers(){const t=[],n=this.data.datasets;let s,o;for(this._removeUnreferencedMetasets(),s=0,o=n.length;s<o;s++){const u=n[s];let f=this.getDatasetMeta(s);const h=u.type||this.config.type;if(f.type&&f.type!==h&&(this._destroyDatasetMeta(s),f=this.getDatasetMeta(s)),f.type=h,f.indexAxis=u.indexAxis||hl(h,this.options),f.order=u.order||0,f.index=s,f.label=""+u.label,f.visible=this.isDatasetVisible(s),f.controller)f.controller.updateIndex(s),f.controller.linkScales();else{const p=In.getController(h),{datasetElementType:g,dataElementType:b}=_t.datasets[h];Object.assign(p,{dataElementType:In.getElement(b),datasetElementType:g&&In.getElement(g)}),f.controller=new p(this,s),t.push(f.controller)}}return this._updateMetasets(),t}_resetElements(){rt(this.data.datasets,(t,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const n=this.config;n.update();const s=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),o=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const u=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let f=0;for(let g=0,b=this.data.datasets.length;g<b;g++){const{controller:_}=this.getDatasetMeta(g),T=!o&&u.indexOf(_)===-1;_.buildOrUpdateElements(T),f=Math.max(+_.getMaxOverflow(),f)}f=this._minPadding=s.layout.autoPadding?f:0,this._updateLayout(f),o||rt(u,g=>{g.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(sh("z","_idx"));const{_active:h,_lastEvent:p}=this;p?this._eventHandler(p,!0):h.length&&this._updateHoverStyles(h,h,!0),this.render()}_updateScales(){rt(this.scales,t=>{pn.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,n=new Set(Object.keys(this._listeners)),s=new Set(t.events);(!xf(n,s)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,n=this._getUniformDataChanges()||[];for(const{method:s,start:o,count:u}of n){const f=s==="_removeElements"?-u:u;db(t,o,f)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const n=this.data.datasets.length,s=u=>new Set(t.filter(f=>f[0]===u).map((f,h)=>h+","+f.splice(1).join(","))),o=s(0);for(let u=1;u<n;u++)if(!xf(o,s(u)))return;return Array.from(o).map(u=>u.split(",")).map(u=>({method:u[1],start:+u[2],count:+u[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;pn.update(this,this.width,this.height,t);const n=this.chartArea,s=n.width<=0||n.height<=0;this._layers=[],rt(this.boxes,o=>{s&&o.position==="chartArea"||(o.configure&&o.configure(),this._layers.push(...o._layers()))},this),this._layers.forEach((o,u)=>{o._idx=u}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let n=0,s=this.data.datasets.length;n<s;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,s=this.data.datasets.length;n<s;++n)this._updateDataset(n,gi(t)?t({datasetIndex:n}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,n){const s=this.getDatasetMeta(t),o={meta:s,index:t,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",o)!==!1&&(s.controller._update(n),o.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",o))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Kn.has(this)?this.attached&&!Kn.running(this)&&Kn.start(this):(this.draw(),oh({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:s,height:o}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,o)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(this.chartArea);for(this._drawDatasets();t<n.length;++t)n[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const n=this._sortedMetasets,s=[];let o,u;for(o=0,u=n.length;o<u;++o){const f=n[o];(!t||f.visible)&&s.push(f)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let n=t.length-1;n>=0;--n)this._drawDataset(t[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const n=this.ctx,s=t._clip,o=!s.disabled,u=gb(t,this.chartArea),f={meta:t,index:t.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",f)!==!1&&(o&&Al(n,{left:s.left===!1?0:u.left-s.left,right:s.right===!1?this.width:u.right+s.right,top:s.top===!1?0:u.top-s.top,bottom:s.bottom===!1?this.height:u.bottom+s.bottom}),t.controller.draw(),o&&Il(n),f.cancelable=!1,this.notifyPlugins("afterDatasetDraw",f))}isPointInArea(t){return ws(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,n,s,o){const u=f0.modes[n];return typeof u=="function"?u(this,t,s,o):[]}getDatasetMeta(t){const n=this.data.datasets[t],s=this._metasets;let o=s.filter(u=>u&&u._dataset===n).pop();return o||(o={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:t,_dataset:n,_parsed:[],_sorted:!1},s.push(o)),o}getContext(){return this.$context||(this.$context=Wi(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const n=this.data.datasets[t];if(!n)return!1;const s=this.getDatasetMeta(t);return typeof s.hidden=="boolean"?!s.hidden:!n.hidden}setDatasetVisibility(t,n){const s=this.getDatasetMeta(t);s.hidden=!n}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,n,s){const o=s?"show":"hide",u=this.getDatasetMeta(t),f=u.controller._resolveAnimations(void 0,o);Ho(n)?(u.data[n].hidden=!s,this.update()):(this.setDatasetVisibility(t,s),f.update(u,{visible:s}),this.update(h=>h.datasetIndex===t?o:void 0))}hide(t,n){this._updateVisibility(t,n,!1)}show(t,n){this._updateVisibility(t,n,!0)}_destroyDatasetMeta(t){const n=this._metasets[t];n&&n.controller&&n.controller._destroy(),delete this._metasets[t]}_stop(){let t,n;for(this.stop(),Kn.remove(this),t=0,n=this.data.datasets.length;t<n;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:n}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),Df(t,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Po[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,n=this.platform,s=(u,f)=>{n.addEventListener(this,u,f),t[u]=f},o=(u,f,h)=>{u.offsetX=f,u.offsetY=h,this._eventHandler(u)};rt(this.options.events,u=>s(u,o))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,n=this.platform,s=(p,g)=>{n.addEventListener(this,p,g),t[p]=g},o=(p,g)=>{t[p]&&(n.removeEventListener(this,p,g),delete t[p])},u=(p,g)=>{this.canvas&&this.resize(p,g)};let f;const h=()=>{o("attach",h),this.attached=!0,this.resize(),s("resize",u),s("detach",f)};f=()=>{this.attached=!1,o("resize",u),this._stop(),this._resize(0,0),s("attach",h)},n.isAttached(this.canvas)?h():f()}unbindEvents(){rt(this._listeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._listeners={},rt(this._responsiveListeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,n,s){const o=s?"set":"remove";let u,f,h,p;for(n==="dataset"&&(u=this.getDatasetMeta(t[0].datasetIndex),u.controller["_"+o+"DatasetHoverStyle"]()),h=0,p=t.length;h<p;++h){f=t[h];const g=f&&this.getDatasetMeta(f.datasetIndex).controller;g&&g[o+"HoverStyle"](f.element,f.datasetIndex,f.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const n=this._active||[],s=t.map(({datasetIndex:u,index:f})=>{const h=this.getDatasetMeta(u);if(!h)throw new Error("No dataset found at index "+u);return{datasetIndex:u,element:h.data[f],index:f}});!Eo(s,n)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,n))}notifyPlugins(t,n,s){return this._plugins.notify(this,t,n,s)}isPluginEnabled(t){return this._plugins._cache.filter(n=>n.plugin.id===t).length===1}_updateHoverStyles(t,n,s){const o=this.options.hover,u=(p,g)=>p.filter(b=>!g.some(_=>b.datasetIndex===_.datasetIndex&&b.index===_.index)),f=u(n,t),h=s?t:u(t,n);f.length&&this.updateHoverStyle(f,o.mode,!1),h.length&&o.mode&&this.updateHoverStyle(h,o.mode,!0)}_eventHandler(t,n){const s={event:t,replay:n,cancelable:!0,inChartArea:this.isPointInArea(t)},o=f=>(f.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",s,o)===!1)return;const u=this._handleEvent(t,n,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,o),(u||s.changed)&&this.render(),this}_handleEvent(t,n,s){const{_active:o=[],options:u}=this,f=n,h=this._getActiveElements(t,o,s,f),p=Lv(t),g=pb(t,this._lastEvent,s,p);s&&(this._lastEvent=null,ct(u.onHover,[t,h,this],this),p&&ct(u.onClick,[t,h,this],this));const b=!Eo(h,o);return(b||n)&&(this._active=h,this._updateHoverStyles(h,o,n)),this._lastEvent=g,b}_getActiveElements(t,n,s,o){if(t.type==="mouseout")return[];if(!s)return n;const u=this.options.hover;return this.getElementsAtEventForMode(t,u.mode,u,o)}},Ce(ui,"defaults",_t),Ce(ui,"instances",Po),Ce(ui,"overrides",Hi),Ce(ui,"registry",In),Ce(ui,"version",ub),Ce(ui,"getChart",ah),ui);function lh(){return rt(qo.instances,i=>i._plugins.invalidate())}function Id(i,t,n=t){i.lineCap=Ye(n.borderCapStyle,t.borderCapStyle),i.setLineDash(Ye(n.borderDash,t.borderDash)),i.lineDashOffset=Ye(n.borderDashOffset,t.borderDashOffset),i.lineJoin=Ye(n.borderJoinStyle,t.borderJoinStyle),i.lineWidth=Ye(n.borderWidth,t.borderWidth),i.strokeStyle=Ye(n.borderColor,t.borderColor)}function mb(i,t,n){i.lineTo(n.x,n.y)}function vb(i){return i.stepped?ey:i.tension||i.cubicInterpolationMode==="monotone"?ty:mb}function Ed(i,t,n={}){const s=i.length,{start:o=0,end:u=s-1}=n,{start:f,end:h}=t,p=Math.max(o,f),g=Math.min(u,h),b=o<f&&u<f||o>h&&u>h;return{count:s,start:p,loop:t.loop,ilen:g<p&&!b?s+g-p:g-p}}function yb(i,t,n,s){const{points:o,options:u}=t,{count:f,start:h,loop:p,ilen:g}=Ed(o,n,s),b=vb(u);let{move:_=!0,reverse:T}=s||{},L,D,O;for(L=0;L<=g;++L)D=o[(h+(T?g-L:L))%f],!D.skip&&(_?(i.moveTo(D.x,D.y),_=!1):b(i,O,D,T,u.stepped),O=D);return p&&(D=o[(h+(T?g:0))%f],b(i,O,D,T,u.stepped)),!!p}function bb(i,t,n,s){const o=t.points,{count:u,start:f,ilen:h}=Ed(o,n,s),{move:p=!0,reverse:g}=s||{};let b=0,_=0,T,L,D,O,N,E;const I=K=>(f+(g?h-K:K))%u,j=()=>{O!==N&&(i.lineTo(b,N),i.lineTo(b,O),i.lineTo(b,E))};for(p&&(L=o[I(0)],i.moveTo(L.x,L.y)),T=0;T<=h;++T){if(L=o[I(T)],L.skip)continue;const K=L.x,X=L.y,V=K|0;V===D?(X<O?O=X:X>N&&(N=X),b=(_*b+K)/++_):(j(),i.lineTo(K,X),D=V,_=0,O=N=X),E=X}j()}function pl(i){const t=i.options,n=t.borderDash&&t.borderDash.length;return!i._decimated&&!i._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!n?bb:yb}function xb(i){return i.stepped?Iy:i.tension||i.cubicInterpolationMode==="monotone"?Ey:Oi}function _b(i,t,n,s){let o=t._path;o||(o=t._path=new Path2D,t.path(o,n,s)&&o.closePath()),Id(i,t.options),i.stroke(o)}function wb(i,t,n,s){const{segments:o,options:u}=t,f=pl(t);for(const h of o)Id(i,u,h.style),i.beginPath(),f(i,t,h,{start:n,end:n+s-1})&&i.closePath(),i.stroke()}const kb=typeof Path2D=="function";function Sb(i,t,n,s){kb&&!t.options.segment?_b(i,t,n,s):wb(i,t,n,s)}class cs extends Jn{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,n){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const o=s.spanGaps?this._loop:this._fullLoop;Ty(this._points,s,t,o,n),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=$y(this,this.options.segment))}first(){const t=this.segments,n=this.points;return t.length&&n[t[0].start]}last(){const t=this.segments,n=this.points,s=t.length;return s&&n[t[s-1].end]}interpolate(t,n){const s=this.options,o=t[n],u=this.points,f=zy(this,{property:n,start:o,end:o});if(!f.length)return;const h=[],p=xb(s);let g,b;for(g=0,b=f.length;g<b;++g){const{start:_,end:T}=f[g],L=u[_],D=u[T];if(L===D){h.push(L);continue}const O=Math.abs((o-L[n])/(D[n]-L[n])),N=p(L,D,O,s.stepped);N[n]=t[n],h.push(N)}return h.length===1?h[0]:h}pathSegment(t,n,s){return pl(this)(t,this,n,s)}path(t,n,s){const o=this.segments,u=pl(this);let f=this._loop;n=n||0,s=s||this.points.length-n;for(const h of o)f&=u(t,this,h,{start:n,end:n+s-1});return!!f}draw(t,n,s,o){const u=this.options||{};(this.points||[]).length&&u.borderWidth&&(t.save(),Sb(t,this,s,o),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Ce(cs,"id","line"),Ce(cs,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Ce(cs,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Ce(cs,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function ch(i,t,n,s){const o=i.options,{[n]:u}=i.getProps([n],s);return Math.abs(t-u)<o.radius+o.hitRadius}class Oo extends Jn{constructor(n){super();Ce(this,"parsed");Ce(this,"skip");Ce(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,s,o){const u=this.options,{x:f,y:h}=this.getProps(["x","y"],o);return Math.pow(n-f,2)+Math.pow(s-h,2)<Math.pow(u.hitRadius+u.radius,2)}inXRange(n,s){return ch(this,n,"x",s)}inYRange(n,s){return ch(this,n,"y",s)}getCenterPoint(n){const{x:s,y:o}=this.getProps(["x","y"],n);return{x:s,y:o}}size(n){n=n||this.options||{};let s=n.radius||0;s=Math.max(s,s&&n.hoverRadius||0);const o=s&&n.borderWidth||0;return(s+o)*2}draw(n,s){const o=this.options;this.skip||o.radius<.1||!ws(this,s,this.size(o)/2)||(n.strokeStyle=o.borderColor,n.lineWidth=o.borderWidth,n.fillStyle=o.backgroundColor,ul(n,o,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}Ce(Oo,"id","point"),Ce(Oo,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Ce(Oo,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const uh=(i,t)=>{let{boxHeight:n=t,boxWidth:s=t}=i;return i.usePointStyle&&(n=Math.min(n,t),s=i.pointStyleWidth||Math.min(s,t)),{boxWidth:s,boxHeight:n,itemHeight:Math.max(t,n)}},Cb=(i,t)=>i!==null&&t!==null&&i.datasetIndex===t.datasetIndex&&i.index===t.index;class fh extends Jn{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n,s){this.maxWidth=t,this.maxHeight=n,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let n=ct(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter(s=>t.filter(s,this.chart.data))),t.sort&&(n=n.sort((s,o)=>t.sort(s,o,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:t,ctx:n}=this;if(!t.display){this.width=this.height=0;return}const s=t.labels,o=Ut(s.font),u=o.size,f=this._computeTitleHeight(),{boxWidth:h,itemHeight:p}=uh(s,u);let g,b;n.font=o.string,this.isHorizontal()?(g=this.maxWidth,b=this._fitRows(f,u,h,p)+10):(b=this.maxHeight,g=this._fitCols(f,o,h,p)+10),this.width=Math.min(g,t.maxWidth||this.maxWidth),this.height=Math.min(b,t.maxHeight||this.maxHeight)}_fitRows(t,n,s,o){const{ctx:u,maxWidth:f,options:{labels:{padding:h}}}=this,p=this.legendHitBoxes=[],g=this.lineWidths=[0],b=o+h;let _=t;u.textAlign="left",u.textBaseline="middle";let T=-1,L=-b;return this.legendItems.forEach((D,O)=>{const N=s+n/2+u.measureText(D.text).width;(O===0||g[g.length-1]+N+2*h>f)&&(_+=b,g[g.length-(O>0?0:1)]=0,L+=b,T++),p[O]={left:0,top:L,row:T,width:N,height:o},g[g.length-1]+=N+h}),_}_fitCols(t,n,s,o){const{ctx:u,maxHeight:f,options:{labels:{padding:h}}}=this,p=this.legendHitBoxes=[],g=this.columnSizes=[],b=f-t;let _=h,T=0,L=0,D=0,O=0;return this.legendItems.forEach((N,E)=>{const{itemWidth:I,itemHeight:j}=Tb(s,n,u,N,o);E>0&&L+j+2*h>b&&(_+=T+h,g.push({width:T,height:L}),D+=T+h,O++,T=L=0),p[E]={left:D,top:L,col:O,width:I,height:j},T=Math.max(T,I),L+=j+h}),_+=T,g.push({width:T,height:L}),_}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:s,labels:{padding:o},rtl:u}}=this,f=fr(u,this.left,this.width);if(this.isHorizontal()){let h=0,p=Bt(s,this.left+o,this.right-this.lineWidths[h]);for(const g of n)h!==g.row&&(h=g.row,p=Bt(s,this.left+o,this.right-this.lineWidths[h])),g.top+=this.top+t+o,g.left=f.leftForLtr(f.x(p),g.width),p+=g.width+o}else{let h=0,p=Bt(s,this.top+t+o,this.bottom-this.columnSizes[h].height);for(const g of n)g.col!==h&&(h=g.col,p=Bt(s,this.top+t+o,this.bottom-this.columnSizes[h].height)),g.top=p,g.left+=this.left+o,g.left=f.leftForLtr(f.x(g.left),g.width),p+=g.height+o}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;Al(t,this),this._draw(),Il(t)}}_draw(){const{options:t,columnSizes:n,lineWidths:s,ctx:o}=this,{align:u,labels:f}=t,h=_t.color,p=fr(t.rtl,this.left,this.width),g=Ut(f.font),{padding:b}=f,_=g.size,T=_/2;let L;this.drawTitle(),o.textAlign=p.textAlign("left"),o.textBaseline="middle",o.lineWidth=.5,o.font=g.string;const{boxWidth:D,boxHeight:O,itemHeight:N}=uh(f,_),E=function(V,G,ee){if(isNaN(D)||D<=0||isNaN(O)||O<0)return;o.save();const de=Ye(ee.lineWidth,1);if(o.fillStyle=Ye(ee.fillStyle,h),o.lineCap=Ye(ee.lineCap,"butt"),o.lineDashOffset=Ye(ee.lineDashOffset,0),o.lineJoin=Ye(ee.lineJoin,"miter"),o.lineWidth=de,o.strokeStyle=Ye(ee.strokeStyle,h),o.setLineDash(Ye(ee.lineDash,[])),f.usePointStyle){const he={radius:O*Math.SQRT2/2,pointStyle:ee.pointStyle,rotation:ee.rotation,borderWidth:de},se=p.xPlus(V,D/2),le=G+T;dd(o,he,se,le,f.pointStyleWidth&&D)}else{const he=G+Math.max((_-O)/2,0),se=p.leftForLtr(V,D),le=ms(ee.borderRadius);o.beginPath(),Object.values(le).some(R=>R!==0)?fl(o,{x:se,y:he,w:D,h:O,radius:le}):o.rect(se,he,D,O),o.fill(),de!==0&&o.stroke()}o.restore()},I=function(V,G,ee){ks(o,ee.text,V,G+N/2,g,{strikethrough:ee.hidden,textAlign:p.textAlign(ee.textAlign)})},j=this.isHorizontal(),K=this._computeTitleHeight();j?L={x:Bt(u,this.left+b,this.right-s[0]),y:this.top+b+K,line:0}:L={x:this.left+b,y:Bt(u,this.top+K+b,this.bottom-n[0].height),line:0},xd(this.ctx,t.textDirection);const X=N+b;this.legendItems.forEach((V,G)=>{o.strokeStyle=V.fontColor,o.fillStyle=V.fontColor;const ee=o.measureText(V.text).width,de=p.textAlign(V.textAlign||(V.textAlign=f.textAlign)),he=D+T+ee;let se=L.x,le=L.y;p.setWidth(this.width),j?G>0&&se+he+b>this.right&&(le=L.y+=X,L.line++,se=L.x=Bt(u,this.left+b,this.right-s[L.line])):G>0&&le+X>this.bottom&&(se=L.x=se+n[L.line].width+b,L.line++,le=L.y=Bt(u,this.top+K+b,this.bottom-n[L.line].height));const R=p.x(se);if(E(R,le,V),se=Uv(de,se+D+T,j?se+he:this.right,t.rtl),I(p.x(se),le,V),j)L.x+=he+b;else if(typeof V.text!="string"){const F=g.lineHeight;L.y+=Rd(V,F)+b}else L.y+=X}),_d(this.ctx,t.textDirection)}drawTitle(){const t=this.options,n=t.title,s=Ut(n.font),o=mn(n.padding);if(!n.display)return;const u=fr(t.rtl,this.left,this.width),f=this.ctx,h=n.position,p=s.size/2,g=o.top+p;let b,_=this.left,T=this.width;if(this.isHorizontal())T=Math.max(...this.lineWidths),b=this.top+g,_=Bt(t.align,_,this.right-T);else{const D=this.columnSizes.reduce((O,N)=>Math.max(O,N.height),0);b=g+Bt(t.align,this.top,this.bottom-D-t.labels.padding-this._computeTitleHeight())}const L=Bt(h,_,_+T);f.textAlign=u.textAlign(Pl(h)),f.textBaseline="middle",f.strokeStyle=n.color,f.fillStyle=n.color,f.font=s.string,ks(f,n.text,L,b,s)}_computeTitleHeight(){const t=this.options.title,n=Ut(t.font),s=mn(t.padding);return t.display?n.lineHeight+s.height:0}_getLegendItemAt(t,n){let s,o,u;if(as(t,this.left,this.right)&&as(n,this.top,this.bottom)){for(u=this.legendHitBoxes,s=0;s<u.length;++s)if(o=u[s],as(t,o.left,o.left+o.width)&&as(n,o.top,o.top+o.height))return this.legendItems[s]}return null}handleEvent(t){const n=this.options;if(!Mb(t.type,n))return;const s=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const o=this._hoveredItem,u=Cb(o,s);o&&!u&&ct(n.onLeave,[t,o,this],this),this._hoveredItem=s,s&&!u&&ct(n.onHover,[t,s,this],this)}else s&&ct(n.onClick,[t,s,this],this)}}function Tb(i,t,n,s,o){const u=Lb(s,i,t,n),f=Nb(o,s,t.lineHeight);return{itemWidth:u,itemHeight:f}}function Lb(i,t,n,s){let o=i.text;return o&&typeof o!="string"&&(o=o.reduce((u,f)=>u.length>f.length?u:f)),t+n.size/2+s.measureText(o).width}function Nb(i,t,n){let s=i;return typeof t.text!="string"&&(s=Rd(t,n)),s}function Rd(i,t){const n=i.text?i.text.length:0;return t*n}function Mb(i,t){return!!((i==="mousemove"||i==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(i==="click"||i==="mouseup"))}var Db={id:"legend",_element:fh,start(i,t,n){const s=i.legend=new fh({ctx:i.ctx,options:n,chart:i});pn.configure(i,s,n),pn.addBox(i,s)},stop(i){pn.removeBox(i,i.legend),delete i.legend},beforeUpdate(i,t,n){const s=i.legend;pn.configure(i,s,n),s.options=n},afterUpdate(i){const t=i.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(i,t){t.replay||i.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(i,t,n){const s=t.datasetIndex,o=n.chart;o.isDatasetVisible(s)?(o.hide(s),t.hidden=!0):(o.show(s),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:i=>i.chart.options.color,boxWidth:40,padding:10,generateLabels(i){const t=i.data.datasets,{labels:{usePointStyle:n,pointStyle:s,textAlign:o,color:u,useBorderRadius:f,borderRadius:h}}=i.legend.options;return i._getSortedDatasetMetas().map(p=>{const g=p.controller.getStyle(n?0:void 0),b=mn(g.borderWidth);return{text:t[p.index].label,fillStyle:g.backgroundColor,fontColor:u,hidden:!p.visible,lineCap:g.borderCapStyle,lineDash:g.borderDash,lineDashOffset:g.borderDashOffset,lineJoin:g.borderJoinStyle,lineWidth:(b.width+b.height)/4,strokeStyle:g.borderColor,pointStyle:s||g.pointStyle,rotation:g.rotation,textAlign:o||g.textAlign,borderRadius:f&&(h||g.borderRadius),datasetIndex:p.index}},this)}},title:{color:i=>i.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:i=>!i.startsWith("on"),labels:{_scriptable:i=>!["generateLabels","filter","sort"].includes(i)}}};class Fd extends Jn{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=n;const o=Dt(s.text)?s.text.length:1;this._padding=mn(s.padding);const u=o*Ut(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=u:this.width=u}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:n,left:s,bottom:o,right:u,options:f}=this,h=f.align;let p=0,g,b,_;return this.isHorizontal()?(b=Bt(h,s,u),_=n+t,g=u-s):(f.position==="left"?(b=s+t,_=Bt(h,o,n),p=Ot*-.5):(b=u-t,_=Bt(h,n,o),p=Ot*.5),g=o-n),{titleX:b,titleY:_,maxWidth:g,rotation:p}}draw(){const t=this.ctx,n=this.options;if(!n.display)return;const s=Ut(n.font),u=s.lineHeight/2+this._padding.top,{titleX:f,titleY:h,maxWidth:p,rotation:g}=this._drawArgs(u);ks(t,n.text,0,0,s,{color:n.color,maxWidth:p,rotation:g,textAlign:Pl(n.align),textBaseline:"middle",translation:[f,h]})}}function Pb(i,t){const n=new Fd({ctx:i.ctx,options:t,chart:i});pn.configure(i,n,t),pn.addBox(i,n),i.titleBlock=n}var Ob={id:"title",_element:Fd,start(i,t,n){Pb(i,n)},stop(i){const t=i.titleBlock;pn.removeBox(i,t),delete i.titleBlock},beforeUpdate(i,t,n){const s=i.titleBlock;pn.configure(i,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const us={average(i){if(!i.length)return!1;let t,n,s=new Set,o=0,u=0;for(t=0,n=i.length;t<n;++t){const h=i[t].element;if(h&&h.hasValue()){const p=h.tooltipPosition();s.add(p.x),o+=p.y,++u}}return u===0||s.size===0?!1:{x:[...s].reduce((h,p)=>h+p)/s.size,y:o/u}},nearest(i,t){if(!i.length)return!1;let n=t.x,s=t.y,o=Number.POSITIVE_INFINITY,u,f,h;for(u=0,f=i.length;u<f;++u){const p=i[u].element;if(p&&p.hasValue()){const g=p.getCenterPoint(),b=ll(t,g);b<o&&(o=b,h=p)}}if(h){const p=h.tooltipPosition();n=p.x,s=p.y}return{x:n,y:s}}};function An(i,t){return t&&(Dt(t)?Array.prototype.push.apply(i,t):i.push(t)),i}function Xn(i){return(typeof i=="string"||i instanceof String)&&i.indexOf(`
`)>-1?i.split(`
`):i}function Ab(i,t){const{element:n,datasetIndex:s,index:o}=t,u=i.getDatasetMeta(s).controller,{label:f,value:h}=u.getLabelAndValue(o);return{chart:i,label:f,parsed:u.getParsed(o),raw:i.data.datasets[s].data[o],formattedValue:h,dataset:u.getDataset(),dataIndex:o,datasetIndex:s,element:n}}function hh(i,t){const n=i.chart.ctx,{body:s,footer:o,title:u}=i,{boxWidth:f,boxHeight:h}=t,p=Ut(t.bodyFont),g=Ut(t.titleFont),b=Ut(t.footerFont),_=u.length,T=o.length,L=s.length,D=mn(t.padding);let O=D.height,N=0,E=s.reduce((K,X)=>K+X.before.length+X.lines.length+X.after.length,0);if(E+=i.beforeBody.length+i.afterBody.length,_&&(O+=_*g.lineHeight+(_-1)*t.titleSpacing+t.titleMarginBottom),E){const K=t.displayColors?Math.max(h,p.lineHeight):p.lineHeight;O+=L*K+(E-L)*p.lineHeight+(E-1)*t.bodySpacing}T&&(O+=t.footerMarginTop+T*b.lineHeight+(T-1)*t.footerSpacing);let I=0;const j=function(K){N=Math.max(N,n.measureText(K).width+I)};return n.save(),n.font=g.string,rt(i.title,j),n.font=p.string,rt(i.beforeBody.concat(i.afterBody),j),I=t.displayColors?f+2+t.boxPadding:0,rt(s,K=>{rt(K.before,j),rt(K.lines,j),rt(K.after,j)}),I=0,n.font=b.string,rt(i.footer,j),n.restore(),N+=D.width,{width:N,height:O}}function Ib(i,t){const{y:n,height:s}=t;return n<s/2?"top":n>i.height-s/2?"bottom":"center"}function Eb(i,t,n,s){const{x:o,width:u}=s,f=n.caretSize+n.caretPadding;if(i==="left"&&o+u+f>t.width||i==="right"&&o-u-f<0)return!0}function Rb(i,t,n,s){const{x:o,width:u}=n,{width:f,chartArea:{left:h,right:p}}=i;let g="center";return s==="center"?g=o<=(h+p)/2?"left":"right":o<=u/2?g="left":o>=f-u/2&&(g="right"),Eb(g,i,t,n)&&(g="center"),g}function dh(i,t,n){const s=n.yAlign||t.yAlign||Ib(i,n);return{xAlign:n.xAlign||t.xAlign||Rb(i,t,n,s),yAlign:s}}function Fb(i,t){let{x:n,width:s}=i;return t==="right"?n-=s:t==="center"&&(n-=s/2),n}function Hb(i,t,n){let{y:s,height:o}=i;return t==="top"?s+=n:t==="bottom"?s-=o+n:s-=o/2,s}function ph(i,t,n,s){const{caretSize:o,caretPadding:u,cornerRadius:f}=i,{xAlign:h,yAlign:p}=n,g=o+u,{topLeft:b,topRight:_,bottomLeft:T,bottomRight:L}=ms(f);let D=Fb(t,h);const O=Hb(t,p,g);return p==="center"?h==="left"?D+=g:h==="right"&&(D-=g):h==="left"?D-=Math.max(b,T)+o:h==="right"&&(D+=Math.max(_,L)+o),{x:dn(D,0,s.width-t.width),y:dn(O,0,s.height-t.height)}}function So(i,t,n){const s=mn(n.padding);return t==="center"?i.x+i.width/2:t==="right"?i.x+i.width-s.right:i.x+s.left}function gh(i){return An([],Xn(i))}function Wb(i,t,n){return Wi(i,{tooltip:t,tooltipItems:n,type:"tooltip"})}function mh(i,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?i.override(n):i}const Hd={beforeTitle:Vn,title(i){if(i.length>0){const t=i[0],n=t.chart.data.labels,s=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(s>0&&t.dataIndex<s)return n[t.dataIndex]}return""},afterTitle:Vn,beforeBody:Vn,beforeLabel:Vn,label(i){if(this&&this.options&&this.options.mode==="dataset")return i.label+": "+i.formattedValue||i.formattedValue;let t=i.dataset.label||"";t&&(t+=": ");const n=i.formattedValue;return vt(n)||(t+=n),t},labelColor(i){const n=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(i){const n=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Vn,afterBody:Vn,beforeFooter:Vn,footer:Vn,afterFooter:Vn};function en(i,t,n,s){const o=i[t].call(n,s);return typeof o>"u"?Hd[t].call(n,s):o}class gl extends Jn{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const n=this.chart,s=this.options.setContext(this.getContext()),o=s.enabled&&n.options.animation&&s.animations,u=new kd(this.chart,o);return o._cacheable&&(this._cachedAnimations=Object.freeze(u)),u}getContext(){return this.$context||(this.$context=Wb(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,n){const{callbacks:s}=n,o=en(s,"beforeTitle",this,t),u=en(s,"title",this,t),f=en(s,"afterTitle",this,t);let h=[];return h=An(h,Xn(o)),h=An(h,Xn(u)),h=An(h,Xn(f)),h}getBeforeBody(t,n){return gh(en(n.callbacks,"beforeBody",this,t))}getBody(t,n){const{callbacks:s}=n,o=[];return rt(t,u=>{const f={before:[],lines:[],after:[]},h=mh(s,u);An(f.before,Xn(en(h,"beforeLabel",this,u))),An(f.lines,en(h,"label",this,u)),An(f.after,Xn(en(h,"afterLabel",this,u))),o.push(f)}),o}getAfterBody(t,n){return gh(en(n.callbacks,"afterBody",this,t))}getFooter(t,n){const{callbacks:s}=n,o=en(s,"beforeFooter",this,t),u=en(s,"footer",this,t),f=en(s,"afterFooter",this,t);let h=[];return h=An(h,Xn(o)),h=An(h,Xn(u)),h=An(h,Xn(f)),h}_createItems(t){const n=this._active,s=this.chart.data,o=[],u=[],f=[];let h=[],p,g;for(p=0,g=n.length;p<g;++p)h.push(Ab(this.chart,n[p]));return t.filter&&(h=h.filter((b,_,T)=>t.filter(b,_,T,s))),t.itemSort&&(h=h.sort((b,_)=>t.itemSort(b,_,s))),rt(h,b=>{const _=mh(t.callbacks,b);o.push(en(_,"labelColor",this,b)),u.push(en(_,"labelPointStyle",this,b)),f.push(en(_,"labelTextColor",this,b))}),this.labelColors=o,this.labelPointStyles=u,this.labelTextColors=f,this.dataPoints=h,h}update(t,n){const s=this.options.setContext(this.getContext()),o=this._active;let u,f=[];if(!o.length)this.opacity!==0&&(u={opacity:0});else{const h=us[s.position].call(this,o,this._eventPosition);f=this._createItems(s),this.title=this.getTitle(f,s),this.beforeBody=this.getBeforeBody(f,s),this.body=this.getBody(f,s),this.afterBody=this.getAfterBody(f,s),this.footer=this.getFooter(f,s);const p=this._size=hh(this,s),g=Object.assign({},h,p),b=dh(this.chart,s,g),_=ph(s,g,b,this.chart);this.xAlign=b.xAlign,this.yAlign=b.yAlign,u={opacity:1,x:_.x,y:_.y,width:p.width,height:p.height,caretX:h.x,caretY:h.y}}this._tooltipItems=f,this.$context=void 0,u&&this._resolveAnimations().update(this,u),t&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(t,n,s,o){const u=this.getCaretPosition(t,s,o);n.lineTo(u.x1,u.y1),n.lineTo(u.x2,u.y2),n.lineTo(u.x3,u.y3)}getCaretPosition(t,n,s){const{xAlign:o,yAlign:u}=this,{caretSize:f,cornerRadius:h}=s,{topLeft:p,topRight:g,bottomLeft:b,bottomRight:_}=ms(h),{x:T,y:L}=t,{width:D,height:O}=n;let N,E,I,j,K,X;return u==="center"?(K=L+O/2,o==="left"?(N=T,E=N-f,j=K+f,X=K-f):(N=T+D,E=N+f,j=K-f,X=K+f),I=N):(o==="left"?E=T+Math.max(p,b)+f:o==="right"?E=T+D-Math.max(g,_)-f:E=this.caretX,u==="top"?(j=L,K=j-f,N=E-f,I=E+f):(j=L+O,K=j+f,N=E+f,I=E-f),X=j),{x1:N,x2:E,x3:I,y1:j,y2:K,y3:X}}drawTitle(t,n,s){const o=this.title,u=o.length;let f,h,p;if(u){const g=fr(s.rtl,this.x,this.width);for(t.x=So(this,s.titleAlign,s),n.textAlign=g.textAlign(s.titleAlign),n.textBaseline="middle",f=Ut(s.titleFont),h=s.titleSpacing,n.fillStyle=s.titleColor,n.font=f.string,p=0;p<u;++p)n.fillText(o[p],g.x(t.x),t.y+f.lineHeight/2),t.y+=f.lineHeight+h,p+1===u&&(t.y+=s.titleMarginBottom-h)}}_drawColorBox(t,n,s,o,u){const f=this.labelColors[s],h=this.labelPointStyles[s],{boxHeight:p,boxWidth:g}=u,b=Ut(u.bodyFont),_=So(this,"left",u),T=o.x(_),L=p<b.lineHeight?(b.lineHeight-p)/2:0,D=n.y+L;if(u.usePointStyle){const O={radius:Math.min(g,p)/2,pointStyle:h.pointStyle,rotation:h.rotation,borderWidth:1},N=o.leftForLtr(T,g)+g/2,E=D+p/2;t.strokeStyle=u.multiKeyBackground,t.fillStyle=u.multiKeyBackground,ul(t,O,N,E),t.strokeStyle=f.borderColor,t.fillStyle=f.backgroundColor,ul(t,O,N,E)}else{t.lineWidth=tt(f.borderWidth)?Math.max(...Object.values(f.borderWidth)):f.borderWidth||1,t.strokeStyle=f.borderColor,t.setLineDash(f.borderDash||[]),t.lineDashOffset=f.borderDashOffset||0;const O=o.leftForLtr(T,g),N=o.leftForLtr(o.xPlus(T,1),g-2),E=ms(f.borderRadius);Object.values(E).some(I=>I!==0)?(t.beginPath(),t.fillStyle=u.multiKeyBackground,fl(t,{x:O,y:D,w:g,h:p,radius:E}),t.fill(),t.stroke(),t.fillStyle=f.backgroundColor,t.beginPath(),fl(t,{x:N,y:D+1,w:g-2,h:p-2,radius:E}),t.fill()):(t.fillStyle=u.multiKeyBackground,t.fillRect(O,D,g,p),t.strokeRect(O,D,g,p),t.fillStyle=f.backgroundColor,t.fillRect(N,D+1,g-2,p-2))}t.fillStyle=this.labelTextColors[s]}drawBody(t,n,s){const{body:o}=this,{bodySpacing:u,bodyAlign:f,displayColors:h,boxHeight:p,boxWidth:g,boxPadding:b}=s,_=Ut(s.bodyFont);let T=_.lineHeight,L=0;const D=fr(s.rtl,this.x,this.width),O=function(ee){n.fillText(ee,D.x(t.x+L),t.y+T/2),t.y+=T+u},N=D.textAlign(f);let E,I,j,K,X,V,G;for(n.textAlign=f,n.textBaseline="middle",n.font=_.string,t.x=So(this,N,s),n.fillStyle=s.bodyColor,rt(this.beforeBody,O),L=h&&N!=="right"?f==="center"?g/2+b:g+2+b:0,K=0,V=o.length;K<V;++K){for(E=o[K],I=this.labelTextColors[K],n.fillStyle=I,rt(E.before,O),j=E.lines,h&&j.length&&(this._drawColorBox(n,t,K,D,s),T=Math.max(_.lineHeight,p)),X=0,G=j.length;X<G;++X)O(j[X]),T=_.lineHeight;rt(E.after,O)}L=0,T=_.lineHeight,rt(this.afterBody,O),t.y-=u}drawFooter(t,n,s){const o=this.footer,u=o.length;let f,h;if(u){const p=fr(s.rtl,this.x,this.width);for(t.x=So(this,s.footerAlign,s),t.y+=s.footerMarginTop,n.textAlign=p.textAlign(s.footerAlign),n.textBaseline="middle",f=Ut(s.footerFont),n.fillStyle=s.footerColor,n.font=f.string,h=0;h<u;++h)n.fillText(o[h],p.x(t.x),t.y+f.lineHeight/2),t.y+=f.lineHeight+s.footerSpacing}}drawBackground(t,n,s,o){const{xAlign:u,yAlign:f}=this,{x:h,y:p}=t,{width:g,height:b}=s,{topLeft:_,topRight:T,bottomLeft:L,bottomRight:D}=ms(o.cornerRadius);n.fillStyle=o.backgroundColor,n.strokeStyle=o.borderColor,n.lineWidth=o.borderWidth,n.beginPath(),n.moveTo(h+_,p),f==="top"&&this.drawCaret(t,n,s,o),n.lineTo(h+g-T,p),n.quadraticCurveTo(h+g,p,h+g,p+T),f==="center"&&u==="right"&&this.drawCaret(t,n,s,o),n.lineTo(h+g,p+b-D),n.quadraticCurveTo(h+g,p+b,h+g-D,p+b),f==="bottom"&&this.drawCaret(t,n,s,o),n.lineTo(h+L,p+b),n.quadraticCurveTo(h,p+b,h,p+b-L),f==="center"&&u==="left"&&this.drawCaret(t,n,s,o),n.lineTo(h,p+_),n.quadraticCurveTo(h,p,h+_,p),n.closePath(),n.fill(),o.borderWidth>0&&n.stroke()}_updateAnimationTarget(t){const n=this.chart,s=this.$animations,o=s&&s.x,u=s&&s.y;if(o||u){const f=us[t.position].call(this,this._active,this._eventPosition);if(!f)return;const h=this._size=hh(this,t),p=Object.assign({},f,this._size),g=dh(n,t,p),b=ph(t,p,g,n);(o._to!==b.x||u._to!==b.y)&&(this.xAlign=g.xAlign,this.yAlign=g.yAlign,this.width=h.width,this.height=h.height,this.caretX=f.x,this.caretY=f.y,this._resolveAnimations().update(this,b))}}_willRender(){return!!this.opacity}draw(t){const n=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(n);const o={width:this.width,height:this.height},u={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const f=mn(n.padding),h=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&h&&(t.save(),t.globalAlpha=s,this.drawBackground(u,t,o,n),xd(t,n.textDirection),u.y+=f.top,this.drawTitle(u,t,n),this.drawBody(u,t,n),this.drawFooter(u,t,n),_d(t,n.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,n){const s=this._active,o=t.map(({datasetIndex:h,index:p})=>{const g=this.chart.getDatasetMeta(h);if(!g)throw new Error("Cannot find a dataset at index "+h);return{datasetIndex:h,element:g.data[p],index:p}}),u=!Eo(s,o),f=this._positionChanged(o,n);(u||f)&&(this._active=o,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,n,s=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const o=this.options,u=this._active||[],f=this._getActiveElements(t,u,n,s),h=this._positionChanged(f,t),p=n||!Eo(f,u)||h;return p&&(this._active=f,(o.enabled||o.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,n))),p}_getActiveElements(t,n,s,o){const u=this.options;if(t.type==="mouseout")return[];if(!o)return n.filter(h=>this.chart.data.datasets[h.datasetIndex]&&this.chart.getDatasetMeta(h.datasetIndex).controller.getParsed(h.index)!==void 0);const f=this.chart.getElementsAtEventForMode(t,u.mode,u,s);return u.reverse&&f.reverse(),f}_positionChanged(t,n){const{caretX:s,caretY:o,options:u}=this,f=us[u.position].call(this,t,n);return f!==!1&&(s!==f.x||o!==f.y)}}Ce(gl,"positioners",us);var zb={id:"tooltip",_element:gl,positioners:us,afterInit(i,t,n){n&&(i.tooltip=new gl({chart:i,options:n}))},beforeUpdate(i,t,n){i.tooltip&&i.tooltip.initialize(n)},reset(i,t,n){i.tooltip&&i.tooltip.initialize(n)},afterDraw(i){const t=i.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(i.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;t.draw(i.ctx),i.notifyPlugins("afterTooltipDraw",n)}},afterEvent(i,t){if(i.tooltip){const n=t.replay;i.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(i,t)=>t.bodyFont.size,boxWidth:(i,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Hd},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:i=>i!=="filter"&&i!=="itemSort"&&i!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const Bb=(i,t,n,s)=>(typeof t=="string"?(n=i.push(t)-1,s.unshift({index:n,label:t})):isNaN(t)&&(n=null),n);function Ub(i,t,n,s){const o=i.indexOf(t);if(o===-1)return Bb(i,t,n,s);const u=i.lastIndexOf(t);return o!==u?n:o}const $b=(i,t)=>i===null?null:dn(Math.round(i),0,t);function vh(i){const t=this.getLabels();return i>=0&&i<t.length?t[i]:i}class ml extends yr{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const n=this._addedLabels;if(n.length){const s=this.getLabels();for(const{index:o,label:u}of n)s[o]===u&&s.splice(o,1);this._addedLabels=[]}super.init(t)}parse(t,n){if(vt(t))return null;const s=this.getLabels();return n=isFinite(n)&&s[n]===t?n:Ub(s,t,Ye(n,t),this._addedLabels),$b(n,s.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:s,max:o}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(s=0),n||(o=this.getLabels().length-1)),this.min=s,this.max=o}buildTicks(){const t=this.min,n=this.max,s=this.options.offset,o=[];let u=this.getLabels();u=t===0&&n===u.length-1?u:u.slice(t,n+1),this._valueRange=Math.max(u.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let f=t;f<=n;f++)o.push({value:f});return o}getLabelForValue(t){return vh.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}Ce(ml,"id","category"),Ce(ml,"defaults",{ticks:{callback:vh}});function jb(i,t){const n=[],{bounds:o,step:u,min:f,max:h,precision:p,count:g,maxTicks:b,maxDigits:_,includeBounds:T}=i,L=u||1,D=b-1,{min:O,max:N}=t,E=!vt(f),I=!vt(h),j=!vt(g),K=(N-O)/(_+1);let X=wf((N-O)/D/L)*L,V,G,ee,de;if(X<1e-14&&!E&&!I)return[{value:O},{value:N}];de=Math.ceil(N/X)-Math.floor(O/X),de>D&&(X=wf(de*X/D/L)*L),vt(p)||(V=Math.pow(10,p),X=Math.ceil(X*V)/V),o==="ticks"?(G=Math.floor(O/X)*X,ee=Math.ceil(N/X)*X):(G=O,ee=N),E&&I&&u&&Pv((h-f)/u,X/1e3)?(de=Math.round(Math.min((h-f)/X,b)),X=(h-f)/de,G=f,ee=h):j?(G=E?f:G,ee=I?h:ee,de=g-1,X=(ee-G)/de):(de=(ee-G)/X,ds(de,Math.round(de),X/1e3)?de=Math.round(de):de=Math.ceil(de));const he=Math.max(kf(X),kf(G));V=Math.pow(10,vt(p)?he:p),G=Math.round(G*V)/V,ee=Math.round(ee*V)/V;let se=0;for(E&&(T&&G!==f?(n.push({value:f}),G<f&&se++,ds(Math.round((G+se*X)*V)/V,f,yh(f,K,i))&&se++):G<f&&se++);se<de;++se){const le=Math.round((G+se*X)*V)/V;if(I&&le>h)break;n.push({value:le})}return I&&T&&ee!==h?n.length&&ds(n[n.length-1].value,h,yh(h,K,i))?n[n.length-1].value=h:n.push({value:h}):(!I||ee===h)&&n.push({value:ee}),n}function yh(i,t,{horizontal:n,minRotation:s}){const o=Ii(s),u=(n?Math.sin(o):Math.cos(o))||.001,f=.75*t*(""+i).length;return Math.min(t/u,f)}class Vb extends yr{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,n){return vt(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:n,maxDefined:s}=this.getUserBounds();let{min:o,max:u}=this;const f=p=>o=n?o:p,h=p=>u=s?u:p;if(t){const p=pr(o),g=pr(u);p<0&&g<0?h(0):p>0&&g>0&&f(0)}if(o===u){let p=u===0?1:Math.abs(u*.05);h(u+p),t||f(o-p)}this.min=o,this.max=u}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:n,stepSize:s}=t,o;return s?(o=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,o>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${o} ticks. Limiting to 1000.`),o=1e3)):(o=this.computeTickLimit(),n=n||11),n&&(o=Math.min(n,o)),o}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,n=t.ticks;let s=this.getTickLimit();s=Math.max(2,s);const o={maxTicks:s,bounds:t.bounds,min:t.min,max:t.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},u=this._range||this,f=jb(o,u);return t.bounds==="ticks"&&Ov(f,this,"value"),t.reverse?(f.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),f}configure(){const t=this.ticks;let n=this.min,s=this.max;if(super.configure(),this.options.offset&&t.length){const o=(s-n)/Math.max(t.length-1,1)/2;n-=o,s+=o}this._startValue=n,this._endValue=s,this._valueRange=s-n}getLabelForValue(t){return ud(t,this.chart.options.locale,this.options.ticks.format)}}class vl extends Vb{determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=gn(t)?t:0,this.max=gn(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),n=t?this.width:this.height,s=Ii(this.options.ticks.minRotation),o=(t?Math.sin(s):Math.cos(s))||.001,u=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,u.lineHeight/o))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}Ce(vl,"id","linear"),Ce(vl,"defaults",{ticks:{callback:hd.formatters.numeric}});const Go={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},nn=Object.keys(Go);function bh(i,t){return i-t}function xh(i,t){if(vt(t))return null;const n=i._adapter,{parser:s,round:o,isoWeekday:u}=i._parseOpts;let f=t;return typeof s=="function"&&(f=s(f)),gn(f)||(f=typeof s=="string"?n.parse(f,s):n.parse(f)),f===null?null:(o&&(f=o==="week"&&(_s(u)||u===!0)?n.startOf(f,"isoWeek",u):n.startOf(f,o)),+f)}function _h(i,t,n,s){const o=nn.length;for(let u=nn.indexOf(i);u<o-1;++u){const f=Go[nn[u]],h=f.steps?f.steps:Number.MAX_SAFE_INTEGER;if(f.common&&Math.ceil((n-t)/(h*f.size))<=s)return nn[u]}return nn[o-1]}function Kb(i,t,n,s,o){for(let u=nn.length-1;u>=nn.indexOf(n);u--){const f=nn[u];if(Go[f].common&&i._adapter.diff(o,s,f)>=t-1)return f}return nn[n?nn.indexOf(n):0]}function Xb(i){for(let t=nn.indexOf(i)+1,n=nn.length;t<n;++t)if(Go[nn[t]].common)return nn[t]}function wh(i,t,n){if(!n)i[t]=!0;else if(n.length){const{lo:s,hi:o}=Dl(n,t),u=n[s]>=t?n[s]:n[o];i[u]=!0}}function qb(i,t,n,s){const o=i._adapter,u=+o.startOf(t[0].value,s),f=t[t.length-1].value;let h,p;for(h=u;h<=f;h=+o.add(h,1,s))p=n[h],p>=0&&(t[p].major=!0);return t}function kh(i,t,n){const s=[],o={},u=t.length;let f,h;for(f=0;f<u;++f)h=t[f],o[h]=f,s.push({value:h,major:!1});return u===0||!n?s:qb(i,s,o,n)}class Uo extends yr{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,n={}){const s=t.time||(t.time={}),o=this._adapter=new o0._date(t.adapters.date);o.init(n),hs(s.displayFormats,o.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(t),this._normalized=n.normalized}parse(t,n){return t===void 0?null:xh(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,n=this._adapter,s=t.time.unit||"day";let{min:o,max:u,minDefined:f,maxDefined:h}=this.getUserBounds();function p(g){!f&&!isNaN(g.min)&&(o=Math.min(o,g.min)),!h&&!isNaN(g.max)&&(u=Math.max(u,g.max))}(!f||!h)&&(p(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&p(this.getMinMax(!1))),o=gn(o)&&!isNaN(o)?o:+n.startOf(Date.now(),s),u=gn(u)&&!isNaN(u)?u:+n.endOf(Date.now(),s)+1,this.min=Math.min(o,u-1),this.max=Math.max(o+1,u)}_getLabelBounds(){const t=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return t.length&&(n=t[0],s=t[t.length-1]),{min:n,max:s}}buildTicks(){const t=this.options,n=t.time,s=t.ticks,o=s.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&o.length&&(this.min=this._userMin||o[0],this.max=this._userMax||o[o.length-1]);const u=this.min,f=this.max,h=Hv(o,u,f);return this._unit=n.unit||(s.autoSkip?_h(n.minUnit,this.min,this.max,this._getLabelCapacity(u)):Kb(this,h.length,n.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:Xb(this._unit),this.initOffsets(o),t.reverse&&h.reverse(),kh(this,h,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let n=0,s=0,o,u;this.options.offset&&t.length&&(o=this.getDecimalForValue(t[0]),t.length===1?n=1-o:n=(this.getDecimalForValue(t[1])-o)/2,u=this.getDecimalForValue(t[t.length-1]),t.length===1?s=u:s=(u-this.getDecimalForValue(t[t.length-2]))/2);const f=t.length<3?.5:.25;n=dn(n,0,f),s=dn(s,0,f),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){const t=this._adapter,n=this.min,s=this.max,o=this.options,u=o.time,f=u.unit||_h(u.minUnit,n,s,this._getLabelCapacity(n)),h=Ye(o.ticks.stepSize,1),p=f==="week"?u.isoWeekday:!1,g=_s(p)||p===!0,b={};let _=n,T,L;if(g&&(_=+t.startOf(_,"isoWeek",p)),_=+t.startOf(_,g?"day":f),t.diff(s,n,f)>1e5*h)throw new Error(n+" and "+s+" are too far apart with stepSize of "+h+" "+f);const D=o.ticks.source==="data"&&this.getDataTimestamps();for(T=_,L=0;T<s;T=+t.add(T,h,f),L++)wh(b,T,D);return(T===s||o.bounds==="ticks"||L===1)&&wh(b,T,D),Object.keys(b).sort(bh).map(O=>+O)}getLabelForValue(t){const n=this._adapter,s=this.options.time;return s.tooltipFormat?n.format(t,s.tooltipFormat):n.format(t,s.displayFormats.datetime)}format(t,n){const o=this.options.time.displayFormats,u=this._unit,f=n||o[u];return this._adapter.format(t,f)}_tickFormatFunction(t,n,s,o){const u=this.options,f=u.ticks.callback;if(f)return ct(f,[t,n,s],this);const h=u.time.displayFormats,p=this._unit,g=this._majorUnit,b=p&&h[p],_=g&&h[g],T=s[n],L=g&&_&&T&&T.major;return this._adapter.format(t,o||(L?_:b))}generateTickLabels(t){let n,s,o;for(n=0,s=t.length;n<s;++n)o=t[n],o.label=this._tickFormatFunction(o.value,n,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const n=this._offsets,s=this.getDecimalForValue(t);return this.getPixelForDecimal((n.start+s)*n.factor)}getValueForPixel(t){const n=this._offsets,s=this.getDecimalForPixel(t)/n.factor-n.end;return this.min+s*(this.max-this.min)}_getLabelSize(t){const n=this.options.ticks,s=this.ctx.measureText(t).width,o=Ii(this.isHorizontal()?n.maxRotation:n.minRotation),u=Math.cos(o),f=Math.sin(o),h=this._resolveTickFontOptions(0).size;return{w:s*u+h*f,h:s*f+h*u}}_getLabelCapacity(t){const n=this.options.time,s=n.displayFormats,o=s[n.unit]||s.millisecond,u=this._tickFormatFunction(t,0,kh(this,[t],this._majorUnit),o),f=this._getLabelSize(u),h=Math.floor(this.isHorizontal()?this.width/f.w:this.height/f.h)-1;return h>0?h:1}getDataTimestamps(){let t=this._cache.data||[],n,s;if(t.length)return t;const o=this.getMatchingVisibleMetas();if(this._normalized&&o.length)return this._cache.data=o[0].controller.getAllParsedValues(this);for(n=0,s=o.length;n<s;++n)t=t.concat(o[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let n,s;if(t.length)return t;const o=this.getLabels();for(n=0,s=o.length;n<s;++n)t.push(xh(this,o[n]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return zv(t.sort(bh))}}Ce(Uo,"id","time"),Ce(Uo,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Co(i,t,n){let s=0,o=i.length-1,u,f,h,p;n?(t>=i[s].pos&&t<=i[o].pos&&({lo:s,hi:o}=Ei(i,"pos",t)),{pos:u,time:h}=i[s],{pos:f,time:p}=i[o]):(t>=i[s].time&&t<=i[o].time&&({lo:s,hi:o}=Ei(i,"time",t)),{time:u,pos:h}=i[s],{time:f,pos:p}=i[o]);const g=f-u;return g?h+(p-h)*(t-u)/g:h}class Sh extends Uo{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(t);this._minPos=Co(n,this.min),this._tableRange=Co(n,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:n,max:s}=this,o=[],u=[];let f,h,p,g,b;for(f=0,h=t.length;f<h;++f)g=t[f],g>=n&&g<=s&&o.push(g);if(o.length<2)return[{time:n,pos:0},{time:s,pos:1}];for(f=0,h=o.length;f<h;++f)b=o[f+1],p=o[f-1],g=o[f],Math.round((b+p)/2)!==g&&u.push({time:g,pos:f/(h-1)});return u}_generate(){const t=this.min,n=this.max;let s=super.getDataTimestamps();return(!s.includes(t)||!s.length)&&s.splice(0,0,t),(!s.includes(n)||s.length===1)&&s.push(n),s.sort((o,u)=>o-u)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const n=this.getDataTimestamps(),s=this.getLabelTimestamps();return n.length&&s.length?t=this.normalize(n.concat(s)):t=n.length?n:s,t=this._cache.all=t,t}getDecimalForValue(t){return(Co(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const n=this._offsets,s=this.getDecimalForPixel(t)/n.factor-n.end;return Co(this._table,s*this._tableRange+this._minPos,!0)}}Ce(Sh,"id","timeseries"),Ce(Sh,"defaults",Uo.defaults);const Wd="label";function Ch(i,t){typeof i=="function"?i(t):i&&(i.current=t)}function Gb(i,t){const n=i.options;n&&t&&Object.assign(n,t)}function zd(i,t){i.labels=t}function Bd(i,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Wd;const s=[];i.datasets=t.map(o=>{const u=i.datasets.find(f=>f[n]===o[n]);return!u||!o.data||s.includes(u)?{...o}:(s.push(u),Object.assign(u,o),u)})}function Yb(i){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Wd;const n={labels:[],datasets:[]};return zd(n,i.labels),Bd(n,i.datasets,t),n}function Zb(i,t){const{height:n=150,width:s=300,redraw:o=!1,datasetIdKey:u,type:f,data:h,options:p,plugins:g=[],fallbackContent:b,updateMode:_,...T}=i,L=gt(null),D=gt(null),O=()=>{L.current&&(D.current=new qo(L.current,{type:f,data:Yb(h,u),options:p&&{...p},plugins:g}),Ch(t,D.current))},N=()=>{Ch(t,null),D.current&&(D.current.destroy(),D.current=null)};return je(()=>{!o&&D.current&&p&&Gb(D.current,p)},[o,p]),je(()=>{!o&&D.current&&zd(D.current.config.data,h.labels)},[o,h.labels]),je(()=>{!o&&D.current&&h.datasets&&Bd(D.current.config.data,h.datasets,u)},[o,h.datasets]),je(()=>{D.current&&(o?(N(),setTimeout(O)):D.current.update(_))},[o,p,h.labels,h.datasets,_]),je(()=>{D.current&&(N(),setTimeout(O))},[f]),je(()=>(O(),()=>N()),[]),td.createElement("canvas",{ref:L,role:"img",height:n,width:s,...T},b)}const Jb=Sl(Zb);function Qb(i,t){return qo.register(t),Sl((n,s)=>td.createElement(Jb,{...n,ref:s,type:i}))}const ex=Qb("line",Mo);qo.register(ml,vl,Oo,cs,Ob,zb,Db);const tx=({isDarkMode:i})=>{const[t,n]=oe([]),[s,o]=oe(!0),[u,f]=oe(null),h=async()=>{try{const L=await Ne.getSystemStats();n(L),f(null)}catch(L){console.error("Stats yÃ¼klenemedi:",L),f("Failed to load statistics")}finally{o(!1)}};je(()=>{h();const L=setInterval(h,6e4);return()=>clearInterval(L)},[]);const p=L=>{const D=L.filter(E=>E.titleID),O=L.filter(E=>!E.titleID),N=E=>({frequency:E.reduce((I,j)=>I+j.frequency,0)/(E.length||1)/1e6,temperature:E.reduce((I,j)=>I+j.temperature,0)/(E.length||1),socTemp:E.reduce((I,j)=>I+j.socSensorTemperature,0)/(E.length||1)});return{game:N(D),idle:N(O)}},g=()=>{if(t.length===0)return;const L=["Timestamp","CPU Frequency (MHz)","CPU Temperature (Â°C)","SoC Temperature (Â°C)","Title ID","Title Name"],D=t.map(K=>{const X=new Date(K.timestamp).toISOString(),V=(K.frequency/1e6).toFixed(2),G=K.temperature.toFixed(2),ee=K.socSensorTemperature.toFixed(2),de=K.titleID||"",he=K.titleName||"";return[X,V,G,ee,de,he].join(",")}),O=[L.join(","),...D].join(`
`),N=new Blob([O],{type:"text/csv;charset=utf-8;"}),E=URL.createObjectURL(N),I=document.createElement("a"),j=new Date().toISOString().split("T")[0];I.setAttribute("href",E),I.setAttribute("download",`system-stats-${j}.csv`),I.style.visibility="hidden",document.body.appendChild(I),I.click(),document.body.removeChild(I)},b={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{position:"top",labels:{color:i?"#fff":"#666"}},tooltip:{mode:"index",intersect:!1}},scales:{y:{type:"linear",display:!0,position:"left",grid:{color:i?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)"},ticks:{color:i?"#fff":"#666"}},y1:{type:"linear",display:!0,position:"right",grid:{drawOnChartArea:!1},ticks:{color:i?"#fff":"#666"}},x:{grid:{color:i?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)"},ticks:{color:i?"#fff":"#666"}}}},_={labels:t.map(L=>new Date(L.timestamp).toLocaleTimeString()),datasets:[{label:"CPU Frequency (MHz)",data:t.map(L=>L.frequency/1e6),borderColor:"#3498db",backgroundColor:"rgba(52, 152, 219, 0.5)",yAxisID:"y"},{label:"CPU Temperature (Â°C)",data:t.map(L=>L.temperature),borderColor:"#e74c3c",backgroundColor:"rgba(231, 76, 60, 0.5)",yAxisID:"y1"},{label:"SoC Temperature (Â°C)",data:t.map(L=>L.socSensorTemperature),borderColor:"#f1c40f",backgroundColor:"rgba(241, 196, 15, 0.5)",yAxisID:"y1"}]},T=p(t);return y("div",{className:`statistics ${i?"dark":""}`,children:s?y("div",{className:"statistics-loading",children:"Loading statistics..."}):u?y("div",{className:"statistics-error",children:u}):y("div",{className:"statistics-content",children:[y("div",{className:"chart-container",children:[y("button",{className:"export-button",onClick:g,disabled:t.length===0,title:"Export statistics to CSV file",children:"Export CSV"}),y(ex,{options:b,data:_})]}),y("div",{className:"stats-averages",children:[y("div",{className:"averages-group",children:[y("h3",{children:"System Idle Averages"}),y("div",{className:"averages-grid",children:[y("div",{className:"average-item",children:[y("span",{children:"CPU Frequency"}),y("strong",{children:[T.idle.frequency.toFixed(0)," MHz"]})]}),y("div",{className:"average-item",children:[y("span",{children:"CPU Temperature"}),y("strong",{children:[T.idle.temperature.toFixed(1),"Â°C"]})]}),y("div",{className:"average-item",children:[y("span",{children:"SoC Temperature"}),y("strong",{children:[T.idle.socTemp.toFixed(1),"Â°C"]})]})]})]}),y("div",{className:"averages-group",children:[y("h3",{children:"Gaming Averages"}),y("div",{className:"averages-grid",children:[y("div",{className:"average-item",children:[y("span",{children:"CPU Frequency"}),y("strong",{children:[T.game.frequency.toFixed(0)," MHz"]})]}),y("div",{className:"average-item",children:[y("span",{children:"CPU Temperature"}),y("strong",{children:[T.game.temperature.toFixed(1),"Â°C"]})]}),y("div",{className:"average-item",children:[y("span",{children:"SoC Temperature"}),y("strong",{children:[T.game.socTemp.toFixed(1),"Â°C"]})]})]})]})]})]})})};class Ao{static getConfig(t){return this.windows[t]}static getDesktopItems(){return[...Object.values(this.windows).filter(t=>t.visible!==!1).map((t,n)=>({id:n+1,name:t.title,type:t.id,app:t.id,icon:t.icon})),{id:Object.values(this.windows).length+1,name:"GitHub",type:"link",app:"link",icon:"ðŸ™",url:"https://github.com/barisyild/airpsx"}]}static getComponent(t){var n;return(n=this.windows[t])==null?void 0:n.component}}Ce(Ao,"windows",{fileManager:{id:"fileManager",title:"File Manager",icon:"ðŸ“",defaultWidth:800,defaultHeight:600,minWidth:400,minHeight:300,component:om},processList:{id:"processList",title:"Process List",icon:"ðŸ“Š",defaultWidth:700,defaultHeight:500,minWidth:300,minHeight:200,component:um},scriptEditor:{id:"scriptEditor",title:"Script Editor",icon:"ðŸ“",defaultWidth:800,defaultHeight:600,minWidth:400,minHeight:300,component:xm},scriptStore:{id:"scriptStore",title:"Script Store",icon:"ðŸ“¦",defaultWidth:850,defaultHeight:600,minWidth:400,minHeight:300,component:_m},systemInfo:{id:"systemInfo",title:"System Info",icon:"ðŸ–¥ï¸",defaultWidth:600,defaultHeight:400,minWidth:300,minHeight:200,component:jh},statistics:{id:"statistics",title:"Statistics",icon:"ðŸ“ˆ",defaultWidth:800,defaultHeight:600,minWidth:400,minHeight:300,component:tx},applications:{id:"applications",title:"Applications",icon:"ðŸŽ®",defaultWidth:800,defaultHeight:600,minWidth:400,minHeight:300,component:rm},profiles:{id:"profiles",title:"Profiles",icon:"ðŸ‘¤",defaultWidth:700,defaultHeight:500,minWidth:300,minHeight:200,component:fm},scheduler:{id:"scheduler",title:"Scheduler",icon:"â°",defaultWidth:900,defaultHeight:700,minWidth:500,minHeight:400,component:bm},mediaGallery:{id:"mediaGallery",title:"Media Gallery",icon:"ðŸ–¼ï¸",defaultWidth:900,defaultHeight:700,minWidth:400,minHeight:300,component:am},mediaPlayer:{id:"mediaPlayer",title:"Media Player",icon:"ðŸŽ¬",defaultWidth:800,defaultHeight:500,minWidth:400,minHeight:300,visible:!1,component:lm},imageViewer:{id:"imageViewer",title:"Image Viewer",icon:"ðŸ–¼ï¸",defaultWidth:800,defaultHeight:600,minWidth:400,minHeight:300,visible:!1,component:cm},scriptDetail:{id:"scriptDetail",title:"Script Detail",icon:"ðŸ“",defaultWidth:700,defaultHeight:500,minWidth:400,minHeight:350,visible:!1,component:wm}});const nx=({onAccept:i,isDarkMode:t})=>y("div",{className:`disclaimer-overlay ${t?"dark":""}`,children:y("div",{className:"disclaimer-modal",children:[y("h2",{children:"Disclaimer"}),y("div",{className:"disclaimer-content",children:["This software operates based on the data provided by users and the actions performed. Unexpected actions by users, improper use, or unforeseen circumstances may cause the console to behave unexpectedly or become bricked.",y("br",{}),y("br",{}),"The developer cannot be held responsible for any data loss, service interruptions, or other adverse outcomes that may occur during the use of the software.",y("br",{})," By using this software, you agree to this disclaimer of liability. We would like to explicitly state that this software does not support piracy and cannot be used for such purposes. The use of the software for illegal activities is strictly prohibited, and the developer accepts no responsibility for such misuse.",y("br",{}),y("br",{}),"In certain cases, improper use of this software may render your hardware inoperable ('bricked'). The developer is not liable for such outcomes."]}),y("div",{className:"disclaimer-actions",children:y("button",{onClick:i,children:"I Accept"})})]})}),ix=()=>{const[i]=oe(Ao.getDesktopItems()),[t,n]=oe([]),[s,o]=oe(null),[u,f]=oe({show:!1,x:0,y:0,item:null}),[h,p]=oe(()=>{const re=localStorage.getItem("theme");return re?re==="dark":!0}),[g,b]=oe([]),[_,T]=oe(null),[L,D]=oe(!0),[O,N]=oe("tr"),[E,I]=oe({id:null,time:0,clickCount:0}),[j,K]=oe(new Set),[X,V]=oe(-1),[G,ee]=oe(!1),[de,he]=oe(()=>document.cookie.includes("disclaimerAccepted=true")),[se,le]=oe({uploading:!1,progress:0,error:null,success:!1}),[R,F]=oe(!1),[S,me]=oe(""),[Me,$e]=oe({loading:!1,error:null,success:!1}),qe=gt(null),Ve=gt(null);je(()=>{localStorage.setItem("theme",h?"dark":"light")},[h]);const we=async()=>{try{const re=await Ne.getStorageInfo();b(re),T(null)}catch(re){console.error("Storage bilgisi alÄ±namadÄ±:",re),T("Failed to load storage information")}finally{D(!1)}};je(()=>{we();const re=setInterval(we,3e4);return()=>clearInterval(re)},[]);const ke=re=>re.includes("USB")?"ðŸ’½":re.includes("Disc")?"ðŸ’¿":"ðŸ’¾",Te=(re,fe,De)=>{let{x:Ee,y:ze}=re;const{width:Ie,height:Ze}=fe,Ke={width:Math.min(Ie,De.width),height:Math.min(Ze,De.height)};return Ee=Math.max(0,Math.min(Ee,De.width-Ke.width)),ze=Math.max(0,Math.min(ze,De.height-Ke.height)),{position:{x:Ee,y:ze},size:Ke}},Ae=(re,fe={},De=null)=>{const Ee=Ao.getConfig(re);if(!Ee)return;if(fe.windowId&&t.some(Ze=>Ze.id===fe.windowId)){const Ze=t.find(Ke=>Ke.id===fe.windowId);Ze.minimized&&n(t.map(Ke=>Ke.id===Ze.id?{...Ke,minimized:!1}:Ke)),o(Ze.id);return}if(!fe.windowId&&t.some(Ze=>Ze.app===re&&!Ze.customInstance)){const Ze=t.find(Ke=>Ke.app===re&&!Ke.customInstance);Ze.minimized&&n(t.map(Ke=>Ke.id===Ze.id?{...Ke,minimized:!1}:Ke)),o(Ze.id);return}const ze=document.querySelector(".desktop-content");if(ze==null?void 0:ze.getBoundingClientRect()){const Ze=fe.windowId||Date.now(),Ke={id:Ze,app:re,title:De||Ee.title,icon:Ee.icon,position:{x:50+t.length*20,y:50+t.length*20},size:{width:Ee.defaultWidth,height:Ee.defaultHeight},minSize:{width:Ee.minWidth,height:Ee.minHeight},minimized:!1,props:fe,customInstance:!!De};return n([...t,Ke]),o(Ke.id),Ze}},U=re=>{n(t.filter(fe=>fe.id!==re)),s===re&&o(null)},Z=()=>{f({...u,show:!1})},te=re=>{n(t.map(fe=>fe.id===re?{...fe,minimized:!0}:fe))},_e=re=>{if(re.preventDefault(),re.target.closest(".storage-panel")||re.target.closest(".window"))return;const fe=re.target,De=fe.classList.contains("desktop-icons"),Ee=fe.closest(".desktop-item");if(!De&&!Ee)return;const ze=Ee?i.find(Ie=>Ie.name===Ee.querySelector(".desktop-item-name").textContent):null;f({show:!0,x:re.pageX,y:re.pageY,item:ze,isBackground:!Ee})};je(()=>()=>{qe.current&&clearTimeout(qe.current)},[]),je(()=>{const re=fe=>{if(document.activeElement.tagName==="INPUT"||document.activeElement.tagName==="TEXTAREA")return;if(t.find(Ie=>Ie.id===s&&!Ie.minimized)){const Ie=document.querySelector(`[data-window-id="${s}"]`);if(!(Ie!=null&&Ie.contains(document.activeElement))&&fe.key==="Tab"){fe.preventDefault();const Ze=Ie.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');Ze.length>0&&Ze[0].focus()}return}if(!i.length)return;const Ee=Math.floor((window.innerHeight-60)/120),ze=Math.floor(X/Ee);switch(fe.key){case"ArrowUp":if(fe.preventDefault(),X>-1){const Ie=X-1;Ie>=0&&(V(Ie),K(new Set([i[Ie].id])))}else V(0),K(new Set([i[0].id]));break;case"ArrowDown":if(fe.preventDefault(),X<i.length-1){const Ie=X+1;V(Ie),K(new Set([i[Ie].id]))}break;case"ArrowLeft":if(fe.preventDefault(),ze>0){const Ie=X-Ee;Ie>=0&&(V(Ie),K(new Set([i[Ie].id])))}break;case"ArrowRight":if(fe.preventDefault(),ze<Math.ceil(i.length/Ee)-1){const Ie=X+Ee;Ie<i.length&&(V(Ie),K(new Set([i[Ie].id])))}break;case"Enter":if(fe.preventDefault(),X>-1&&!t.some(Ie=>Ie.app===i[X].app)){const Ie=i[X];Ie.app==="systemInfo"?ee(!0):Ae(Ie.app)}break;case"Escape":V(-1),K(new Set);break}};return window.addEventListener("keydown",re),()=>window.removeEventListener("keydown",re)},[X,i,t,s]);const Fe=(re,fe)=>{const De=i.findIndex(ze=>ze.id===fe.id);if(V(De),fe.type==="link"){window.open(fe.url,"_blank");return}if(fe.app==="systemInfo"){ee(!0);return}const Ee=Date.now();E.id===fe.id&&Ee-E.time<500&&E.clickCount===1?(Ae(fe.app),I({id:null,time:0,clickCount:0})):(I({id:fe.id,time:Ee,clickCount:1}),K(new Set([fe.id])))},$t=()=>{const re=new Date;re.setFullYear(re.getFullYear()+1),document.cookie=`disclaimerAccepted=true; expires=${re.toUTCString()}; path=/`,he(!0)},He=re=>{re&&re.name.toLowerCase().endsWith(".pkg")?(se.uploading&&(console.log("[Desktop] Stopping previous PKG upload..."),Ne.stopPkgUpload()),le({uploading:!0,progress:0,error:null,success:!1}),Ne.uploadPkg(re,fe=>{le(De=>({...De,progress:Math.min(fe,100)}))},fe=>{le({uploading:!1,progress:100,error:null,success:!0}),setTimeout(()=>{le({uploading:!1,progress:0,error:null,success:!1})},3e3)}).catch(fe=>{le({uploading:!1,progress:0,error:fe.message||"An error occurred during upload",success:!1})})):le({uploading:!1,progress:0,error:"Please select a valid .pkg file",success:!1})},at=async()=>{if(!S.trim()){$e({loading:!1,error:"Please enter a valid URL",success:!1});return}$e({loading:!0,error:null,success:!1});try{await Ne.installPackageFromUrl(S),$e({loading:!1,error:null,success:!0}),setTimeout(()=>{F(!1),me(""),$e({loading:!1,error:null,success:!1})},2e3)}catch(re){$e({loading:!1,error:re.message||"Failed to install package from URL",success:!1})}},Ft=re=>{const fe=re.target.files[0];fe&&He(fe),re.target.value=""};return y("div",{className:`desktop ${h?"dark":""}`,onClick:re=>{(re.target.classList.contains("desktop-content")||re.target.classList.contains("desktop-icons"))&&K(new Set),f({...u,show:!1})},onContextMenu:_e,children:[!de&&y(nx,{onAccept:$t,isDarkMode:h}),y("div",{className:"desktop-content",children:[y("div",{className:"desktop-icons",children:i.map((re,fe)=>y("div",{className:`desktop-item ${j.has(re.id)?"selected":""}`,onClick:De=>Fe(De,re),tabIndex:0,children:[y("div",{className:"desktop-item-icon icon",children:re.icon}),y("div",{className:"desktop-item-name",children:re.name})]},re.id))}),y("div",{className:`storage-panel ${h?"dark":""}`,children:[y("div",{className:"storage-header",children:["Storage",y("button",{className:"refresh-button icon",onClick:we,disabled:L,children:"ðŸ”„"})]}),L?y("div",{className:"storage-loading",children:"Loading storage info..."}):_?y("div",{className:"storage-error",children:_}):g.map((re,fe)=>y("div",{className:"storage-item",children:[y("div",{className:"storage-icon icon",children:ke(re.name)}),y("div",{className:"storage-info",children:[y("div",{className:"storage-name",children:re.name}),y("div",{className:"storage-usage",children:[y("div",{className:"storage-bar",children:y("div",{className:"storage-bar-fill",style:{width:`${re.used/re.total*100}%`}})}),y("div",{className:"storage-text",children:[Ne.formatBytes(re.used)," /"," ",Ne.formatBytes(re.total)]})]})]})]},re.path)),y("div",{className:"storage-dropzone",onClick:()=>{var re;return(re=Ve.current)==null?void 0:re.click()},onDragOver:re=>{re.preventDefault(),re.stopPropagation(),re.currentTarget.classList.add("drag-over")},onDragLeave:re=>{re.preventDefault(),re.stopPropagation(),re.currentTarget.classList.remove("drag-over")},onDrop:re=>{re.preventDefault(),re.stopPropagation(),re.currentTarget.classList.remove("drag-over");const De=Array.from(re.dataTransfer.files).find(Ee=>Ee.name.toLowerCase().endsWith(".pkg"));De?He(De):le({uploading:!1,progress:0,error:"Please drag a valid .pkg file",success:!1})},children:[y("input",{type:"file",ref:Ve,style:{display:"none"},accept:".pkg",onChange:Ft}),y("div",{className:"dropzone-content",children:se.uploading?y("div",{className:"pkg-upload-progress",children:[y("div",{className:"progress-bar-container",children:y("div",{className:"progress-bar-fill",style:{width:`${se.progress}%`}})}),y("div",{className:"progress-text",children:["Uploading: %",se.progress.toFixed(1)]})]}):se.error?y("div",{className:"pkg-upload-error",children:[y("div",{className:"dropzone-icon icon",children:"âŒ"}),y("div",{className:"dropzone-text",children:se.error})]}):se.success?y("div",{className:"pkg-upload-success",children:[y("div",{className:"dropzone-icon icon",children:"âœ…"}),y("div",{className:"dropzone-text",children:"PKG file successfully uploaded!"})]}):y(Pt,{children:[y("div",{className:"dropzone-icon icon",children:"ðŸ“¦"}),y("div",{className:"dropzone-text",children:"PKG Installer - Drag PKG file here"}),y("button",{className:"url-install-button",onClick:re=>{re.stopPropagation(),F(!0)},children:"Install from URL"})]})})]})]}),y(im,{isDarkMode:h}),y(jh,{isDarkMode:h,showPanel:G,onClose:()=>ee(!1)}),t.map(re=>{const fe=Ao.getComponent(re.app);return y(tm,{window:re,isActive:s===re.id,isDarkMode:h,onClose:()=>U(re.id),onFocus:()=>o(re.id),onDragStart:Z,onMinimize:()=>te(re.id),children:fe&&y(fe,{contextMenu:u,setContextMenu:f,isDarkMode:h,storage:g,isStorageLoading:L,storageError:_,language:O,onOpenWindow:De=>{Ae(De.app,De.props,De.title)},...re.props})},re.id)})]}),y(nm,{windows:t,activeWindow:s,isDarkMode:h,onWindowClick:(re,fe)=>{var Ee;const De=t.find(ze=>ze.id===re);if(De.minimized){const ze=(Ee=document.querySelector(".desktop-content"))==null?void 0:Ee.getBoundingClientRect();if(ze){const{position:Ie,size:Ze}=Te(De.position,De.size,ze);n(t.map(Ke=>Ke.id===re?{...Ke,minimized:!1,position:Ie,size:Ze}:Ke))}else n(t.map(Ie=>Ie.id===re?{...Ie,minimized:!1}:Ie))}else fe&&(n(t.map(ze=>ze.id===re?{...ze,minimized:!0}:ze)),o(null));!fe&&!De.minimized&&o(re)},onThemeToggle:()=>p(!h)}),R&&y("div",{className:`url-modal-overlay ${h?"dark":""}`,onClick:()=>F(!1),children:y("div",{className:`url-modal ${h?"dark":""}`,onClick:re=>re.stopPropagation(),children:[y("div",{className:"url-modal-header",children:[y("h3",{children:"Install Package from URL"}),y("button",{className:"close-button",onClick:()=>F(!1),children:"Ã—"})]}),y("div",{className:"url-modal-content",children:[y("input",{type:"text",className:"url-input",placeholder:"Enter package URL (e.g., http://example.com/game.pkg)",value:S,style:{width:"94%"},onChange:re=>me(re.target.value),disabled:Me.loading}),Me.error&&y("div",{className:"url-error-message",children:Me.error}),Me.success&&y("div",{className:"url-success-message",children:"Package installation started successfully!"})]}),y("div",{className:"url-modal-footer",children:y("button",{className:"install-url-button",onClick:at,disabled:Me.loading,children:Me.loading?"Installing...":"Install"})})]})})]})};function rx(){return navigator.userAgent.includes("PlayStation 4")?document.body.classList.add("ps4"):navigator.userAgent.includes("PlayStation 5")&&document.body.classList.add("ps5"),y(ix,{})}tn.init();Ls.defineMode("haxe",function(i,t){var n=i.indentUnit;function s(C){return{type:C,style:"keyword"}}var o=s("keyword a"),u=s("keyword b"),f=s("keyword c"),h=s("operator"),p={type:"atom",style:"atom"},g={type:"attribute",style:"attribute"},D=s("typedef"),b={if:o,while:o,else:u,do:u,try:u,return:f,break:f,continue:f,new:f,throw:f,var:s("var"),final:s("var"),inline:g,static:g,using:s("import"),public:g,private:g,overload:g,extern:g,cast:s("cast"),import:s("import"),macro:s("macro"),function:s("function"),catch:s("catch"),untyped:s("untyped"),callback:s("cb"),for:s("for"),switch:s("switch"),case:s("case"),default:s("default"),in:h,is:h,as:h,never:s("property_access"),trace:s("trace"),class:D,abstract:D,enum:D,interface:D,typedef:D,extends:D,implements:D,dynamic:D,true:p,false:p,null:p},_=/[+\-*&%=<>!?|]/;function T(C,W,$){return W.tokenize=$,$(C,W)}function L(C,W){for(var $=!1,Q;(Q=C.next())!=null;){if(Q==W&&!$)return!0;$=!$&&Q=="\\"}}var D,O;function N(C,W,$){return D=C,O=$,W}function E(C,W){var $=C.next();if($=='"')return T(C,W,I($));if($=="'")return j($,C,W);if($=="}")return W.interpolationStack.length>0?(W.tokenize=W.interpolationStack.pop(),N($,"string")):N($);if(/[\[\]{}\(\),;\:\.]/.test($))return N($);if($=="0"&&C.eat(/x/i))return C.eatWhile(/[\da-f]/i),N("number","number");if(/\d/.test($)||$=="-"&&C.eat(/\d/))return C.match(/^\d*(?:\.\d*(?!\.))?(?:[eE][+\-]?\d+)?/),N("number","number");if(W.reAllowed&&$=="~"&&C.eat(/\//))return L(C,"/"),C.eatWhile(/[gimsu]/),N("regexp","string-2");if($=="/")return C.eat("*")?T(C,W,V):C.eat("/")?(C.skipToEnd(),N("comment","comment")):(C.eatWhile(_),N("operator",null,C.current()));if($=="#")return C.skipToEnd(),N("conditional","meta");if($=="@")return C.eat(/:/),C.eatWhile(/[\w_]/),N("metadata","meta");if(_.test($))return C.eatWhile(_),N("operator",null,C.current());var Q;if(/[A-Z]/.test($))return C.eatWhile(/[\w_<>]/),Q=C.current(),N("type","variable-3",Q);C.eatWhile(/[\w_]/);var Q=C.current(),B=b.propertyIsEnumerable(Q)&&b[Q];return B&&W.kwAllowed?N(B.type,B.style,Q):N("variable","variable",Q)}function I(C){return function(W,$){return L(W,C)&&($.tokenize=E),N("string","string")}}function j(C,W,$){if(W.eat(C))return N("string","string");function Q(B,Y){for(var be=!1;;){var ne=B.next();if(ne==null)break;if(ne=="$"&&B.peek()=="$"){B.next();continue}if(ne=="$")return Y.interpolationStack.push(Y.tokenize),Y.tokenize=K,N("string","string");if(ne==C&&!be){Y.tokenize=E;break}be=!be&&ne=="\\"}return N("string","string")}return $.tokenize=Q,Q(W,$)}function K(C,W){return C.eat("$"),C.eat("{")?W.tokenize=E:W.tokenize=X,N("string","string")}function X(C,W){return C.eatWhile(/[\w_]/),W.tokenize=W.interpolationStack.pop(),"variable"}function V(C,W){for(var $=!1,Q;Q=C.next();){if(Q=="/"&&$){W.tokenize=E;break}$=Q=="*"}return N("comment","comment")}var G={atom:!0,number:!0,variable:!0,string:!0,regexp:!0};function ee(C,W,$,Q,B,Y){this.indented=C,this.column=W,this.type=$,this.prev=B,this.info=Y,Q!=null&&(this.align=Q)}function de(C,W){for(var $=C.localVars;$;$=$.next)if($.name==W)return!0}function he(C,W,$,Q,B){var Y=C.cc;for(R.state=C,R.stream=B,R.marked=null,R.cc=Y,C.lexical.hasOwnProperty("align")||(C.lexical.align=!0);;){var be=Y.length?Y.pop():Ae;if(be($,Q)){for(;Y.length&&Y[Y.length-1].lex;)Y.pop()();return R.marked?R.marked:$=="variable"&&de(C,Q)?"variable-2":$=="variable"&&se(C,Q)?"variable-3":W}}}function se(C,W){if(/[a-z]/.test(W.charAt(0)))return!1;for(var $=C.importedtypes.length,Q=0;Q<$;Q++)if(C.importedtypes[Q]==W)return!0}function le(C){for(var W=R.state,$=W.importedtypes;$;$=$.next)if($.name==C)return;W.importedtypes={name:C,next:W.importedtypes}}var R={state:null,column:null,marked:null,cc:null};function F(){for(var C=arguments.length-1;C>=0;C--)R.cc.push(arguments[C])}function S(){return F.apply(null,arguments),!0}function me(C,W){for(var $=W;$;$=$.next)if($.name==C)return!0;return!1}function Me(C){var W=R.state;if(W.context){if(R.marked="def",me(C,W.localVars))return;W.localVars={name:C,next:W.localVars}}else if(W.globalVars){if(me(C,W.globalVars))return;W.globalVars={name:C,next:W.globalVars}}}var $e={name:"this",next:null};function qe(){R.state.context||(R.state.localVars=$e),R.state.context={prev:R.state.context,vars:R.state.localVars}}function Ve(){R.state.localVars=R.state.context.vars,R.state.context=R.state.context.prev}Ve.lex=!0;function we(C,W){var $=function(){var Q=R.state;Q.lexical=new ee(Q.indented,R.stream.column(),C,null,Q.lexical,W)};return $.lex=!0,$}function ke(){var C=R.state;C.lexical.prev&&(C.lexical.type==")"&&(C.indented=C.lexical.indented),C.lexical=C.lexical.prev)}ke.lex=!0;function Te(C){function W($){return $==C?S():C==";"?F():S(W)}return W}function Ae(C){return C=="@"?S(Fe):C=="var"?S(we("vardef"),ze,Te(";"),ke):C=="keyword a"?S(we("form"),U,Ae,ke):C=="keyword b"?S(we("form"),Ae,ke):C=="{"?S(we("}"),qe,Ee,ke,Ve):C==";"?S():C=="attribute"?S(_e):C=="function"?S(wt):C=="for"?S(we("form"),Te("("),we(")"),Ze,Te(")"),ke,Ae,ke):C=="variable"?S(we("stat"),Ft):C=="switch"?S(we("form"),U,we("}","switch"),Te("{"),Ee,ke,ke):C=="case"?S(U,Te(":")):C=="default"?S(Te(":")):C=="catch"?S(we("form"),qe,Te("("),un,Te(")"),Ae,ke,Ve):C=="import"?S(He,Te(";")):C=="typedef"?S(at):F(we("stat"),U,Te(";"),ke)}function U(C){return G.hasOwnProperty(C)||C=="type"?S(te):C=="function"?S(wt):C=="keyword c"?S(Z):C=="("?S(we(")"),Z,Te(")"),ke,te):C=="operator"?S(U):C=="["?S(we("]"),De(Z,"]"),ke,te):C=="{"?S(we("}"),De(fe,"}"),ke,te):S()}function Z(C){return C.match(/[;\}\)\],]/)?F():F(U)}function te(C,W){if(C=="operator"&&/\+\+|--/.test(W))return S(te);if(C=="operator"||C==":")return S(U);if(C!=";"){if(C=="(")return S(we(")"),De(U,")"),ke,te);if(C==".")return S(re,te);if(C=="[")return S(we("]"),U,Te("]"),ke,te)}}function _e(C){if(C=="attribute")return S(_e);if(C=="function")return S(wt);if(C=="var")return S(ze)}function Fe(C){if(C==":"||C=="variable")return S(Fe);if(C=="(")return S(we(")"),De($t,")"),ke,Ae)}function $t(C){if(C=="variable")return S()}function He(C,W){if(C=="variable"&&/[A-Z]/.test(W.charAt(0)))return le(W),S();if(C=="variable"||C=="property"||C=="."||W=="*")return S(He)}function at(C,W){if(C=="variable"&&/[A-Z]/.test(W.charAt(0)))return le(W),S();if(C=="type"&&/[A-Z]/.test(W.charAt(0)))return S()}function Ft(C){return C==":"?S(ke,Ae):F(te,Te(";"),ke)}function re(C){if(C=="variable")return R.marked="property",S()}function fe(C){if(C=="variable"&&(R.marked="property"),G.hasOwnProperty(C))return S(Te(":"),U)}function De(C,W){function $(Q){return Q==","?S(C,$):Q==W?S():S(Te(W))}return function(Q){return Q==W?S():F(C,$)}}function Ee(C){return C=="}"?S():F(Ae,Ee)}function ze(C,W){return C=="variable"?(Me(W),S(Ht,Ie)):S()}function Ie(C,W){if(W=="=")return S(U,Ie);if(C==",")return S(ze)}function Ze(C,W){return C=="variable"?(Me(W),S(Ke,U)):F()}function Ke(C,W){if(W=="in")return S()}function wt(C,W){if(C=="variable"||C=="type")return Me(W),S(wt);if(W=="new")return S(wt);if(C=="(")return S(we(")"),qe,De(un,")"),ke,Ht,Ae,Ve)}function Ht(C){if(C==":")return S(Fn)}function Fn(C){if(C=="type"||C=="variable")return S();if(C=="{")return S(we("}"),De(vn,"}"),ke)}function vn(C){if(C=="variable")return S(Ht)}function un(C,W){if(C=="variable")return Me(W),S(Ht)}return{startState:function(C){var W=["Int","Float","String","Void","Std","Bool","Dynamic","Array"],$={tokenize:E,reAllowed:!0,kwAllowed:!0,cc:[],lexical:new ee((C||0)-n,0,"block",!1),localVars:t.localVars,importedtypes:W,context:t.localVars&&{vars:t.localVars},indented:0,interpolationStack:[]};return t.globalVars&&typeof t.globalVars=="object"&&($.globalVars=t.globalVars),$},token:function(C,W){if(C.sol()&&(W.lexical.hasOwnProperty("align")||(W.lexical.align=!1),W.indented=C.indentation()),C.eatSpace())return null;var $=W.tokenize(C,W);return D=="comment"?$:(W.reAllowed=!!(D=="operator"||D=="keyword c"||D.match(/^[\[{}\(,;:]$/)),W.kwAllowed=D!=".",he(W,$,D,O,C))},indent:function(C,W){if(C.tokenize!=E)return 0;var $=W&&W.charAt(0),Q=C.lexical;Q.type=="stat"&&$=="}"&&(Q=Q.prev);var B=Q.type,Y=$==B;return B=="vardef"?Q.indented+4:B=="form"&&$=="{"?Q.indented:B=="stat"||B=="form"?Q.indented+n:Q.info=="switch"&&!Y?Q.indented+(/^(?:case|default)\b/.test(W)?n:2*n):Q.align?Q.column+(Y?0:1):Q.indented+(Y?0:n)},electricChars:"{}",blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//"}});Ls.defineMIME("text/x-haxe","haxe");Ls.defineMode("hxml",function(){return{startState:function(){return{define:!1,inString:!1}},token:function(i,t){var o=i.peek(),n=i.sol();if(o=="#")return i.skipToEnd(),"comment";if(n&&o=="-"){var s="variable-2";return i.eat(/-/),i.peek()=="-"&&(i.eat(/-/),s="keyword a"),i.peek()=="D"&&(i.eat(/[D]/),s="keyword c",t.define=!0),i.eatWhile(/[A-Z]/i),s}var o=i.peek();return t.inString==!1&&o=="'"&&(t.inString=!0,i.next()),t.inString==!0?(i.skipTo("'")||i.skipToEnd(),i.peek()=="'"&&(i.next(),t.inString=!1),"string"):(i.next(),null)},lineComment:"#"}});Fi(y(rx,{}),document.getElementById("app"));
